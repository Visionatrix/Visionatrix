import{f as H,x,D as M,Z as Xt,O as ae,$ as _e,a0 as On,a1 as ge,a2 as $t,a3 as xt,a4 as Re,F as X,a5 as Ue,a6 as qe,n as re,a7 as W,a8 as Zt,a9 as je,aa as at,ab as it,ac as Fe,ad as Bn,ae as Un,af as jn,ag as He,ah as Ae,ai as We,aj as Pt,ak as fe,al as En,am as An,an as en,ao as Dn,ap as Ln,aq as Nt,ar as tt,as as Be,at as oe,au as Nn,av as Vn,aw as tn,ax as nn,ay as qn,az as an,aA as Hn,aB as Wn,aC as ln,aD as Qn,aE as Ne,aF as Kn,J as A,z as Qe,aG as Gn,A as de,_ as Ke,k as xe,U as rt,B as Ge,C as Me,G as ut,aH as Jn,aI as _t,aJ as Yn,V as Ee,W as $e,aK as ye,o as p,h as _,w as F,b as C,I as he,a as I,c as R,aL as on,aM as Xn,K as ie,i as P,r as pe,aN as Zn,t as Q,d as L,e as sn,aO as Rt,aP as ea,aQ as ta,aR as Vt,aS as na,aT as St,aU as aa,aV as la,aW as qt,aX as rn,aY as oa,aZ as sa,j as s,a_ as Ft,a$ as ia,b0 as ra,b1 as Ht,g as Ie,y as Tt,P as un,Q as se,l as ce,L as Ye,s as ua,b2 as dn,b3 as da,b4 as ca,b5 as ma,b6 as ht,b7 as fa,v as dt,b8 as cn,b9 as ve,ba as pa,bb as mn,m as zt,bc as va,q as ga,p as ha,bd as ya,be as ba}from"./DDVCLwGx.js";import{b as fn,_ as ct,a as pn}from"./DmPpSIfj.js";import{t as vn,b as Wt,o as mt,i as wa,p as ka,u as $a,f as xa,c as Ce,d as Sa,e as Ca,g as Ot,_ as Bt,a as gn}from"./DpqF1BEA.js";import{a as Ia,_ as Ma}from"./B5ENYifW.js";import{_ as Ut,a as Pa}from"./s6gsdzIE.js";import{_ as jt}from"./Ex4uFJba.js";const _a={wrapper:"w-full relative overflow-hidden",inner:"w-0 flex-1",title:"text-sm font-medium",description:"mt-1 text-sm leading-4 opacity-90",actions:"flex items-center gap-2 mt-3 flex-shrink-0",shadow:"",rounded:"rounded-lg",padding:"p-4",gap:"gap-3",icon:{base:"flex-shrink-0 w-5 h-5"},avatar:{base:"flex-shrink-0 self-center",size:"md"},color:{white:{solid:"text-gray-900 dark:text-white bg-white dark:bg-gray-900 ring-1 ring-gray-200 dark:ring-gray-800"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},default:{color:"white",variant:"solid",icon:null,closeButton:null,actionButton:{size:"xs",color:"primary",variant:"link"}}},Ra={wrapper:"relative",container:"relative w-full flex overflow-x-auto snap-x snap-mandatory scroll-smooth",item:"flex flex-none snap-center",arrows:{wrapper:"flex items-center justify-between"},indicators:{wrapper:"absolute flex items-center justify-center gap-3 bottom-4 inset-x-0",base:"rounded-full h-3 w-3",active:"bg-primary-500 dark:bg-primary-400",inactive:"bg-gray-100 dark:bg-gray-800"},default:{prevButton:{color:"black",class:"rtl:[&_span:first-child]:rotate-180 absolute start-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"black",class:"rtl:[&_span:last-child]:rotate-180 absolute end-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-right-20-solid"}}},Fa={base:"relative inline-flex flex-shrink-0 border-2 border-transparent disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none",rounded:"rounded-full",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",active:"bg-{color}-500 dark:bg-{color}-400",inactive:"bg-gray-200 dark:bg-gray-700",size:{"2xs":"h-3 w-5",xs:"h-3.5 w-6",sm:"h-4 w-7",md:"h-5 w-9",lg:"h-6 w-11",xl:"h-7 w-[3.25rem]","2xl":"h-8 w-[3.75rem]"},container:{base:"pointer-events-none relative inline-block rounded-full bg-white dark:bg-gray-900 shadow transform ring-0 transition ease-in-out duration-200",active:{"2xs":"translate-x-2 rtl:-translate-x-2",xs:"translate-x-2.5 rtl:-translate-x-2.5",sm:"translate-x-3 rtl:-translate-x-3",md:"translate-x-4 rtl:-translate-x-4",lg:"translate-x-5 rtl:-translate-x-5",xl:"translate-x-6 rtl:-translate-x-6","2xl":"translate-x-7 rtl:-translate-x-7"},inactive:"translate-x-0 rtl:-translate-x-0",size:{"2xs":"h-2 w-2",xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6","2xl":"h-7 w-7"}},icon:{base:"absolute inset-0 h-full w-full flex items-center justify-center transition-opacity",active:"opacity-100 ease-in duration-200",inactive:"opacity-0 ease-out duration-100",size:{"2xs":"h-2 w-2",xs:"h-2 w-2",sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4",xl:"h-5 w-5","2xl":"h-6 w-6"},on:"text-{color}-500 dark:text-{color}-400",off:"text-gray-400 dark:text-gray-500",loading:"animate-spin text-{color}-500 dark:text-{color}-400"},default:{onIcon:null,offIcon:null,loadingIcon:"i-heroicons-arrow-path-20-solid",color:"primary",size:"md"}},Ta={wrapper:"relative w-full flex items-center",base:"w-full absolute appearance-none cursor-pointer disabled:cursor-not-allowed disabled:bg-opacity-50 focus:outline-none peer group",rounded:"rounded-lg",background:"bg-transparent",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",progress:{base:"absolute pointer-events-none peer-disabled:bg-opacity-50",rounded:"rounded-s-lg",background:"bg-{color}-500 dark:bg-{color}-400",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"}},thumb:{base:"[&::-webkit-slider-thumb]:relative [&::-moz-range-thumb]:relative [&::-webkit-slider-thumb]:z-[1] [&::-moz-range-thumb]:z-[1] [&::-webkit-slider-thumb]:appearance-none [&::-moz-range-thumb]:appearance-none [&::-webkit-slider-thumb]:rounded-full [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:border-0",color:"text-{color}-500 dark:text-{color}-400",background:"[&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:dark:bg-gray-900 [&::-moz-range-thumb]:bg-current",ring:"[&::-webkit-slider-thumb]:ring-2 [&::-webkit-slider-thumb]:ring-current",size:{"2xs":"[&::-webkit-slider-thumb]:h-1.5 [&::-moz-range-thumb]:h-1.5 [&::-webkit-slider-thumb]:w-1.5 [&::-moz-range-thumb]:w-1.5 [&::-webkit-slider-thumb]:mt-[-2.5px] [&::-moz-range-thumb]:mt-[-2.5px]",xs:"[&::-webkit-slider-thumb]:h-2 [&::-moz-range-thumb]:h-2 [&::-webkit-slider-thumb]:w-2 [&::-moz-range-thumb]:w-2 [&::-webkit-slider-thumb]:mt-[-3px] [&::-moz-range-thumb]:mt-[-3px]",sm:"[&::-webkit-slider-thumb]:h-3 [&::-moz-range-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-moz-range-thumb]:w-3 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",md:"[&::-webkit-slider-thumb]:h-4 [&::-moz-range-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-moz-range-thumb]:w-4 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",lg:"[&::-webkit-slider-thumb]:h-5 [&::-moz-range-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-moz-range-thumb]:w-5 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",xl:"[&::-webkit-slider-thumb]:h-6 [&::-moz-range-thumb]:h-6 [&::-webkit-slider-thumb]:w-6 [&::-moz-range-thumb]:w-6 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1","2xl":"[&::-webkit-slider-thumb]:h-7 [&::-moz-range-thumb]:h-7 [&::-webkit-slider-thumb]:w-7 [&::-moz-range-thumb]:w-7 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1"}},track:{base:"[&::-webkit-slider-runnable-track]:group-disabled:bg-opacity-50 [&::-moz-range-track]:group-disabled:bg-opacity-50",background:"[&::-webkit-slider-runnable-track]:bg-gray-200 [&::-moz-range-track]:bg-gray-200 [&::-webkit-slider-runnable-track]:dark:bg-gray-700 [&::-moz-range-track]:dark:bg-gray-700",rounded:"[&::-webkit-slider-runnable-track]:rounded-lg [&::-moz-range-track]:rounded-lg",size:{"2xs":"[&::-webkit-slider-runnable-track]:h-px [&::-moz-range-track]:h-px",xs:"[&::-webkit-slider-runnable-track]:h-0.5 [&::-moz-range-track]:h-0.5",sm:"[&::-webkit-slider-runnable-track]:h-1 [&::-moz-range-track]:h-1",md:"[&::-webkit-slider-runnable-track]:h-2 [&::-moz-range-track]:h-2",lg:"[&::-webkit-slider-runnable-track]:h-3 [&::-moz-range-track]:h-3",xl:"[&::-webkit-slider-runnable-track]:h-4 [&::-moz-range-track]:h-4","2xl":"[&::-webkit-slider-runnable-track]:h-5 [&::-moz-range-track]:h-5"}},size:{"2xs":"h-1.5",xs:"h-2",sm:"h-3",md:"h-4",lg:"h-5",xl:"h-6","2xl":"h-7"},default:{size:"md",color:"primary"}},za={wrapper:"relative z-50",inner:"fixed inset-0 overflow-y-auto",container:"flex min-h-full items-end sm:items-center justify-center text-center",padding:"p-4 sm:p-0",margin:"sm:my-8",base:"relative text-left rtl:text-right flex flex-col",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},background:"bg-white dark:bg-gray-900",ring:"",rounded:"rounded-lg",shadow:"shadow-xl",width:"w-full sm:max-w-lg",height:"",fullscreen:"w-screen h-screen",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}};function hn(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let o=W(n);o instanceof HTMLElement&&t.add(o)}return t}var yn=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(yn||{});let Ze=Object.assign(H({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:x(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){let i=x(null);o({el:i,$el:i});let a=M(()=>Xt(i)),l=x(!1);ae(()=>l.value=!0),_e(()=>l.value=!1),Ba({ownerDocument:a},M(()=>l.value&&!!(e.features&16)));let r=Ua({ownerDocument:a,container:i,initialFocus:M(()=>e.initialFocus)},M(()=>l.value&&!!(e.features&2)));ja({ownerDocument:a,container:i,containers:e.containers,previousActiveElement:r},M(()=>l.value&&!!(e.features&8)));let u=On();function g($){let y=W(i);y&&(S=>S())(()=>{je(u.value,{[at.Forwards]:()=>{it(y,Fe.First,{skipElements:[$.relatedTarget]})},[at.Backwards]:()=>{it(y,Fe.Last,{skipElements:[$.relatedTarget]})}})})}let b=x(!1);function w($){$.key==="Tab"&&(b.value=!0,requestAnimationFrame(()=>{b.value=!1}))}function v($){if(!l.value)return;let y=hn(e.containers);W(i)instanceof HTMLElement&&y.add(W(i));let S=$.relatedTarget;S instanceof HTMLElement&&S.dataset.headlessuiFocusGuard!=="true"&&(bn(y,S)||(b.value?it(W(i),je(u.value,{[at.Forwards]:()=>Fe.Next,[at.Backwards]:()=>Fe.Previous})|Fe.WrapAround,{relativeTo:$.target}):$.target instanceof HTMLElement&&qe($.target)))}return()=>{let $={},y={ref:i,onKeydown:w,onFocusout:v},{features:S,initialFocus:k,containers:m,...c}=e;return ge(X,[!!(S&4)&&ge($t,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:g,features:xt.Focusable}),Re({ourProps:y,theirProps:{...t,...c},slot:$,attrs:t,slots:n,name:"FocusTrap"}),!!(S&4)&&ge($t,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:g,features:xt.Focusable})])}}}),{features:yn});function Oa(e){let t=x(Wt.slice());return re([e],([n],[o])=>{o===!0&&n===!1?vn(()=>{t.value.splice(0)}):o===!1&&n===!0&&(t.value=Wt.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(o=>o!=null&&o.isConnected))!=null?n:null}}function Ba({ownerDocument:e},t){let n=Oa(t);ae(()=>{Ue(()=>{var o,i;t.value||((o=e.value)==null?void 0:o.activeElement)===((i=e.value)==null?void 0:i.body)&&qe(n())},{flush:"post"})}),_e(()=>{t.value&&qe(n())})}function Ua({ownerDocument:e,container:t,initialFocus:n},o){let i=x(null),a=x(!1);return ae(()=>a.value=!0),_e(()=>a.value=!1),ae(()=>{re([t,n,o],(l,r)=>{if(l.every((g,b)=>(r==null?void 0:r[b])===g)||!o.value)return;let u=W(t);u&&vn(()=>{var g,b;if(!a.value)return;let w=W(n),v=(g=e.value)==null?void 0:g.activeElement;if(w){if(w===v){i.value=v;return}}else if(u.contains(v)){i.value=v;return}w?qe(w):it(u,Fe.First|Fe.NoScroll)===Bn.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),i.value=(b=e.value)==null?void 0:b.activeElement})},{immediate:!0,flush:"post"})}),i}function ja({ownerDocument:e,container:t,containers:n,previousActiveElement:o},i){var a;Zt((a=e.value)==null?void 0:a.defaultView,"focus",l=>{if(!i.value)return;let r=hn(n);W(t)instanceof HTMLElement&&r.add(W(t));let u=o.value;if(!u)return;let g=l.target;g&&g instanceof HTMLElement?bn(r,g)?(o.value=g,qe(g)):(l.preventDefault(),l.stopPropagation(),qe(u)):qe(o.value)},!0)}function bn(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Ea(e){let t=Un(e.getSnapshot());return _e(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function Aa(e,t){let n=e(),o=new Set;return{getSnapshot(){return n},subscribe(i){return o.add(i),()=>o.delete(i)},dispatch(i,...a){let l=t[i].call(n,...a);l&&(n=l,o.forEach(r=>r()))}}}function Da(){let e;return{before({doc:t}){var n;let o=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-o.clientWidth},after({doc:t,d:n}){let o=t.documentElement,i=o.clientWidth-o.offsetWidth,a=e-i;n.style(o,"paddingRight",`${a}px`)}}}function La(){return jn()?{before({doc:e,d:t,meta:n}){function o(i){return n.containers.flatMap(a=>a()).some(a=>a.contains(i))}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let r=mt();r.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>r.dispose()))}let a=(i=window.scrollY)!=null?i:window.pageYOffset,l=null;t.addEventListener(e,"click",r=>{if(r.target instanceof HTMLElement)try{let u=r.target.closest("a");if(!u)return;let{hash:g}=new URL(u.href),b=e.querySelector(g);b&&!o(b)&&(l=b)}catch{}},!0),t.addEventListener(e,"touchstart",r=>{if(r.target instanceof HTMLElement)if(o(r.target)){let u=r.target;for(;u.parentElement&&o(u.parentElement);)u=u.parentElement;t.style(u,"overscrollBehavior","contain")}else t.style(r.target,"touchAction","none")}),t.addEventListener(e,"touchmove",r=>{if(r.target instanceof HTMLElement){if(r.target.tagName==="INPUT")return;if(o(r.target)){let u=r.target;for(;u.parentElement&&u.dataset.headlessuiPortal!==""&&!(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth);)u=u.parentElement;u.dataset.headlessuiPortal===""&&r.preventDefault()}else r.preventDefault()}},{passive:!1}),t.add(()=>{var r;let u=(r=window.scrollY)!=null?r:window.pageYOffset;a!==u&&window.scrollTo(0,a),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function Na(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Va(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Ve=Aa(()=>new Map,{PUSH(e,t){var n;let o=(n=this.get(e))!=null?n:{doc:e,count:0,d:mt(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let o={doc:e,d:t,meta:Va(n)},i=[La(),Da(),Na()];i.forEach(({before:a})=>a==null?void 0:a(o)),i.forEach(({after:a})=>a==null?void 0:a(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Ve.subscribe(()=>{let e=Ve.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let o=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!o||!i&&o)&&Ve.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Ve.dispatch("TEARDOWN",n)}});function qa(e,t,n){let o=Ea(Ve),i=M(()=>{let a=e.value?o.value.get(e.value):void 0;return a?a.count>0:!1});return re([e,t],([a,l],[r],u)=>{if(!a||!l)return;Ve.dispatch("PUSH",a,n);let g=!1;u(()=>{g||(Ve.dispatch("POP",r??a,n),g=!0)})},{immediate:!0}),i}let yt=new Map,et=new Map;function Qt(e,t=x(!0)){Ue(n=>{var o;if(!t.value)return;let i=W(e);if(!i)return;n(function(){var l;if(!i)return;let r=(l=et.get(i))!=null?l:1;if(r===1?et.delete(i):et.set(i,r-1),r!==1)return;let u=yt.get(i);u&&(u["aria-hidden"]===null?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden",u["aria-hidden"]),i.inert=u.inert,yt.delete(i))});let a=(o=et.get(i))!=null?o:0;et.set(i,a+1),a===0&&(yt.set(i,{"aria-hidden":i.getAttribute("aria-hidden"),inert:i.inert}),i.setAttribute("aria-hidden","true"),i.inert=!0)})}let wn=Symbol("StackContext");var Ct=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ct||{});function Ha(){return Ae(wn,()=>{})}function Wa({type:e,enabled:t,element:n,onUpdate:o}){let i=Ha();function a(...l){o==null||o(...l),i(...l)}ae(()=>{re(t,(l,r)=>{l?a(0,e,n):r===!0&&a(1,e,n)},{immediate:!0,flush:"sync"})}),_e(()=>{t.value&&a(1,e,n)}),He(wn,a)}let Qa=Symbol("DescriptionContext");function Ka({slot:e=x({}),name:t="Description",props:n={}}={}){let o=x([]);function i(a){return o.value.push(a),()=>{let l=o.value.indexOf(a);l!==-1&&o.value.splice(l,1)}}return He(Qa,{register:i,slot:e,name:t,props:n}),M(()=>o.value.length>0?o.value.join(" "):void 0)}var Ga=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ga||{});let It=Symbol("DialogContext");function kn(e){let t=Ae(It,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,kn),n}return t}let lt="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Ja=H({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:lt},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:i}){var a,l;let r=(a=e.id)!=null?a:`headlessui-dialog-${We()}`,u=x(!1);ae(()=>{u.value=!0});let g=!1,b=M(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(g||(g=!0,console.warn(`Invalid role [${b}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),w=x(0),v=Pt(),$=M(()=>e.open===lt&&v!==null?(v.value&fe.Open)===fe.Open:e.open),y=x(null),S=M(()=>Xt(y));if(i({el:y,$el:y}),!(e.open!==lt||v!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof $.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${$.value===lt?void 0:e.open}`);let k=M(()=>u.value&&$.value?0:1),m=M(()=>k.value===0),c=M(()=>w.value>1),h=Ae(It,null)!==null,[d,f]=En(),{resolveContainers:z,mainTreeNodeRef:j,MainTreeNode:N}=An({portals:d,defaultContainers:[M(()=>{var q;return(q=me.panelRef.value)!=null?q:y.value})]}),B=M(()=>c.value?"parent":"leaf"),O=M(()=>v!==null?(v.value&fe.Closing)===fe.Closing:!1),V=M(()=>h||O.value?!1:m.value),ee=M(()=>{var q,E,G;return(G=Array.from((E=(q=S.value)==null?void 0:q.querySelectorAll("body > *"))!=null?E:[]).find(le=>le.id==="headlessui-portal-root"?!1:le.contains(W(j))&&le instanceof HTMLElement))!=null?G:null});Qt(ee,V);let D=M(()=>c.value?!0:m.value),K=M(()=>{var q,E,G;return(G=Array.from((E=(q=S.value)==null?void 0:q.querySelectorAll("[data-headlessui-portal]"))!=null?E:[]).find(le=>le.contains(W(j))&&le instanceof HTMLElement))!=null?G:null});Qt(K,D),Wa({type:"Dialog",enabled:M(()=>k.value===0),element:y,onUpdate:(q,E)=>{if(E==="Dialog")return je(q,{[Ct.Add]:()=>w.value+=1,[Ct.Remove]:()=>w.value-=1})}});let Z=Ka({name:"DialogDescription",slot:M(()=>({open:$.value}))}),Y=x(null),me={titleId:Y,panelRef:x(null),dialogState:k,setTitleId(q){Y.value!==q&&(Y.value=q)},close(){t("close",!1)}};He(It,me);let Se=M(()=>!(!m.value||c.value));en(z,(q,E)=>{q.preventDefault(),me.close(),Be(()=>E==null?void 0:E.focus())},Se);let be=M(()=>!(c.value||k.value!==0));Zt((l=S.value)==null?void 0:l.defaultView,"keydown",q=>{be.value&&(q.defaultPrevented||q.key===oe.Escape&&(q.preventDefault(),q.stopPropagation(),me.close()))});let we=M(()=>!(O.value||k.value!==0||h));return qa(S,we,q=>{var E;return{containers:[...(E=q.containers)!=null?E:[],z]}}),Ue(q=>{if(k.value!==0)return;let E=W(y);if(!E)return;let G=new ResizeObserver(le=>{for(let U of le){let T=U.target.getBoundingClientRect();T.x===0&&T.y===0&&T.width===0&&T.height===0&&me.close()}});G.observe(E),q(()=>G.disconnect())}),()=>{let{open:q,initialFocus:E,...G}=e,le={...n,ref:y,id:r,role:b.value,"aria-modal":k.value===0?!0:void 0,"aria-labelledby":Y.value,"aria-describedby":Z.value},U={open:k.value===0};return ge(Nt,{force:!0},()=>[ge(Dn,()=>ge(Ln,{target:y.value},()=>ge(Nt,{force:!1},()=>ge(Ze,{initialFocus:E,containers:z,features:m.value?je(B.value,{parent:Ze.features.RestoreFocus,leaf:Ze.features.All&~Ze.features.FocusLock}):Ze.features.None},()=>ge(f,{},()=>Re({ourProps:le,theirProps:{...G,...n},slot:U,attrs:n,slots:o,visible:k.value===0,features:tt.RenderStrategy|tt.Static,name:"Dialog"})))))),ge(N)])}}}),Ya=H({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var i;let a=(i=e.id)!=null?i:`headlessui-dialog-panel-${We()}`,l=kn("DialogPanel");o({el:l.panelRef,$el:l.panelRef});function r(u){u.stopPropagation()}return()=>{let{...u}=e,g={id:a,ref:l.panelRef,onClick:r};return Re({ourProps:g,theirProps:u,slot:{open:l.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}});var Xa=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Xa||{}),Za=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Za||{});function el(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let $n=Symbol("MenuContext");function ft(e){let t=Ae($n,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ft),n}return t}let tl=H({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let o=x(1),i=x(null),a=x(null),l=x([]),r=x(""),u=x(null),g=x(1);function b(v=$=>$){let $=u.value!==null?l.value[u.value]:null,y=Hn(v(l.value.slice()),k=>W(k.dataRef.domRef)),S=$?y.indexOf($):null;return S===-1&&(S=null),{items:y,activeItemIndex:S}}let w={menuState:o,buttonRef:i,itemsRef:a,items:l,searchQuery:r,activeItemIndex:u,activationTrigger:g,closeMenu:()=>{o.value=1,u.value=null},openMenu:()=>o.value=0,goToItem(v,$,y){let S=b(),k=xa(v===Ce.Specific?{focus:Ce.Specific,id:$}:{focus:v},{resolveItems:()=>S.items,resolveActiveIndex:()=>S.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.disabled});r.value="",u.value=k,g.value=y??1,l.value=S.items},search(v){let $=r.value!==""?0:1;r.value+=v.toLowerCase();let y=(u.value!==null?l.value.slice(u.value+$).concat(l.value.slice(0,u.value+$)):l.value).find(k=>k.dataRef.textValue.startsWith(r.value)&&!k.dataRef.disabled),S=y?l.value.indexOf(y):-1;S===-1||S===u.value||(u.value=S,g.value=1)},clearSearch(){r.value=""},registerItem(v,$){let y=b(S=>[...S,{id:v,dataRef:$}]);l.value=y.items,u.value=y.activeItemIndex,g.value=1},unregisterItem(v){let $=b(y=>{let S=y.findIndex(k=>k.id===v);return S!==-1&&y.splice(S,1),y});l.value=$.items,u.value=$.activeItemIndex,g.value=1}};return en([i,a],(v,$)=>{var y;w.closeMenu(),Nn($,Vn.Loose)||(v.preventDefault(),(y=W(i))==null||y.focus())},M(()=>o.value===0)),He($n,w),tn(M(()=>je(o.value,{0:fe.Open,1:fe.Closed}))),()=>{let v={open:o.value===0,close:w.closeMenu};return Re({ourProps:{},theirProps:e,slot:v,slots:t,attrs:n,name:"Menu"})}}}),nl=H({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var i;let a=(i=e.id)!=null?i:`headlessui-menu-button-${We()}`,l=ft("MenuButton");o({el:l.buttonRef,$el:l.buttonRef});function r(w){switch(w.key){case oe.Space:case oe.Enter:case oe.ArrowDown:w.preventDefault(),w.stopPropagation(),l.openMenu(),Be(()=>{var v;(v=W(l.itemsRef))==null||v.focus({preventScroll:!0}),l.goToItem(Ce.First)});break;case oe.ArrowUp:w.preventDefault(),w.stopPropagation(),l.openMenu(),Be(()=>{var v;(v=W(l.itemsRef))==null||v.focus({preventScroll:!0}),l.goToItem(Ce.Last)});break}}function u(w){switch(w.key){case oe.Space:w.preventDefault();break}}function g(w){e.disabled||(l.menuState.value===0?(l.closeMenu(),Be(()=>{var v;return(v=W(l.buttonRef))==null?void 0:v.focus({preventScroll:!0})})):(w.preventDefault(),l.openMenu(),el(()=>{var v;return(v=W(l.itemsRef))==null?void 0:v.focus({preventScroll:!0})})))}let b=nn(M(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var w;let v={open:l.menuState.value===0},{...$}=e,y={ref:l.buttonRef,id:a,type:b.value,"aria-haspopup":"menu","aria-controls":(w=W(l.itemsRef))==null?void 0:w.id,"aria-expanded":l.menuState.value===0,onKeydown:r,onKeyup:u,onClick:g};return Re({ourProps:y,theirProps:$,slot:v,attrs:t,slots:n,name:"MenuButton"})}}}),al=H({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var i;let a=(i=e.id)!=null?i:`headlessui-menu-items-${We()}`,l=ft("MenuItems"),r=x(null);o({el:l.itemsRef,$el:l.itemsRef}),wa({container:M(()=>W(l.itemsRef)),enabled:M(()=>l.menuState.value===0),accept(v){return v.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:v.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(v){v.setAttribute("role","none")}});function u(v){var $;switch(r.value&&clearTimeout(r.value),v.key){case oe.Space:if(l.searchQuery.value!=="")return v.preventDefault(),v.stopPropagation(),l.search(v.key);case oe.Enter:if(v.preventDefault(),v.stopPropagation(),l.activeItemIndex.value!==null){let y=l.items.value[l.activeItemIndex.value];($=W(y.dataRef.domRef))==null||$.click()}l.closeMenu(),an(W(l.buttonRef));break;case oe.ArrowDown:return v.preventDefault(),v.stopPropagation(),l.goToItem(Ce.Next);case oe.ArrowUp:return v.preventDefault(),v.stopPropagation(),l.goToItem(Ce.Previous);case oe.Home:case oe.PageUp:return v.preventDefault(),v.stopPropagation(),l.goToItem(Ce.First);case oe.End:case oe.PageDown:return v.preventDefault(),v.stopPropagation(),l.goToItem(Ce.Last);case oe.Escape:v.preventDefault(),v.stopPropagation(),l.closeMenu(),Be(()=>{var y;return(y=W(l.buttonRef))==null?void 0:y.focus({preventScroll:!0})});break;case oe.Tab:v.preventDefault(),v.stopPropagation(),l.closeMenu(),Be(()=>qn(W(l.buttonRef),v.shiftKey?Fe.Previous:Fe.Next));break;default:v.key.length===1&&(l.search(v.key),r.value=setTimeout(()=>l.clearSearch(),350));break}}function g(v){switch(v.key){case oe.Space:v.preventDefault();break}}let b=Pt(),w=M(()=>b!==null?(b.value&fe.Open)===fe.Open:l.menuState.value===0);return()=>{var v,$;let y={open:l.menuState.value===0},{...S}=e,k={"aria-activedescendant":l.activeItemIndex.value===null||(v=l.items.value[l.activeItemIndex.value])==null?void 0:v.id,"aria-labelledby":($=W(l.buttonRef))==null?void 0:$.id,id:a,onKeydown:u,onKeyup:g,role:"menu",tabIndex:0,ref:l.itemsRef};return Re({ourProps:k,theirProps:S,slot:y,attrs:t,slots:n,features:tt.RenderStrategy|tt.Static,visible:w.value,name:"MenuItems"})}}}),ll=H({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:n,expose:o}){var i;let a=(i=e.id)!=null?i:`headlessui-menu-item-${We()}`,l=ft("MenuItem"),r=x(null);o({el:r,$el:r});let u=M(()=>l.activeItemIndex.value!==null?l.items.value[l.activeItemIndex.value].id===a:!1),g=ka(r),b=M(()=>({disabled:e.disabled,get textValue(){return g()},domRef:r}));ae(()=>l.registerItem(a,b)),_e(()=>l.unregisterItem(a)),Ue(()=>{l.menuState.value===0&&u.value&&l.activationTrigger.value!==0&&Be(()=>{var m,c;return(c=(m=W(r))==null?void 0:m.scrollIntoView)==null?void 0:c.call(m,{block:"nearest"})})});function w(m){if(e.disabled)return m.preventDefault();l.closeMenu(),an(W(l.buttonRef))}function v(){if(e.disabled)return l.goToItem(Ce.Nothing);l.goToItem(Ce.Specific,a)}let $=$a();function y(m){$.update(m)}function S(m){$.wasMoved(m)&&(e.disabled||u.value||l.goToItem(Ce.Specific,a,0))}function k(m){$.wasMoved(m)&&(e.disabled||u.value&&l.goToItem(Ce.Nothing))}return()=>{let{disabled:m,...c}=e,h={active:u.value,disabled:m,close:l.closeMenu};return Re({ourProps:{id:a,ref:r,role:"menuitem",tabIndex:m===!0?void 0:-1,"aria-disabled":m===!0?!0:void 0,onClick:w,onFocus:v,onPointerenter:y,onMouseenter:y,onPointermove:S,onMousemove:S,onPointerleave:k,onMouseleave:k},theirProps:{...n,...c},slot:h,attrs:n,slots:t,name:"MenuItem"})}}}),ol=Symbol("GroupContext"),sl=H({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:o,expose:i}){var a;let l=(a=e.id)!=null?a:`headlessui-switch-${We()}`,r=Ae(ol,null),[u,g]=Sa(M(()=>e.modelValue),c=>t("update:modelValue",c),M(()=>e.defaultChecked));function b(){g(!u.value)}let w=x(null),v=r===null?w:r.switchRef,$=nn(M(()=>({as:e.as,type:n.type})),v);i({el:v,$el:v});function y(c){c.preventDefault(),b()}function S(c){c.key===oe.Space?(c.preventDefault(),b()):c.key===oe.Enter&&Ca(c.currentTarget)}function k(c){c.preventDefault()}let m=M(()=>{var c,h;return(h=(c=W(v))==null?void 0:c.closest)==null?void 0:h.call(c,"form")});return ae(()=>{re([m],()=>{if(!m.value||e.defaultChecked===void 0)return;function c(){g(e.defaultChecked)}return m.value.addEventListener("reset",c),()=>{var h;(h=m.value)==null||h.removeEventListener("reset",c)}},{immediate:!0})}),()=>{let{name:c,value:h,form:d,tabIndex:f,...z}=e,j={checked:u.value},N={id:l,ref:v,role:"switch",type:$.value,tabIndex:f===-1?0:f,"aria-checked":u.value,"aria-labelledby":r==null?void 0:r.labelledby.value,"aria-describedby":r==null?void 0:r.describedby.value,onClick:y,onKeyup:S,onKeypress:k};return ge(X,[c!=null&&u.value!=null?ge($t,Wn({features:xt.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:u.value,form:d,disabled:z.disabled,name:c,value:h})):null,Re({ourProps:N,theirProps:{...n,...ln(z,["modelValue","defaultChecked"])},slot:j,attrs:n,slots:o,name:"Switch"})])}}});function il(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function bt(e,...t){e&&t.length>0&&e.classList.add(...t)}function ot(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Mt=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(Mt||{});function rl(e,t){let n=mt();if(!e)return n.dispose;let{transitionDuration:o,transitionDelay:i}=getComputedStyle(e),[a,l]=[o,i].map(r=>{let[u=0]=r.split(",").filter(Boolean).map(g=>g.includes("ms")?parseFloat(g):parseFloat(g)*1e3).sort((g,b)=>b-g);return u});return a!==0?n.setTimeout(()=>t("finished"),a+l):t("finished"),n.add(()=>t("cancelled")),n.dispose}function Kt(e,t,n,o,i,a){let l=mt(),r=a!==void 0?il(a):()=>{};return ot(e,...i),bt(e,...t,...n),l.nextFrame(()=>{ot(e,...n),bt(e,...o),l.add(rl(e,u=>(ot(e,...o,...t),bt(e,...i),r(u))))}),l.add(()=>ot(e,...t,...n,...o,...i)),l.add(()=>r("cancelled")),l.dispose}function De(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let Et=Symbol("TransitionContext");var ul=(e=>(e.Visible="visible",e.Hidden="hidden",e))(ul||{});function dl(){return Ae(Et,null)!==null}function cl(){let e=Ae(Et,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function ml(){let e=Ae(At,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let At=Symbol("NestingContext");function pt(e){return"children"in e?pt(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function xn(e){let t=x([]),n=x(!1);ae(()=>n.value=!0),_e(()=>n.value=!1);function o(a,l=Ne.Hidden){let r=t.value.findIndex(({id:u})=>u===a);r!==-1&&(je(l,{[Ne.Unmount](){t.value.splice(r,1)},[Ne.Hidden](){t.value[r].state="hidden"}}),!pt(t)&&n.value&&(e==null||e()))}function i(a){let l=t.value.find(({id:r})=>r===a);return l?l.state!=="visible"&&(l.state="visible"):t.value.push({id:a,state:"visible"}),()=>o(a,Ne.Unmount)}return{children:t,register:i,unregister:o}}let Sn=tt.RenderStrategy,Cn=H({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:i}){let a=x(0);function l(){a.value|=fe.Opening,t("beforeEnter")}function r(){a.value&=~fe.Opening,t("afterEnter")}function u(){a.value|=fe.Closing,t("beforeLeave")}function g(){a.value&=~fe.Closing,t("afterLeave")}if(!dl()&&Qn())return()=>ge(In,{...e,onBeforeEnter:l,onAfterEnter:r,onBeforeLeave:u,onAfterLeave:g},o);let b=x(null),w=M(()=>e.unmount?Ne.Unmount:Ne.Hidden);i({el:b,$el:b});let{show:v,appear:$}=cl(),{register:y,unregister:S}=ml(),k=x(v.value?"visible":"hidden"),m={value:!0},c=We(),h={value:!1},d=xn(()=>{!h.value&&k.value!=="hidden"&&(k.value="hidden",S(c),g())});ae(()=>{let D=y(c);_e(D)}),Ue(()=>{if(w.value===Ne.Hidden&&c){if(v.value&&k.value!=="visible"){k.value="visible";return}je(k.value,{hidden:()=>S(c),visible:()=>y(c)})}});let f=De(e.enter),z=De(e.enterFrom),j=De(e.enterTo),N=De(e.entered),B=De(e.leave),O=De(e.leaveFrom),V=De(e.leaveTo);ae(()=>{Ue(()=>{if(k.value==="visible"){let D=W(b);if(D instanceof Comment&&D.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function ee(D){let K=m.value&&!$.value,Z=W(b);!Z||!(Z instanceof HTMLElement)||K||(h.value=!0,v.value&&l(),v.value||u(),D(v.value?Kt(Z,f,z,j,N,Y=>{h.value=!1,Y===Mt.Finished&&r()}):Kt(Z,B,O,V,N,Y=>{h.value=!1,Y===Mt.Finished&&(pt(d)||(k.value="hidden",S(c),g()))})))}return ae(()=>{re([v],(D,K,Z)=>{ee(Z),m.value=!1},{immediate:!0})}),He(At,d),tn(M(()=>je(k.value,{visible:fe.Open,hidden:fe.Closed})|a.value)),()=>{let{appear:D,show:K,enter:Z,enterFrom:Y,enterTo:me,entered:Se,leave:be,leaveFrom:we,leaveTo:q,...E}=e,G={ref:b},le={...E,...$.value&&v.value&&Kn.isServer?{class:A([n.class,E.class,...f,...z])}:{}};return Re({theirProps:le,ourProps:G,slot:{},slots:o,attrs:n,features:Sn,visible:k.value==="visible",name:"TransitionChild"})}}}),fl=Cn,In=H({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o}){let i=Pt(),a=M(()=>e.show===null&&i!==null?(i.value&fe.Open)===fe.Open:e.show);Ue(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let l=x(a.value?"visible":"hidden"),r=xn(()=>{l.value="hidden"}),u=x(!0),g={show:a,appear:M(()=>e.appear||!u.value)};return ae(()=>{Ue(()=>{u.value=!1,a.value?l.value="visible":pt(r)||(l.value="hidden")})}),He(At,r),He(Et,g),()=>{let b=ln(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),w={unmount:e.unmount};return Re({ourProps:{...w,as:"template"},theirProps:{},slot:{},slots:{...o,default:()=>[ge(fl,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...w,...b},o.default)]},attrs:{},features:Sn,visible:l.value==="visible",name:"Transition"})}}});const wt=Qe(de.ui.strategy,de.ui.dropdown,Gn),pl=H({components:{HMenu:tl,HMenuButton:nl,HMenuItems:al,HMenuItem:ll,UIcon:xe,UAvatar:rt,UKbd:fn},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},openDelay:{type:Number,default:()=>wt.default.openDelay},closeDelay:{type:Number,default:()=>wt.default.closeDelay},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(e,{emit:t}){const{ui:n,attrs:o}=Ge("dropdown",Me(e,"ui"),wt,Me(e,"class")),i=M(()=>ut(e.mode==="hover"?{offsetDistance:0}:{},e.popper,n.value.popper)),[a,l]=Jn(i.value),r=x(null);let u=null,g=null;ae(()=>{var c,h;const k=(c=a.value)==null?void 0:c.$.provides;if(!k)return;const m=Object.getOwnPropertySymbols(k);r.value=m.length&&k[m[0]],e.open&&((h=r.value)==null||h.openMenu())});const b=M(()=>{var h,d,f;if(e.mode!=="hover")return{};const k=((h=e.popper)==null?void 0:h.offsetDistance)||((d=n.value.popper)==null?void 0:d.offsetDistance)||8,m=(f=i.value.placement)==null?void 0:f.split("-")[0],c=`${k}px`;return m==="top"||m==="bottom"?{paddingTop:c,paddingBottom:c}:m==="left"||m==="right"?{paddingLeft:c,paddingRight:c}:{paddingTop:c,paddingBottom:c,paddingLeft:c,paddingRight:c}});function w(k){!k.cancelable||!r.value||e.mode==="click"||(r.value.menuState===0?r.value.closeMenu():r.value.openMenu())}function v(){e.mode!=="hover"||!r.value||(g&&(clearTimeout(g),g=null),r.value.menuState!==0&&(u=u||setTimeout(()=>{r.value.openMenu&&r.value.openMenu(),u=null},e.openDelay)))}function $(){e.mode!=="hover"||!r.value||(u&&(clearTimeout(u),u=null),r.value.menuState!==1&&(g=g||setTimeout(()=>{r.value.closeMenu&&r.value.closeMenu(),g=null},e.closeDelay)))}function y(k,m,{href:c,navigate:h,close:d,isExternal:f}){m.click&&m.click(k),c&&!f&&(h(k),d())}re(()=>e.open,(k,m)=>{r.value&&(m===void 0||k===m||(k?r.value.openMenu():r.value.closeMenu()))}),re(()=>{var k;return(k=r.value)==null?void 0:k.menuState},(k,m)=>{m===void 0||k===m||t("update:open",k===0)});const S=sn;return _t(()=>Rt()),{ui:n,attrs:o,popper:i,trigger:a,container:l,containerStyle:b,onTouchStart:w,onMouseEnter:v,onMouseLeave:$,onClick:y,getNuxtLinkProps:Yn,twMerge:Ee,twJoin:$e,NuxtLink:S}}}),vl=["disabled"];function gl(e,t,n,o,i,a){const l=ye("HMenuButton"),r=xe,u=rt,g=fn,b=ye("HMenuItem"),w=sn,v=ye("HMenuItems"),$=ye("HMenu");return p(),_($,ie({as:"div",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:F(({open:y})=>[C(l,{ref:"trigger",as:"div",disabled:e.disabled,class:A(e.ui.trigger),role:"button",onMouseenter:e.onMouseEnter,onTouchstartPassive:e.onTouchStart},{default:F(()=>[he(e.$slots,"default",{open:y,disabled:e.disabled},()=>[I("button",{disabled:e.disabled}," Open ",8,vl)])]),_:2},1032,["disabled","class","onMouseenter","onTouchstartPassive"]),y&&e.items.length?(p(),R("div",{key:0,ref:"container",class:A([e.ui.container,e.ui.width]),style:on(e.containerStyle),onMouseenter:t[0]||(t[0]=(...S)=>e.onMouseEnter&&e.onMouseEnter(...S))},[C(Xn,ie({appear:""},e.ui.transition),{default:F(()=>[I("div",null,[e.popper.arrow?(p(),R("div",{key:0,"data-popper-arrow":"",class:A(Object.values(e.ui.arrow))},null,2)):P("",!0),C(v,{class:A([e.ui.base,e.ui.divide,e.ui.ring,e.ui.rounded,e.ui.shadow,e.ui.background,e.ui.height]),static:""},{default:F(()=>[(p(!0),R(X,null,pe(e.items,(S,k)=>(p(),R("div",{key:k,class:A(e.ui.padding)},[(p(!0),R(X,null,pe(S,(m,c)=>(p(),_(w,ie({key:c,ref_for:!0},e.getNuxtLinkProps(m),{custom:""}),{default:F(({href:h,target:d,rel:f,navigate:z,isExternal:j,isActive:N})=>[C(b,{disabled:m.disabled},{default:F(({active:B,disabled:O,close:V})=>[(p(),_(Zn(h?"a":"button"),{href:O?void 0:h,rel:f,target:d,class:A(e.twMerge(e.twJoin(e.ui.item.base,e.ui.item.padding,e.ui.item.size,e.ui.item.rounded,B||N?e.ui.item.active:e.ui.item.inactive,O&&e.ui.item.disabled),m.class)),onClick:ee=>e.onClick(ee,m,{href:h,navigate:z,close:V,isExternal:j})},{default:F(()=>[he(e.$slots,m.slot||"item",{item:m},()=>{var ee;return[m.icon?(p(),_(r,{key:0,name:m.icon,class:A(e.twMerge(e.twJoin(e.ui.item.icon.base,B||N?e.ui.item.icon.active:e.ui.item.icon.inactive),m.iconClass))},null,8,["name","class"])):m.avatar?(p(),_(u,ie({key:1,ref_for:!0},{size:e.ui.item.avatar.size,...m.avatar},{class:e.ui.item.avatar.base}),null,16,["class"])):P("",!0),I("span",{class:A(e.twMerge(e.ui.item.label,m.labelClass))},Q(m.label),3),(ee=m.shortcuts)!=null&&ee.length?(p(),R("span",{key:2,class:A(e.ui.item.shortcuts)},[(p(!0),R(X,null,pe(m.shortcuts,D=>(p(),_(g,{key:D},{default:F(()=>[L(Q(D),1)]),_:2},1024))),128))],2)):P("",!0)]})]),_:2},1032,["href","rel","target","class","onClick"]))]),_:2},1032,["disabled"])]),_:2},1040))),128))],2))),128))]),_:3},8,["class"])])]),_:3},16)],38)):P("",!0)]),_:3},16,["class","onMouseleave"])}const vt=Ke(pl,[["render",gl]]),ze=Qe(de.ui.strategy,de.ui.textarea,ea),hl=H({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(ze.size).includes(e)}},color:{type:String,default:()=>ze.default.color,validator(e){return[...de.ui.colors,...Object.keys(ze.color)].includes(e)}},variant:{type:String,default:()=>ze.default.variant,validator(e){return[...Object.keys(ze.variant),...Object.values(ze.color).flatMap(t=>Object.keys(t))].includes(e)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:t}){const{ui:n,attrs:o}=Ge("textarea",Me(e,"ui"),ze,Me(e,"class")),{emitFormBlur:i,emitFormInput:a,inputId:l,color:r,size:u,name:g}=Ot(e,ze),b=x(ut({},e.modelModifiers,{trim:!1,lazy:!1,number:!1})),w=x(null),v=()=>{var h;e.autofocus&&((h=w.value)==null||h.focus())},$=()=>{if(e.autoresize){if(!w.value)return;w.value.rows=e.rows;const h=w.value.style.overflow;w.value.style.overflow="hidden";const d=window.getComputedStyle(w.value),f=parseInt(d.paddingTop),z=parseInt(d.paddingBottom),j=f+z,N=parseInt(d.lineHeight),{scrollHeight:B}=w.value,O=(B-j)/N;O>e.rows&&(w.value.rows=e.maxrows?Math.min(O,e.maxrows):O),w.value.style.overflow=h}},y=h=>{b.value.trim&&(h=h.trim()),b.value.number&&(h=ta(h)),t("update:modelValue",h),a()},S=h=>{$(),b.value.lazy||y(h.target.value)},k=h=>{const d=h.target.value;t("change",d),b.value.lazy&&y(d),b.value.trim&&(h.target.value=d.trim())},m=h=>{t("blur",h),i()};ae(()=>{setTimeout(()=>{v()},e.autofocusDelay)}),re(()=>e.modelValue,()=>{Be($)}),ae(()=>{setTimeout(()=>{v(),$()},100)});const c=M(()=>{var d,f;const h=((f=(d=n.value.color)==null?void 0:d[r.value])==null?void 0:f[e.variant])||n.value.variant[e.variant];return Ee($e(n.value.base,n.value.form,n.value.rounded,n.value.placeholder,n.value.size[u.value],e.padded?n.value.padding[u.value]:"p-0",h==null?void 0:h.replaceAll("{color}",r.value),!e.resize&&"resize-none"),e.textareaClass)});return{ui:n,attrs:o,name:g,inputId:l,textarea:w,textareaClass:c,onInput:S,onChange:k,onBlur:m}}}),yl=["id","value","name","rows","required","disabled","placeholder"];function bl(e,t,n,o,i,a){return p(),R("div",{class:A(e.ui.wrapper)},[I("textarea",ie({id:e.inputId,ref:"textarea",value:e.modelValue,name:e.name,rows:e.rows,required:e.required,disabled:e.disabled,placeholder:e.placeholder,class:e.textareaClass},e.attrs,{onInput:t[0]||(t[0]=(...l)=>e.onInput&&e.onInput(...l)),onBlur:t[1]||(t[1]=(...l)=>e.onBlur&&e.onBlur(...l)),onChange:t[2]||(t[2]=(...l)=>e.onChange&&e.onChange(...l))}),null,16,yl),he(e.$slots,"default")],2)}const wl=Ke(hl,[["render",bl]]);async function kl(e,t){return await $l(t).catch(o=>(console.error("Failed to get image meta for "+t,o+""),{width:0,height:0,ratio:0}))}async function $l(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,n)=>{const o=new Image;o.onload=()=>{const i={width:o.width,height:o.height,ratio:o.width/o.height};t(i)},o.onerror=i=>n(i),o.src=e})}function Gt(e){return t=>t?e[t]||t:e.missingValue}function xl({formatter:e,keyMap:t,joinWith:n="/",valueMap:o}={}){e||(e=(a,l)=>`${a}=${l}`),t&&typeof t!="function"&&(t=Gt(t));const i=o||{};return Object.keys(i).forEach(a=>{typeof i[a]!="function"&&(i[a]=Gt(i[a]))}),(a={})=>Object.entries(a).filter(([r,u])=>typeof u<"u").map(([r,u])=>{const g=i[r];return typeof g=="function"&&(u=g(a[r])),r=typeof t=="function"?t(r):r,e(r,u)}).join(n)}function Pe(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function Sl(e=""){if(e===void 0||!e.length)return[];const t=new Set;for(const n of e.split(" ")){const o=Number.parseInt(n.replace("x",""));o&&t.add(o)}return Array.from(t)}function Cl(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function Il(e){const t={};if(typeof e=="string")for(const n of e.split(/[\s,]+/).filter(o=>o)){const o=n.split(":");o.length!==2?t["1px"]=o[0].trim():t[o[0].trim()]=o[1].trim()}else Object.assign(t,e);return t}function Ml(e){const t={options:e},n=(i,a={})=>Mn(t,i,a),o=(i,a={},l={})=>n(i,{...l,modifiers:ut(a,l.modifiers||{})}).url;for(const i in e.presets)o[i]=(a,l,r)=>o(a,l,{...e.presets[i],...r});return o.options=e,o.getImage=n,o.getMeta=(i,a)=>Pl(t,i,a),o.getSizes=(i,a)=>Fl(t,i,a),t.$img=o,o}async function Pl(e,t,n){const o=Mn(e,t,{...n});return typeof o.getMeta=="function"?await o.getMeta():await kl(e,o.url)}function Mn(e,t,n){var g,b;if(t&&typeof t!="string")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(!t||t.startsWith("data:"))return{url:t};const{provider:o,defaults:i}=_l(e,n.provider||e.options.provider),a=Rl(e,n.preset);if(t=Vt(t)?t:na(t),!o.supportsAlias){for(const w in e.options.alias)if(t.startsWith(w)){const v=e.options.alias[w];v&&(t=St(v,t.slice(w.length)))}}if(o.validateDomains&&Vt(t)){const w=aa(t).host;if(!e.options.domains.find(v=>v===w))return{url:t}}const l=ut(n,a,i);l.modifiers={...l.modifiers};const r=l.modifiers.format;(g=l.modifiers)!=null&&g.width&&(l.modifiers.width=Pe(l.modifiers.width)),(b=l.modifiers)!=null&&b.height&&(l.modifiers.height=Pe(l.modifiers.height));const u=o.getImage(t,l,e);return u.format=u.format||r||"",u}function _l(e,t){const n=e.options.providers[t];if(!n)throw new Error("Unknown provider: "+t);return n}function Rl(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function Fl(e,t,n){var y,S,k,m,c;const o=Pe((y=n.modifiers)==null?void 0:y.width),i=Pe((S=n.modifiers)==null?void 0:S.height),a=Il(n.sizes),l=(k=n.densities)!=null&&k.trim()?Sl(n.densities.trim()):e.options.densities;Cl(l);const r=o&&i?i/o:0,u=[],g=[];if(Object.keys(a).length>=1){for(const h in a){const d=Jt(h,String(a[h]),i,r,e);if(d!==void 0){u.push({size:d.size,screenMaxWidth:d.screenMaxWidth,media:`(max-width: ${d.screenMaxWidth}px)`});for(const f of l)g.push({width:d._cWidth*f,src:Yt(e,t,n,d,f)})}}Tl(u)}else for(const h of l){const d=Object.keys(a)[0];let f=d?Jt(d,String(a[d]),i,r,e):void 0;f===void 0&&(f={size:"",screenMaxWidth:0,_cWidth:(m=n.modifiers)==null?void 0:m.width,_cHeight:(c=n.modifiers)==null?void 0:c.height}),g.push({width:h,src:Yt(e,t,n,f,h)})}zl(g);const b=g[g.length-1],w=u.length?u.map(h=>`${h.media?h.media+" ":""}${h.size}`).join(", "):void 0,v=w?"w":"x",$=g.map(h=>`${h.src} ${h.width}${v}`).join(", ");return{sizes:w,srcset:$,src:b==null?void 0:b.src}}function Jt(e,t,n,o,i){const a=i.options.screens&&i.options.screens[e]||Number.parseInt(e),l=t.endsWith("vw");if(!l&&/^\d+$/.test(t)&&(t=t+"px"),!l&&!t.endsWith("px"))return;let r=Number.parseInt(t);if(!a||!r)return;l&&(r=Math.round(r/100*a));const u=o?Math.round(r*o):n;return{size:t,screenMaxWidth:a,_cWidth:r,_cHeight:u}}function Yt(e,t,n,o,i){return e.$img(t,{...n.modifiers,width:o._cWidth?o._cWidth*i:void 0,height:o._cHeight?o._cHeight*i:void 0},n)}function Tl(e){var n;e.sort((o,i)=>o.screenMaxWidth-i.screenMaxWidth);let t=null;for(let o=e.length-1;o>=0;o--){const i=e[o];i.media===t&&e.splice(o,1),t=i.media}for(let o=0;o<e.length;o++)e[o].media=((n=e[o+1])==null?void 0:n.media)||""}function zl(e){e.sort((n,o)=>n.width-o.width);let t=null;for(let n=e.length-1;n>=0;n--){const o=e[n];o.width===t&&e.splice(n,1),t=o.width}}const Ol=xl({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,t)=>qt(e)+"_"+qt(t)}),Bl=(e,{modifiers:t={},baseURL:n}={},o)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const i=Ol(t)||"_";return n||(n=St(o.options.nuxt.baseURL,"/_ipx")),{url:St(n,i,la(e))}},Ul=!0,jl=!0,El=Object.freeze(Object.defineProperty({__proto__:null,getImage:Bl,supportsAlias:jl,validateDomains:Ul},Symbol.toStringTag,{value:"Module"})),Pn={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"]};Pn.providers={ipxStatic:{provider:El,defaults:{}}};const Dt=()=>{const e=oa(),t=rn();return t.$img||t._img||(t._img=Ml({...Pn,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};function Al(e){var t;(t=performance==null?void 0:performance.mark)==null||t.call(performance,"mark_feature_usage",{detail:{feature:e}})}const Dl={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},Ll=e=>{const t=M(()=>({provider:e.provider,preset:e.preset})),n=M(()=>({width:Pe(e.width),height:Pe(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),o=Dt(),i=M(()=>({...e.modifiers,width:Pe(e.width),height:Pe(e.height),format:e.format,quality:e.quality||o.options.quality,background:e.background,fit:e.fit}));return{options:t,attrs:n,modifiers:i}},Nl={...Dl,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1}},Vl=["src"],Je=H({__name:"NuxtImg",props:Nl,emits:["load","error"],setup(e,{emit:t}){const n=e,o=sa(),i=t,a=!1,l=Dt(),r=Ll(n),u=x(!1),g=x(),b=M(()=>l.getSizes(n.src,{...r.options.value,sizes:n.sizes,densities:n.densities,modifiers:{...r.modifiers.value,width:Pe(n.width),height:Pe(n.height)}})),w=M(()=>{const m={...r.attrs.value,"data-nuxt-img":""};return(!n.placeholder||u.value)&&(m.sizes=b.value.sizes,m.srcset=b.value.srcset),m}),v=M(()=>{let m=n.placeholder;if(m===""&&(m=!0),!m||u.value)return!1;if(typeof m=="string")return m;const c=Array.isArray(m)?m:typeof m=="number"?[m,m]:[10,10];return l(n.src,{...r.modifiers.value,width:c[0],height:c[1],quality:c[2]||50,blur:c[3]||3},r.options.value)}),$=M(()=>n.sizes?b.value.src:l(n.src,r.modifiers.value,r.options.value)),y=M(()=>v.value?v.value:$.value),k=rn().isHydrating;return ae(()=>{if(v.value){const m=new Image;$.value&&(m.src=$.value),n.sizes&&(m.sizes=b.value.sizes||"",m.srcset=b.value.srcset),m.onload=c=>{u.value=!0,i("load",c)},Al("nuxt-image");return}g.value&&(g.value.complete&&k&&(g.value.getAttribute("data-error")?i("error",new Event("error")):i("load",new Event("load"))),g.value.onload=m=>{i("load",m)},g.value.onerror=m=>{i("error",m)})}),(m,c)=>(p(),R("img",ie({ref_key:"imgEl",ref:g,class:n.placeholder&&!u.value?n.placeholderClass:void 0},{...s(a)?{onerror:"this.setAttribute('data-error', 1)"}:{},...w.value,...s(o)},{src:y.value}),null,16,Vl))}}),st=Qe(de.ui.strategy,de.ui.range,Ta),ql=H({inheritAttrs:!1,props:{modelValue:{type:Number,default:0},id:{type:String,default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},size:{type:String,default:null,validator(e){return Object.keys(st.size).includes(e)}},color:{type:String,default:()=>st.default.color,validator(e){return de.ui.colors.includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:t}){const{ui:n,attrs:o}=Ge("range",Me(e,"ui"),st),{emitFormChange:i,inputId:a,color:l,size:r,name:u}=Ot(e,st),g=M({get(){return e.modelValue},set(m){t("update:modelValue",m)}}),b=m=>{t("change",m.target.value),i()},w=M(()=>Ee($e(n.value.wrapper,n.value.size[r.value]),e.class)),v=M(()=>Ee($e(n.value.base,n.value.background,n.value.rounded,l.value&&n.value.ring.replaceAll("{color}",l.value),n.value.size[r.value]),e.inputClass)),$=M(()=>$e(n.value.thumb.base,l.value&&n.value.thumb.color.replaceAll("{color}",l.value),n.value.thumb.ring,n.value.thumb.background,n.value.thumb.size[r.value])),y=M(()=>$e(n.value.track.base,n.value.track.background,n.value.track.rounded,n.value.track.size[r.value])),S=M(()=>$e(n.value.progress.base,n.value.progress.rounded,l.value&&n.value.progress.background.replaceAll("{color}",l.value),n.value.progress.size[r.value])),k=M(()=>{const{modelValue:m,min:c,max:h}=e;return{width:`${(Math.max(c,Math.min(m,h))-c)/(h-c)*100}%`}});return{ui:n,attrs:o,name:u,inputId:a,value:g,wrapperClass:w,inputClass:v,thumbClass:$,trackClass:y,progressClass:S,progressStyle:k,onChange:b}}}),Hl=["id","name","min","max","disabled","step"];function Wl(e,t,n,o,i,a){return p(),R("div",{class:A(e.wrapperClass)},[Ft(I("input",ie({id:e.inputId,ref:"input","onUpdate:modelValue":t[0]||(t[0]=l=>e.value=l),name:e.name,min:e.min,max:e.max,disabled:e.disabled,step:e.step,type:"range",class:[e.inputClass,e.thumbClass,e.trackClass]},e.attrs,{onChange:t[1]||(t[1]=(...l)=>e.onChange&&e.onChange(...l))}),null,16,Hl),[[ia,e.value,void 0,{number:!0}]]),I("span",{class:A(e.progressClass),style:on(e.progressStyle)},null,6)],2)}const _n=Ke(ql,[["render",Wl]]),Ql={class:"image-mask flex flex-col w-full"},Kl={class:"canvas flex flex-col items-center justify-center mb-3 w-full"},Gl={class:"preview-over-original relative"},Jl={class:"actions flex items-center justify-center mb-3 mx-auto"},Yl={class:"options w-full max-w-[320px]"},Xl=H({__name:"ImageInpaint",props:ra({imageSrc:{type:String,required:!0}},{imageInpaintMask:{default:"",type:String},imageInpaintMaskModifiers:{},imageInpaintMaskData:{default:{},type:Object},imageInpaintMaskDataModifiers:{}}),emits:["update:imageInpaintMask","update:imageInpaintMaskData"],setup(e){const t=e,n=Ht(e,"imageInpaintMask"),o=Ht(e,"imageInpaintMaskData"),i=Ie(),a=x(null),l=x(null),r=x(null),u=x(null),g=x(30),b=x([]),w=x({width:i.$state.outputMaxSize,height:i.$state.outputMaxSize}),v=x(null),$=x({x:0,y:0}),y=x({x:0,y:0,radius:g.value,fill:"rgba(255, 255, 255, 0.5)",stroke:null,strokeWidth:0,visible:!1}),S=x(5),k=x(!1),m=x([]),c=x([]);function h(){if(!a.value||!r.value){console.error("Could not get stage, image layer, or mask layer");return}const U=a.value.getNode(),T=u.value?u.value.width:U.width(),J=u.value?u.value.height:U.height(),ue=document.createElement("canvas");ue.width=T,ue.height=J;const te=ue.getContext("2d");if(!te){console.error("Could not get 2d context for mask canvas");return}te.fillStyle="black",te.fillRect(0,0,T,J);const ke=T/U.width(),ne=J/U.height();te.fillStyle="white",b.value.forEach(Xe=>{te.beginPath(),te.arc(Xe.x*ke,Xe.y*ne,Xe.radius*Math.max(ke,ne),0,Math.PI*2,!0),te.closePath(),te.fill()});const Te=ue.toDataURL("image/png",1);Te?(O(),n.value=Te,y.value.visible=!1,k.value=!1):console.error("Could not get data URI for masked image")}function d(U){const T=a.value.getNode();if(U.type.startsWith("touch")){const J=U.evt.touches[0]||U.evt.changedTouches[0];return{x:J.clientX-T.getContainer().offsetLeft,y:J.clientY-T.getContainer().offsetTop}}return T.getPointerPosition()}function f(U){U.type==="mousedown"&&U.evt.button!==0||(k.value=!0,$.value=d(U),B(),z($.value))}function z(U){const T={x:U.x,y:U.y,radius:g.value,fill:"rgba(255, 255, 255, 1)"};b.value=b.value.filter(J=>!(j({x:J.x,y:J.y},U)+J.radius<=T.radius)),b.value.push(T)}function j(U,T){return Math.sqrt(Math.pow(T.x-U.x,2)+Math.pow(T.y-U.y,2))}function N(U){if(U.type.startsWith("touch")&&U.evt.preventDefault(),be(U),!k.value)return;const T=d(U);j($.value,d(U))>=S.value&&(z(T),$.value=T)}function B(){m.value.push([...b.value]),c.value=[]}function O(){o.value={circles:[...b.value],brushRadius:g.value,undoStack:m.value,redoStack:c.value}}function V(){o.value!==null&&(b.value=o.value.circles||[],g.value=o.value.brushRadius||30,m.value=o.value.undoStack||[],c.value=o.value.redoStack||[])}function ee(){m.value.length!==0&&(c.value.push([...b.value]),b.value=m.value.pop()||[])}function D(){c.value.length!==0&&(m.value.push([...b.value]),b.value=c.value.pop()||[])}function K(){k.value=!1}function Z(){n.value=""}function Y(){B(),b.value=[],n.value=""}const me=M(()=>m.value.length>0),Se=M(()=>c.value.length>0);function be(U){const T=d(U);y.value.x=T.x,y.value.y=T.y}function we(){y.value.visible=!1,k.value=!1}function q(){y.value.visible=!0,y.value.radius=g.value}function E(){const U=new Image;U.src=t.imageSrc,U.onload=()=>{u.value=U,G(),le()}}function G(){if(!u.value)return;const U=window.innerWidth,T=window.innerHeight,J=u.value.width/u.value.height;let ue,te;const ke=Math.min(U*.9,1200),ne=Math.min(T*.8,i.outputMaxSize);J>ke/ne?(ue=ke,te=ue/J):(te=ne,ue=te*J),w.value={width:Math.floor(ue),height:Math.floor(te)},le()}function le(){const U=w.value.width,T=w.value.height,J=u.value.width,ue=u.value.height,te=U/J,ke=T/ue,ne=Math.min(te,ke);v.value={x:0,y:0,width:J*ne,height:ue*ne}}return Tt(()=>{E(),V()}),ae(()=>{if(a.value){const U=a.value.getNode();U.on("touchstart",f),U.on("touchmove",N),U.on("touchend",K),U.on("touchcancel",we)}}),un(()=>{if(a.value){const U=a.value.getNode();U.off("touchstart"),U.off("touchmove"),U.off("touchend"),U.off("touchcancel")}O()}),(U,T)=>{const J=Je,ue=ye("v-image"),te=ye("v-layer"),ke=ye("v-circle"),ne=ye("v-stage"),Te=ce,Xe=_n,Tn=Ut;return p(),R("div",Ql,[I("div",Kl,[T[1]||(T[1]=I("p",{class:"text-sm my-2 text-slate-500"},"Select the target area for image inpaint",-1)),I("div",Gl,[e.imageSrc&&e.imageSrc!==""&&n.value!==""?(p(),_(J,{key:0,src:e.imageSrc,fit:"inside",width:s(w).width,height:s(w).height,draggable:"false",class:A({absolute:n.value!==""})},null,8,["src","width","height","class"])):P("",!0),n.value?(p(),_(J,{key:1,src:n.value,fit:"inside",width:s(w).width,height:s(w).height,draggable:"false",class:"opacity-50"},null,8,["src","width","height"])):P("",!0)]),n.value===""?(p(),_(ne,{key:0,ref_key:"stageRef",ref:a,config:s(w),onMousedown:f,onMousemove:N,onMouseup:K,onMouseleave:we,onMouseenter:q},{default:F(()=>[C(te,{ref_key:"imageLayerRef",ref:l},{default:F(()=>[C(ue,{image:s(u),config:s(w)},null,8,["image","config"])]),_:1},512),C(te,{ref_key:"maskLayerRef",ref:r},{default:F(()=>[(p(!0),R(X,null,pe(s(b),(gt,zn)=>(p(),_(ke,{key:zn,config:gt},null,8,["config"]))),128)),s(y).visible?(p(),_(ke,{key:0,config:s(y)},null,8,["config"])):P("",!0)]),_:1},512)]),_:1},8,["config"])):P("",!0)]),I("div",Jl,[C(Te,{class:"mr-2",size:"xs",icon:"i-heroicons-clipboard-document-check-16-solid",variant:"soft",disabled:s(b).length===0||n.value!=="",onClick:h},{default:F(()=>T[2]||(T[2]=[L(" Apply ")])),_:1},8,["disabled"]),C(Te,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-uturn-left-16-solid",variant:"soft",color:"cyan",disabled:!s(me)||n.value!=="",onClick:ee},null,8,["disabled"]),C(Te,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-uturn-right-16-solid",variant:"soft",color:"cyan",disabled:!s(Se)||n.value!=="",onClick:D},null,8,["disabled"]),C(Te,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-turn-up-left-20-solid",variant:"soft",disabled:s(b).length===0&&n.value==="",color:"red",onClick:Y},{default:F(()=>T[3]||(T[3]=[L(" Reset ")])),_:1},8,["disabled"]),C(Te,{size:"xs",icon:"i-heroicons-pencil-solid",variant:"soft",disabled:n.value==="",color:"orange",onClick:Z},{default:F(()=>T[4]||(T[4]=[L(" Edit ")])),_:1},8,["disabled"])]),I("div",Yl,[C(Tn,{class:"mb-3 text-sm",hint:`value: ${s(g)}`,label:"Brush radius"},{default:F(()=>[C(Xe,{modelValue:s(g),"onUpdate:modelValue":T[0]||(T[0]=gt=>se(g)?g.value=gt:null),min:1,max:100,size:"sm",class:"my-2",disabled:n.value!==""},null,8,["modelValue","disabled"])]),_:1},8,["hint"])])])}}}),Zl=Qe(de.ui.strategy,de.ui.modal,za),eo=H({components:{HDialog:Ja,HDialogPanel:Ya,TransitionRoot:In,TransitionChild:Cn},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close","close-prevented","after-leave"],setup(e,{emit:t}){const{ui:n,attrs:o}=Ge("modal",Me(e,"ui"),Zl,Me(e,"class")),i=M({get(){return e.modelValue},set(u){t("update:modelValue",u)}}),a=M(()=>e.transition?{...n.value.transition}:{});function l(u){if(e.preventClose){t("close-prevented");return}i.value=u,t("close")}const r=()=>{t("after-leave")};return _t(()=>Rt()),{ui:n,attrs:o,isOpen:i,transitionClass:a,onAfterLeave:r,close:l}}});function to(e,t,n,o,i,a){const l=ye("TransitionChild"),r=ye("HDialogPanel"),u=ye("HDialog"),g=ye("TransitionRoot");return p(),_(g,{appear:e.appear,show:e.isOpen,as:"template",onAfterLeave:e.onAfterLeave},{default:F(()=>[C(u,ie({class:e.ui.wrapper},e.attrs,{onClose:e.close}),{default:F(()=>[e.overlay?(p(),_(l,ie({key:0,as:"template",appear:e.appear},e.ui.overlay.transition,{class:e.ui.overlay.transition.enterFrom}),{default:F(()=>[I("div",{class:A([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear","class"])):P("",!0),I("div",{class:A(e.ui.inner)},[I("div",{class:A([e.ui.container,!e.fullscreen&&e.ui.padding])},[C(l,ie({as:"template",appear:e.appear},e.transitionClass,{class:e.transitionClass.enterFrom}),{default:F(()=>[C(r,{class:A([e.ui.base,e.ui.background,e.ui.ring,e.ui.shadow,e.fullscreen?e.ui.fullscreen:[e.ui.width,e.ui.height,e.ui.rounded,e.ui.margin]])},{default:F(()=>[he(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear","class"])],2)],2)]),_:3},16,["class","onClose"])]),_:3},8,["appear","show","onAfterLeave"])}const nt=Ke(eo,[["render",to]]),no="0.05";function ao(e,t){const n=parseFloat(e);if(isNaN(n))return e;const o=n+t;return o<0?"0":String(Number(o.toFixed(10)))}function lo(e,t){let n=t,o=t,i=0,a=0;for(;n>=0&&(n--,!(e[n]==="("&&i===a));)e[n]==="("&&i++,e[n]===")"&&a++;if(n<0)return!1;for(i=0,a=0;o<e.length&&!(e[o]===")"&&i===a);)e[o]==="("&&i++,e[o]===")"&&a++,o++;return o===e.length?!1:{start:n+1,end:o}}function oo(e){const t=/^\((.*)\)$/,n=e.match(t),o=/:([+-]?(\d*\.)?\d+([eE][+-]?\d+)?)/,i=e.match(o);return n&&!i?`(${n[1]}:1.0)`:e}function so(e){const t=e.composedPath()[0],n=parseFloat(no);if(t.tagName!=="TEXTAREA"||!(e.key==="ArrowUp"||e.key==="ArrowDown")||!e.ctrlKey&&!e.metaKey)return;e.preventDefault();let o=t.selectionStart,i=t.selectionEnd,a=t.value.substring(o,i);if(!a){const u=lo(t.value,o);if(u)o=u.start,i=u.end,a=t.value.substring(o,i);else{const g=" .,\\/!?%^*;:{}=-_`~()\r\n	";for(;!g.includes(t.value[o-1])&&o>0;)o--;for(;!g.includes(t.value[i])&&i<t.value.length;)i++;if(a=t.value.substring(o,i),!a)return}}a[a.length-1]===" "&&(a=a.substring(0,a.length-1),i-=1),t.value[o-1]==="("&&t.value[i]===")"&&(o-=1,i+=1,a=t.value.substring(o,i)),(a[0]!=="("||a[a.length-1]!==")")&&(a=`(${a})`),a=oo(a);const l=e.key==="ArrowUp"?n:-n,r=a.replace(/\((.*):(\d+(?:\.\d+)?)\)/,(u,g,b)=>(b=ao(b,l),Number(b)==1?g:`(${g}:${b})`));return t.setRangeText(r,o,i,"select"),t.value}const io={key:0,class:"text-red-300"},ro={key:0,class:"flex items-center"},uo={key:2,class:"flex flex-row flex-grow items-center justify-between"},co={key:3,class:"flex flex-row flex-grow items-center"},mo={class:"sm:inline"},fo={class:"preview-over-original relative"},po={key:1,class:"text-red-300 text-sm"},vo=H({__name:"InputParam",props:{inputParam:{type:Object,required:!0},index:{type:Number,required:!0},inputParamsMap:{type:Array,required:!0},advanced:{type:Boolean,default:!1}},setup(e){const t=e,n=x(!1),o=x(null),i=x(""),a=x({width:0,height:0}),l=x(""),r=x({}),u=x(null),g=t.inputParamsMap[t.index][t.inputParam.name].source_input_name,b=t.inputParamsMap.findIndex(d=>{if(Object.keys(d)[0]===t.inputParamsMap[t.index][t.inputParam.name].source_input_name)return!0});function w(){try{const d=t.inputParamsMap.find(f=>{const z=Object.keys(f)[0];if(z===g)return f[z]});k(d[g].value)}catch{a.value.width=0,a.value.height=0}}ae(()=>{t.inputParam.type==="range_scale"&&w(),t.inputParam.type==="image-mask"&&re(l,d=>{const f=new File([l.value],`image-mask-${t.inputParam.name}.png`,{type:"image/png"});t.inputParamsMap[t.index][t.inputParam.name].value=f,t.inputParamsMap[t.index][t.inputParam.name].mask_applied=d!==""})}),t.inputParam.type==="range_scale"&&re(t.inputParamsMap,()=>{w()});function v(d){return d?URL.createObjectURL(d):""}function $(){URL.revokeObjectURL(i.value),i.value="",o.value&&(o.value.$refs.input.value=""),t.inputParamsMap[t.index][t.inputParam.name].value=null,t.inputParamsMap[t.index][t.inputParam.name].image_preview_url=""}function y(){URL.revokeObjectURL(l.value),l.value="",r.value={},t.inputParamsMap[t.index][t.inputParam.name].value=null,t.inputParamsMap[t.index][t.inputParam.name].mask_applied=!1}const S=M(()=>t.inputParam.type!=="bool"?t.inputParam.display_name:"");function k(d){if(!(d instanceof File)){a.value.width=0,a.value.height=0;return}const f=URL.createObjectURL(d),z=new Image;z.onload=function(){a.value.width=z.naturalWidth,a.value.height=z.naturalHeight,URL.revokeObjectURL(z.src)},z.src=f}const m=M(()=>{if(t.inputParam.type==="range_scale"){const d=t.inputParamsMap[t.index][t.inputParam.name].value;return`value: ${d}x (${a.value.width}x${a.value.height} -> ${(a.value.width*d).toFixed(0)}x${(a.value.height*d).toFixed(0)})`}return["range","range_scale"].includes(t.inputParam.type)?`value: ${t.inputParamsMap[t.index][t.inputParam.name].value}`:""}),c=x(null);function h(d){const f=so(d);f&&(t.inputParamsMap[t.index][t.inputParam.name].value=f)}return ae(()=>{t.inputParam.type==="text"&&c.value&&c.value.$refs.textarea.addEventListener("keydown",h),t.inputParam.type==="image-mask"&&(u.value=t.inputParamsMap[b][g],re(t.inputParamsMap[b][g],d=>{l.value="",r.value={},u.value=d}))}),un(()=>{URL.revokeObjectURL(i.value),URL.revokeObjectURL(l.value),t.inputParam.type==="text"&&c.value&&c.value.$refs.textarea.removeEventListener("keydown",h)}),(d,f)=>{var Y;const z=wl,j=Bt,N=ce,B=Je,O=Xl,V=nt,ee=gn,D=jt,K=_n,Z=Ut;return(((Y=e.inputParam)==null?void 0:Y.advanced)||!1)===e.advanced?(p(),_(Z,{key:0,label:s(S),class:"mb-3",help:s(m)},{hint:F(()=>[e.inputParam.optional?P("",!0):(p(),R("span",io,"required"))]),default:F(()=>{var me,Se,be,we,q;return[e.inputParam.type==="text"?(p(),_(z,{key:0,ref_key:"textareaInput",ref:c,size:"md",placeholder:e.inputParam.display_name,required:!e.inputParam.optional,resize:!0,label:e.inputParam.display_name,value:e.inputParamsMap[e.index][e.inputParam.name].value,autoresize:"",variant:"outline",onInput:f[0]||(f[0]=E=>{const G=E.target;e.inputParamsMap[e.index][e.inputParam.name].value=G.value})},null,8,["placeholder","required","label","value"])):P("",!0),e.inputParam.type==="number"?(p(),R(X,{key:1},[e.inputParam.name==="seed"?(p(),R("div",ro,[e.inputParam.type==="number"?(p(),_(j,{key:0,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":f[1]||(f[1]=E=>e.inputParamsMap[e.index][e.inputParam.name].value=E),type:"number",label:e.inputParam.display_name,required:!e.inputParam.optional,max:e.inputParam.max||100,min:e.inputParam.min||0,variant:"outline"},null,8,["modelValue","label","required","max","min"])):P("",!0),C(N,{icon:"i-heroicons-arrow-path",color:"violet",variant:"outline",size:"xs",class:"ml-2",onClick:f[2]||(f[2]=()=>{e.inputParamsMap[e.index][e.inputParam.name].value=Math.floor(Math.random()*1e7)})})])):(p(),_(j,{key:1,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":f[3]||(f[3]=E=>e.inputParamsMap[e.index][e.inputParam.name].value=E),type:"number",label:e.inputParam.display_name,required:!e.inputParam.optional,max:e.inputParam.max||100,min:e.inputParam.min||0,variant:"outline"},null,8,["modelValue","label","required","max","min"]))],64)):P("",!0),e.inputParam.type==="image"?(p(),R("div",uo,[C(j,{ref_key:"imageInput",ref:o,type:"file",accept:"image/*",class:"w-full",variant:"outline",color:"gray",label:e.inputParam.display_name,onChange:f[4]||(f[4]=E=>{console.debug("files",E);const G=E==null?void 0:E[0];e.inputParamsMap[e.index][e.inputParam.name].value=G,i.value=v(G),e.inputParamsMap[e.index][e.inputParam.name].image_preview_url=s(i),console.debug("inputParamsMap",e.inputParamsMap)})},null,8,["label"]),s(i)!==""?(p(),_(B,{key:0,src:s(l)?s(l):s(i),class:"h-10 rounded-lg cursor-pointer ml-2",onClick:f[5]||(f[5]=()=>{n.value=!0})},null,8,["src"])):P("",!0),s(i)!==""?(p(),_(N,{key:1,icon:"i-heroicons-x-mark",variant:"outline",class:"ml-2",onClick:$})):P("",!0)])):P("",!0),e.inputParam.type==="image-mask"?(p(),R("div",co,[s(u)?(p(),_(N,{key:0,icon:"i-heroicons-paint-brush-16-solid",class:"mr-2",color:"violet",variant:"outline",size:"xs",disabled:!((me=s(u))!=null&&me.value),onClick:f[6]||(f[6]=()=>{n.value=!0})},{default:F(()=>[I("span",mo,Q(s(l)!==""?"Edit mask":"Draw mask"),1)]),_:1},8,["disabled"])):P("",!0),I("div",fo,[s(u)&&((Se=s(u))!=null&&Se.value)?(p(),_(B,{key:0,src:(be=s(u))==null?void 0:be.image_preview_url,class:A(["h-10 rounded-lg cursor-pointer",{absolute:s(l)!==""}]),onClick:f[7]||(f[7]=()=>{n.value=!0})},null,8,["src","class"])):P("",!0),s(l)?(p(),_(B,{key:1,src:s(l),class:"h-10 rounded-lg cursor-pointer opacity-50",onClick:f[8]||(f[8]=()=>{n.value=!0})},null,8,["src"])):P("",!0)]),!s(u)||s(u)&&!((we=s(u))!=null&&we.value)?(p(),R("span",po," Select source image ")):P("",!0),s(l)?(p(),_(N,{key:2,icon:"i-heroicons-x-mark",variant:"outline",color:"violet",class:"ml-2",onClick:y})):P("",!0)])):P("",!0),e.inputParam.type==="image"||e.inputParam.type==="image-mask"?(p(),_(V,{key:4,modelValue:s(n),"onUpdate:modelValue":f[13]||(f[13]=E=>se(n)?n.value=E:null),class:"z-[90] overflow-y-auto",transition:!1,fullscreen:""},{default:F(()=>{var E;return[C(N,{class:"absolute top-4 right-4 z-[100]",icon:"i-heroicons-x-mark",variant:"ghost",onClick:f[9]||(f[9]=()=>n.value=!1)}),e.inputParam.type==="image"?(p(),R("div",{key:0,class:"flex items-center justify-center w-full h-full p-4",onClick:f[10]||(f[10]=Ye(()=>n.value=!1,["left"]))},[C(B,{class:"lg:h-full",fit:"inside",src:s(i)},null,8,["src"])])):(p(),_(O,{key:1,ref:"imageInpaint","image-inpaint-mask":s(l),"onUpdate:imageInpaintMask":f[11]||(f[11]=G=>se(l)?l.value=G:null),"image-inpaint-mask-data":s(r),"onUpdate:imageInpaintMaskData":f[12]||(f[12]=G=>se(r)?r.value=G:null),class:"flex items-center justify-center w-full h-full p-4","image-src":(E=s(u))==null?void 0:E.image_preview_url},null,8,["image-inpaint-mask","image-inpaint-mask-data","image-src"]))]}),_:1},8,["modelValue"])):P("",!0),e.inputParam.type==="list"?(p(),_(ee,{key:5,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":f[14]||(f[14]=E=>e.inputParamsMap[e.index][e.inputParam.name].value=E),placeholder:e.inputParam.display_name,options:Object.keys(e.inputParam.options)},null,8,["modelValue","placeholder","options"])):P("",!0),e.inputParam.type==="bool"?(p(),_(D,{key:6,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":f[15]||(f[15]=E=>e.inputParamsMap[e.index][e.inputParam.name].value=E),label:(q=e.inputParam)==null?void 0:q.display_name},null,8,["modelValue","label"])):P("",!0),["range","range_scale"].includes(e.inputParam.type)?(p(),_(K,{key:7,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":f[16]||(f[16]=E=>e.inputParamsMap[e.index][e.inputParam.name].value=E),label:e.inputParam.display_name,size:"sm",min:e.inputParam.min,max:e.inputParam.max,step:e.inputParam.step},null,8,["modelValue","label","min","max","step"])):P("",!0)]}),_:1},8,["label","help"])):P("",!0)}}}),go={key:0,class:"heading"},ho={key:1},yo=H({__name:"InputParams",props:{inputParamsMap:{type:Array,required:!0},additionalInputParamsMap:{type:Array,required:!1,default:[]},advanced:{type:Boolean,default:!1}},setup(e){const t=e,n=Ie(),o=x(!t.advanced);return(i,a)=>{const l=xe,r=vo;return p(),R(X,null,[e.advanced?(p(),R("div",go,[I("h4",{class:"text-md font-bold cursor-pointer select-none flex items-center mb-3",onClick:a[0]||(a[0]=()=>{o.value=!s(o)})},[C(l,{name:s(o)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"mr-2"},null,8,["name"]),a[1]||(a[1]=L(" Advanced options "))])])):P("",!0),s(o)?(p(),R("div",ho,[(p(!0),R(X,null,pe(s(n).currentFlow.input_params,(u,g)=>(p(),_(r,{key:g,"input-params-map":e.inputParamsMap,index:g,"input-param":u,advanced:e.advanced},null,8,["input-params-map","index","input-param","advanced"]))),128)),(p(!0),R(X,null,pe(e.additionalInputParamsMap,(u,g)=>(p(),_(r,{key:Object.keys(u)[0],"input-params-map":e.additionalInputParamsMap,index:g,"input-param":u[Object.keys(u)[0]],advanced:e.advanced},null,8,["input-params-map","index","input-param","advanced"]))),128))])):P("",!0)],64)}}}),bo={key:0,id:"prompt",class:"w-full my-10 lg:my-0 p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg"},wo={class:"action flex items-center"},ko=H({__name:"Prompt",setup(e,{expose:t}){var k,m,c,h;const n=Ie();let o=localStorage.getItem(`input_params_map_${(k=n.currentFlow)==null?void 0:k.name}`);if(o){const d=JSON.parse(o);"flow_version"in d&&d.flow_version.split(".")[0]===((m=n.currentFlow)==null?void 0:m.version.split(".")[0])?o=d:(o=null,localStorage.removeItem(`input_params_map_${(c=n.currentFlow)==null?void 0:c.name}`))}const i=x(((h=n.currentFlow)==null?void 0:h.input_params.map(d=>{var f;if(d.type==="text")return{[d.name]:{value:o!==null?o[d.name]:d.default||"",type:d.type,optional:d.optional,advanced:d.advanced||!1,default:d.default||"",translatable:d.translatable||!1}};if(d.type==="number")return{[d.name]:{value:o!==null?o[d.name]:d.default||0,type:d.type,optional:d.optional,advanced:d.advanced||!1,default:d.default||0}};if(d.type==="image")return{[d.name]:{value:null,type:d.type,optional:d.optional,advanced:d.advanced||!1}};if(d.type==="image-mask")return{[d.name]:{value:null,type:d.type,optional:d.optional,advanced:d.advanced||!1,source_input_name:d.source_input_name||null}};if(d.type==="list")return{[d.name]:{value:o!==null?o[d.name]:d.default||Object.keys(d.options)[0]||"",type:d.type,optional:d.optional,options:d.options,advanced:d.advanced||!1,default:Object.keys(d.options)[0]||""}};if(d.type==="bool")return{[d.name]:{value:o!==null?o[d.name]:d.default||!1,type:d.type,optional:d.optional,advanced:d.advanced||!1,default:d.default||!1}};if(["range","range_scale"].includes(d.type)){const z={value:o!==null?o[d.name]:d.default||0,type:d.type,optional:d.optional,advanced:d.advanced||!1,min:d.min||0,max:d.max||100,step:d.step||1,default:d.default||0};if(d.type==="range_scale"&&(z.source_input_name=d.source_input_name||null,z.source_input_name===null||z.source_input_name==="")){const j=(f=n.currentFlow)==null?void 0:f.input_params.find(N=>N.type==="image"&&!N.optional);j&&(z.source_input_name=j.name)}return{[d.name]:z}}}))||[]),a=x([]);n.currentFlow.is_seed_supported&&a.value.push({seed:{name:"seed",display_name:"Random seed",value:Math.floor(Math.random()*1e7),type:"number",optional:!0,advanced:!0,min:0,max:1e7}});const l=ua(),r=x(n.currentFlow.is_translations_supported&&l.settingsMap.translations_provider.value.trim()!==""),u=x(r.value);Tt(()=>{const d=localStorage.getItem("translatePrompt");d&&(u.value=JSON.parse(d))}),re(u,d=>{localStorage.setItem("translatePrompt",JSON.stringify(d))});function g(d){console.debug("Copy prompt inputs",d),Object.keys(d).forEach(z=>{const j=i.value.findIndex(N=>Object.keys(N)[0]===z);j!==-1&&(i.value[j][z].value=d[z].value)});const f=document.getElementById("prompt");f&&f.scrollIntoView({behavior:"smooth"})}t({copyPromptInputs:g}),i.value.forEach(d=>{const f=Object.keys(d)[0];["image","image-mask"].includes(d[f].type)||re(()=>d[f].value,()=>{var j,N;const z={};i.value.forEach(B=>{const O=Object.keys(B)[0];z[O]=B[O].value}),localStorage.setItem(`input_params_map_${(j=n.currentFlow)==null?void 0:j.name}`,JSON.stringify({...z,flow_version:(N=n.currentFlow)==null?void 0:N.version}))})});const b=M(()=>i.value.filter(d=>{const f=Object.keys(d)[0];return!["image","image-mask"].includes(d[f].type)}).some(d=>{const f=Object.keys(d)[0];return d[f].value!==d[f].default}));function w(){i.value.forEach(d=>{const f=Object.keys(d)[0];d[f].type==="text"?d[f].value=d[f].default||"":d[f].type==="number"?d[f].value=d[f].default||d[f].min||0:d[f].type==="list"?d[f].value=Object.keys(d[f].options)[0]||"":d[f].type==="bool"?d[f].value=d[f].default||!1:["range","range_scale"].includes(d[f].type)&&(d[f].value=d[f].default||d[f].min||0)})}const v=x(!1),$=x(1),y=x(!1),S=M(()=>i.value.every(d=>{var j;const f=Object.keys(d)[0];if(d[f].optional)return!0;const z=d[f].value;if(d[f].type==="text")return z!=="";if(d[f].type==="number")return z>=d[f].min&&z<=d[f].max;if(d[f].type==="list")return z!==""&&Object.keys(d[f].options).includes(z);if(d[f].type==="bool")return!0;if(d[f].type==="range")return z>=d[f].min&&z<=d[f].max;if(d[f].type==="range_scale")return z>=d[f].min&&z<=d[f].max;if(d[f].type==="image")return z instanceof File&&z.size>0;if(d[f].type==="image-mask")return z instanceof File&&z.size>0&&(((j=d[f])==null?void 0:j.mask_applied)||!1)}));return(d,f)=>{const z=xe,j=yo,N=Bt,B=Ut,O=jt,V=ce,ee=ct;return s(n).currentFlow?(p(),R("div",bo,[I("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center mb-3",onClick:f[0]||(f[0]=()=>{y.value=!s(y)})},[C(z,{name:s(y)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),f[8]||(f[8]=L(" Prompt "))]),Ft(I("div",null,[C(j,{"input-params-map":s(i),"onUpdate:inputParamsMap":f[1]||(f[1]=D=>se(i)?i.value=D:null),"additional-input-params-map":s(a),"onUpdate:additionalInputParamsMap":f[2]||(f[2]=D=>se(a)?a.value=D:null),advanced:!1},null,8,["input-params-map","additional-input-params-map"]),s(a).length>0?(p(),_(j,{key:0,"input-params-map":s(i),"onUpdate:inputParamsMap":f[3]||(f[3]=D=>se(i)?i.value=D:null),"additional-input-params-map":s(a),"onUpdate:additionalInputParamsMap":f[4]||(f[4]=D=>se(a)?a.value=D:null),advanced:!0},null,8,["input-params-map","additional-input-params-map"])):P("",!0),s(n).currentFlow.is_count_supported?(p(),_(B,{key:1,label:"Number of results"},{default:F(()=>[C(N,{modelValue:s($),"onUpdate:modelValue":f[5]||(f[5]=D=>se($)?$.value=D:null),type:"number",min:"1",max:"50",label:"Batch size",class:"mb-3 max-w-fit flex justify-end"},null,8,["modelValue"])]),_:1})):P("",!0),s(r)?(p(),_(B,{key:2,class:"my-3 flex justify-end"},{default:F(()=>[C(O,{modelValue:s(u),"onUpdate:modelValue":f[6]||(f[6]=D=>se(u)?u.value=D:null),label:"Translate prompt"},null,8,["modelValue"])]),_:1})):P("",!0),I("div",{class:A(["flex",{"justify-between":s(b),"justify-end":!s(b)}])},[s(b)?(p(),_(ee,{key:0,text:"Reset input params values to defaults"},{default:F(()=>[C(V,{icon:"i-heroicons-arrow-path-rounded-square",variant:"ghost",color:"amber",onClick:w},{default:F(()=>f[9]||(f[9]=[L(" Reset params ")])),_:1})]),_:1})):P("",!0),I("div",wo,[C(V,{icon:"i-heroicons-sparkles-16-solid",variant:"outline",loading:s(v),disabled:!s(S),onClick:f[7]||(f[7]=()=>{v.value=!0,s(n).runFlow(s(n).currentFlow,[...s(i),...s(a)],s($),s(r)&&s(u)).finally(()=>{v.value=!1;const D=s(a).find(K=>Object.keys(K)[0]==="seed");D.seed.value=Number(D.seed.value)+s($)+1})})},{default:F(()=>f[10]||(f[10]=[L(" Run prompt ")])),_:1},8,["loading","disabled"])])],2)],512),[[dn,!s(y)]])])):P("",!0)}}}),$o=e=>{const t=x(0);function n(a){e.value.style.scrollSnapType="none",e.value.style.scrollBehavior="auto",t.value=a.pageX,window.addEventListener("mousemove",i),window.addEventListener("mouseup",o)}function o(){e.value.style.removeProperty("scroll-behavior"),e.value.style.removeProperty("scroll-snap-type"),e.value.style.removeProperty("pointer-events"),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",o)}function i(a){a.preventDefault(),e.value.style.pointerEvents="none";const l=a.pageX-t.value;t.value=a.pageX,e.value.scrollBy(-l,0)}ae(()=>{e.value&&e.value.addEventListener("mousedown",n)}),_e(()=>{e.value&&e.value.removeEventListener("mousedown",n)})},kt=Qe(de.ui.strategy,de.ui.carousel,Ra),xo=H({components:{UButton:ce},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},arrows:{type:Boolean,default:!1},indicators:{type:Boolean,default:!1},dir:{type:String,default:"ltr"},prevButton:{type:Object,default:()=>kt.default.prevButton},nextButton:{type:Object,default:()=>kt.default.nextButton},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:void 0}},setup(e,{expose:t}){const{ui:n,attrs:o}=Ge("carousel",Me(e,"ui"),kt,Me(e,"class")),i=x(),a=x(0),{x:l}=da(i,{behavior:"smooth"}),{width:r}=ca(i);$o(i),ma(i,k=>{var c,h;const[m]=k;a.value=((h=(c=m==null?void 0:m.target)==null?void 0:c.firstElementChild)==null?void 0:h.clientWidth)||0});const u=M(()=>e.dir==="rtl"),g=M(()=>a.value?u.value?Math.round(-l.value/a.value)+1:Math.round(l.value/a.value)+1:0),b=M(()=>{if(!a.value)return 0;const k=Math.round(r.value/a.value);return e.items.length<=k?0:e.items.length-k+1}),w=M(()=>g.value<=1),v=M(()=>g.value===b.value);function $(){l.value+=u.value?-a.value:a.value}function y(){l.value-=u.value?-a.value:a.value}function S(k){l.value=(k-1)*a.value*(u.value?-1:1)}return t({pages:b,page:g,prev:y,next:$,select:S}),{ui:n,attrs:o,isFirst:w,isLast:v,carouselRef:i,pages:b,currentPage:g,onClickNext:$,onClickPrev:y,onClick:S,twMerge:Ee}}}),So=["dir"],Co=["role"],Io=["aria-selected","aria-label","onClick"];function Mo(e,t,n,o,i,a){const l=ce;return p(),R("div",ie({class:e.ui.wrapper},e.attrs,{dir:e.dir}),[I("div",{ref:"carouselRef",class:A([e.ui.container,"no-scrollbar"])},[(p(!0),R(X,null,pe(e.items,(r,u)=>(p(),R("div",{key:u,class:A(e.ui.item),role:e.indicators?"tabpanel":null},[he(e.$slots,"default",{item:r,index:u},void 0,!0)],10,Co))),128))],2),e.arrows?(p(),R("div",{key:0,class:A(e.ui.arrows.wrapper)},[he(e.$slots,"prev",{onClick:e.onClickPrev,disabled:e.isFirst},()=>{var r;return[e.prevButton?(p(),_(l,ie({key:0,disabled:e.isFirst},{...e.ui.default.prevButton,...e.prevButton},{class:e.twMerge(e.ui.default.prevButton.class,(r=e.prevButton)==null?void 0:r.class),"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["disabled","class","onClick"])):P("",!0)]},!0),he(e.$slots,"next",{onClick:e.onClickNext,disabled:e.isLast},()=>{var r;return[e.nextButton?(p(),_(l,ie({key:0,disabled:e.isLast},{...e.ui.default.nextButton,...e.nextButton},{class:e.twMerge(e.ui.default.nextButton.class,(r=e.nextButton)==null?void 0:r.class),"aria-label":"Next",onClick:e.onClickNext}),null,16,["disabled","class","onClick"])):P("",!0)]},!0)],2)):P("",!0),e.indicators?(p(),R("div",{key:1,role:"tablist",class:A(e.ui.indicators.wrapper)},[(p(!0),R(X,null,pe(e.pages,r=>he(e.$slots,"indicator",{key:r,onClick:e.onClick,active:r===e.currentPage,page:r},()=>[I("button",{type:"button",role:"tab","aria-selected":r===e.currentPage,class:A([e.ui.indicators.base,r===e.currentPage?e.ui.indicators.active:e.ui.indicators.inactive]),"aria-label":`set slide ${r}`,onClick:u=>e.onClick(r)},null,10,Io)],!0)),128))],2)):P("",!0)],16,So)}const Lt=Ke(xo,[["render",Mo],["__scopeId","data-v-5261f006"]]),Po={class:"flex flex-col basis-full"},_o=H({__name:"InputFiles",props:{running:{type:Object,required:!0}},setup(e){const t=Dt(),n=function(r,u){return`${ht()}/tasks/inputs?task_id=${r}&input_index=${u}`},o=x(!1),i=x(""),a=x(0),l=x(!0);return(r,u)=>{var y,S,k,m,c;const g=xe,b=Je,w=Lt,v=ce,$=nt;return r.$props.running&&r.$props.running.input_files&&((y=Object.keys(r.$props.running.input_files))==null?void 0:y.length)>0?(p(),R("div",{key:0,class:A(["ml-2 mt-2 mb-5",{"mb-10":((S=Object.keys(r.$props.running.input_files))==null?void 0:S.length)>1&&!s(l)}])},[I("h4",{class:"mb-3 font-bold cursor-pointer select-none flex items-center text-sm",onClick:u[0]||(u[0]=()=>l.value=!s(l))},[C(g,{name:s(l)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),I("span",null," Input files ("+Q((k=Object.keys(r.$props.running.input_files))==null?void 0:k.length)+") ",1)]),s(l)?P("",!0):(p(),R(X,{key:0},[((m=Object.keys(r.$props.running.input_files))==null?void 0:m.length)===1?(p(),_(b,{key:0,class:"mb-5 rounded-lg cursor-pointer",fit:"outside",loading:"lazy",placeholder:s(t)(`${("buildBackendApiUrl"in r?r.buildBackendApiUrl:s(ht))()}/vix_logo.png`,{f:"png",blur:3,q:50}),src:n(r.$props.running.task_id,0),onClick:u[1]||(u[1]=()=>{i.value=n(r.$props.running.task_id,0),a.value=0,o.value=!0})},null,8,["placeholder","src"])):P("",!0),((c=Object.keys(r.$props.running.input_files))==null?void 0:c.length)>1?(p(),_(w,{key:1,items:Object.keys(r.$props.running.input_files).map(h=>({task_id:e.running.task_id,index:h})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4"}},page:1,indicators:""},{default:F(({item:h})=>[I("div",Po,[C(b,{class:"rounded-lg cursor-pointer",fit:"outside",loading:"lazy",placeholder:s(t)(`${("buildBackendApiUrl"in r?r.buildBackendApiUrl:s(ht))()}/vix_logo.png`,{f:"png",blur:3,q:50}),src:n(h.task_id,h.index),onClick:()=>{i.value=n(r.$props.running.task_id,h.index),a.value=h.index,o.value=!0}},null,8,["placeholder","src","onClick"])])]),_:1},8,["items"])):P("",!0),C($,{modelValue:s(o),"onUpdate:modelValue":u[4]||(u[4]=h=>se(o)?o.value=h:null),class:"z-[90]",transition:!1,fullscreen:""},{default:F(()=>[C(v,{class:"absolute top-4 right-4",icon:"i-heroicons-x-mark",variant:"ghost",onClick:u[2]||(u[2]=()=>o.value=!1)}),I("div",{class:"flex items-center justify-center w-full h-full p-4",onClick:u[3]||(u[3]=Ye(()=>o.value=!1,["left"]))},[s(i)?(p(),_(b,{key:0,class:"lg:h-full",fit:"inside",loading:"lazy",placeholder:"/vix_logo.png",src:s(i)},null,8,["src"])):P("",!0)])]),_:1},8,["modelValue"])],64))],2)):P("",!0)}}}),Oe=Qe(de.ui.strategy,de.ui.alert,_a),Ro=H({components:{UIcon:xe,UAvatar:rt,UButton:ce},inheritAttrs:!1,props:{title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:()=>Oe.default.icon},avatar:{type:Object,default:null},closeButton:{type:Object,default:()=>Oe.default.closeButton},actions:{type:Array,default:()=>[]},color:{type:String,default:()=>Oe.default.color,validator(e){return[...de.ui.colors,...Object.keys(Oe.color)].includes(e)}},variant:{type:String,default:()=>Oe.default.variant,validator(e){return[...Object.keys(Oe.variant),...Object.values(Oe.color).flatMap(t=>Object.keys(t))].includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["close"],setup(e){const{ui:t,attrs:n}=Ge("alert",Me(e,"ui"),Oe),o=M(()=>{var l,r;const a=((r=(l=t.value.color)==null?void 0:l[e.color])==null?void 0:r[e.variant])||t.value.variant[e.variant];return Ee($e(t.value.wrapper,t.value.rounded,t.value.shadow,t.value.padding,a==null?void 0:a.replaceAll("{color}",e.color)),e.class)});function i(a){a.click&&a.click()}return{ui:t,attrs:n,alertClass:o,onAction:i,twMerge:Ee}}});function Fo(e,t,n,o,i,a){const l=xe,r=rt,u=ce;return p(),R("div",ie({class:e.alertClass},e.attrs),[I("div",{class:A(["flex",[e.ui.gap,{"items-start":e.description||e.$slots.description,"items-center":!e.description&&!e.$slots.description}]])},[he(e.$slots,"icon",{icon:e.icon},()=>[e.icon?(p(),_(l,{key:0,name:e.icon,class:A(e.ui.icon.base)},null,8,["name","class"])):P("",!0)]),he(e.$slots,"avatar",{avatar:e.avatar},()=>[e.avatar?(p(),_(r,ie({key:0},{size:e.ui.avatar.size,...e.avatar},{class:e.ui.avatar.base}),null,16,["class"])):P("",!0)]),I("div",{class:A(e.ui.inner)},[e.title||e.$slots.title?(p(),R("p",{key:0,class:A(e.ui.title)},[he(e.$slots,"title",{title:e.title},()=>[L(Q(e.title),1)])],2)):P("",!0),e.description||e.$slots.description?(p(),R("div",{key:1,class:A(e.twMerge(e.ui.description,!e.title&&!e.$slots.title&&"mt-0 leading-5"))},[he(e.$slots,"description",{description:e.description},()=>[L(Q(e.description),1)])],2)):P("",!0),(e.description||e.$slots.description)&&(e.actions.length||e.$slots.actions)?(p(),R("div",{key:2,class:A(e.ui.actions)},[he(e.$slots,"actions",{},()=>[(p(!0),R(X,null,pe(e.actions,(g,b)=>(p(),_(u,ie({key:b,ref_for:!0},{...e.ui.default.actionButton||{},...g},{onClick:Ye(w=>e.onAction(g),["stop"])}),null,16,["onClick"]))),128))])],2)):P("",!0)],2),e.closeButton||!e.description&&!e.$slots.description&&e.actions.length?(p(),R("div",{key:0,class:A(e.twMerge(e.ui.actions,"mt-0"))},[!e.description&&!e.$slots.description&&(e.actions.length||e.$slots.actions)?he(e.$slots,"actions",{key:0},()=>[(p(!0),R(X,null,pe(e.actions,(g,b)=>(p(),_(u,ie({key:b,ref_for:!0},{...e.ui.default.actionButton||{},...g},{onClick:Ye(w=>e.onAction(g),["stop"])}),null,16,["onClick"]))),128))]):P("",!0),e.closeButton?(p(),_(u,ie({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{onClick:t[0]||(t[0]=Ye(g=>e.$emit("close"),["stop"]))}),null,16)):P("",!0)],2)):P("",!0)],2)],16)}const Rn=Ke(Ro,[["render",Fo]]),To=H({__name:"ErrorAlert",props:{running:{type:Object,required:!0}},setup(e){const t=Ie(),n=x(!1);return(o,i)=>{const a=Rn;return p(),_(a,{class:"mb-5",icon:"i-heroicons-exclamation-circle-16-solid",color:"red",variant:"soft",title:"Task failed",description:e.running.error,actions:[{variant:"outline",color:"yellow",label:"Restart",loading:s(n),icon:"i-heroicons-arrow-path",click:()=>{n.value=!0,s(t).restartFlow(o.$props.running).finally(()=>{n.value=!1})}}]},null,8,["description","actions"])}}}),zo={class:"mb-5"},Oo={class:"text-sm mb-5 text-slate-500"},Bo={class:"flex justify-between"},Uo=H({__name:"Item",props:{running:{type:Object,required:!0}},setup(e){const t=Ie(),n=x(!1),o=x(!1);function i(a){return[[{label:"Comfy flow",labelClass:"text-blue-500",icon:"i-heroicons-arrow-down-tray",iconClass:"bg-blue-500",click:()=>{var l;return t.downloadFlowComfy((l=t.currentFlow)==null?void 0:l.name,a.task_id)}}],[{label:`Raise priority ${a.priority>0?`(${a.priority})`:""}`,labelClass:"text-gray-500",icon:"i-heroicons-arrow-up",iconClass:"bg-gray-500",disabled:a.priority===15||a.progress>0,click:()=>{o.value=!0,t.raiseQueuePriority(a).finally(()=>{o.value=!1})}},{label:`Lower priority ${a.priority>0?`(${a.priority})`:""}`,labelClass:"text-gray-500",icon:"i-heroicons-arrow-down",iconClass:"bg-gray-500",disabled:a.priority===0||a.progress>0,click:()=>{o.value=!0,t.lowerQueuePriority(a).finally(()=>{o.value=!1})}},{label:`Reset priority ${a.priority>0?`(${a.priority})`:""}`,labelClass:"text-gray-500",icon:"i-heroicons-arrow-path-rounded-square-solid",iconClass:"bg-gray-500",disabled:a.priority===0||a.progress>0,click:()=>{o.value=!0,t.resetQueuePriority(a).finally(()=>{o.value=!1})}}]]}return(a,l)=>{var v,$;const r=pn,u=_o,g=To,b=ce,w=vt;return p(),R("div",zo,[C(r,{class:"mb-3",value:(v=e.running)==null?void 0:v.progress,indicator:"",color:e.running.error?"red":"green"},null,8,["value","color"]),I("p",Oo,Q([`${($=e.running)!=null&&$.priority&&e.running.priority>0?"["+e.running.priority+"] ":""}#${e.running.task_id}`,...Object.keys(e.running.input_params_mapped).filter(y=>e.running.input_params_mapped[y].value&&e.running.input_params_mapped[y].value!=="").map(y=>`${e.running.input_params_mapped[y].display_name}: ${e.running.input_params_mapped[y].value}`)].join(" | ")+`${e.running.execution_time?" | execution_time: "+e.running.execution_time.toFixed(2)+"s":""}`),1),C(u,{running:e.running},null,8,["running"]),e.running.error?(p(),_(g,{key:0,running:e.running},null,8,["running"])):P("",!0),I("div",Bo,[C(b,{icon:e.running.progress>=0&&e.running.progress<100?"i-heroicons-stop":"i-heroicons-minus-circle",color:e.running.error?"red":"orange",variant:"outline",loading:s(n),onClick:l[0]||(l[0]=()=>{n.value=!0,s(t).cancelRunningFlow(e.running).finally(()=>{n.value=!1})})},{default:F(()=>[L(Q(e.running.progress>=0&&e.running.progress<100?"Cancel":"Remove"),1)]),_:1},8,["icon","color","loading"]),C(w,{items:i(e.running),mode:"click",popper:{placement:"bottom-end"}},{default:F(()=>[C(b,{color:"blue",variant:"outline",icon:"i-heroicons-ellipsis-vertical-16-solid"})]),_:1},8,["items"])])])}}}),jo={class:"w-full p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg shadow-md mt-5 mb-10"},Eo={class:"flex items-center justify-between mb-2"},Ao={key:0},Do={key:1,class:"text-red-400"},Lo=H({__name:"Queue",setup(e){const t=Ie(),n=x(!0),o=x(!1);return(i,a)=>{var g,b,w,v,$,y,S,k,m;const l=xe,r=ce,u=Uo;return p(),R("div",jo,[I("div",Eo,[I("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center",onClick:a[0]||(a[0]=()=>{n.value=!s(n)})},[C(l,{name:s(n)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),I("span",null," Queue ("+Q(s(t).flowsRunningByName((g=s(t).currentFlow)==null?void 0:g.name).length)+") ",1),s(t).flowsRunningByName((b=s(t).currentFlow)==null?void 0:b.name).length>0?(p(),R("span",Ao," - "+Q(`${((v=s(t).flowsRunningByName((w=s(t).currentFlow)==null?void 0:w.name).filter(c=>c.progress>0)[0])==null?void 0:v.progress.toFixed(0))??0}%`),1)):P("",!0),s(t).flowsRunningByNameWithErrors(($=s(t))==null?void 0:$.currentFlow.name).length>0?(p(),R("span",Do," ("+Q(s(t).flowsRunningByNameWithErrors((y=s(t).currentFlow)==null?void 0:y.name).length)+") ",1)):P("",!0)]),(S=s(t).currentFlow)!=null&&S.name&&s(t).flowsRunningByName((k=s(t).currentFlow)==null?void 0:k.name).length>0?(p(),_(r,{key:0,icon:"i-heroicons-stop",color:"orange",variant:"outline",loading:s(o),onClick:a[1]||(a[1]=()=>{var c;o.value=!0,s(t).cancelRunningFlows((c=s(t).currentFlow)==null?void 0:c.name).finally(()=>{o.value=!1})})},{default:F(()=>a[2]||(a[2]=[L(" Cancel all ")])),_:1},8,["loading"])):P("",!0)]),s(n)?P("",!0):(p(!0),R(X,{key:0},pe(s(t).flowsRunningByName((m=s(t).currentFlow)==null?void 0:m.name),c=>(p(),_(u,{key:c.task_id,running:c},null,8,["running"]))),128))])}}}),No=H({__name:"ScrollToTop",props:{show:{type:Boolean,required:!0},target:{type:String,required:!0}},setup(e){const t=e;function n(){const o=document.getElementById(t.target);o&&o.scrollIntoView({behavior:"smooth"})}return(o,i)=>{const a=ce;return e.show?(p(),_(a,{key:0,icon:"i-heroicons-arrow-small-up",color:"black",variant:"outline",onClick:n})):P("",!0)}}}),Le=Qe(de.ui.strategy,de.ui.toggle,Fa),Vo=H({components:{HSwitch:sl,UIcon:xe},inheritAttrs:!1,props:{id:{type:String,default:null},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},onIcon:{type:String,default:()=>Le.default.onIcon},offIcon:{type:String,default:()=>Le.default.offIcon},loadingIcon:{type:String,default:()=>Le.default.loadingIcon},color:{type:String,default:()=>Le.default.color,validator(e){return de.ui.colors.includes(e)}},size:{type:String,default:()=>Le.default.size,validator(e){return Object.keys(Le.size).includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:t}){const{ui:n,attrs:o}=Ge("toggle",Me(e,"ui"),Le),{emitFormChange:i,color:a,inputId:l,name:r}=Ot(e),u=M({get(){return e.modelValue},set(y){t("update:modelValue",y),t("change",y),i()}}),g=M(()=>Ee($e(n.value.base,n.value.size[e.size],n.value.rounded,a.value&&n.value.ring.replaceAll("{color}",a.value),a.value&&(u.value?n.value.active:n.value.inactive).replaceAll("{color}",a.value)),e.class)),b=M(()=>$e(n.value.container.base,n.value.container.size[e.size],u.value?n.value.container.active[e.size]:n.value.container.inactive)),w=M(()=>$e(n.value.icon.size[e.size],a.value&&n.value.icon.on.replaceAll("{color}",a.value))),v=M(()=>$e(n.value.icon.size[e.size],a.value&&n.value.icon.off.replaceAll("{color}",a.value))),$=M(()=>$e(n.value.icon.size[e.size],a.value&&n.value.icon.loading.replaceAll("{color}",a.value)));return _t(()=>Rt()),{ui:n,attrs:o,name:r,inputId:l,active:u,switchClass:g,containerClass:b,onIconClass:w,offIconClass:v,loadingIconClass:$}}});function qo(e,t,n,o,i,a){const l=xe,r=ye("HSwitch");return p(),_(r,ie({id:e.inputId,modelValue:e.active,"onUpdate:modelValue":t[0]||(t[0]=u=>e.active=u),name:e.name,disabled:e.disabled||e.loading,class:e.switchClass},e.attrs),{default:F(()=>[I("span",{class:A(e.containerClass)},[e.loading?(p(),R("span",{key:0,class:A([e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[C(l,{name:e.loadingIcon,class:A(e.loadingIconClass)},null,8,["name","class"])],2)):P("",!0),!e.loading&&e.onIcon?(p(),R("span",{key:1,class:A([e.active?e.ui.icon.active:e.ui.icon.inactive,e.ui.icon.base]),"aria-hidden":"true"},[C(l,{name:e.onIcon,class:A(e.onIconClass)},null,8,["name","class"])],2)):P("",!0),!e.loading&&e.offIcon?(p(),R("span",{key:2,class:A([e.active?e.ui.icon.inactive:e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[C(l,{name:e.offIcon,class:A(e.offIconClass)},null,8,["name","class"])],2)):P("",!0)],2)]),_:1},16,["id","modelValue","name","disabled","class"])}const Ho=Ke(Vo,[["render",qo]]);function Fn(e={}){const{copy:t,isSupported:n}=fa(),o=dt();function i(a,l={},r={}){n&&t(a).then(()=>{!l.title&&!l.description||o.add({...l,...e})},function(u){o.add({...r,description:r.description||u.message,...e})})}return{copy:i}}const Wo={class:"flex flex-col items-center mb-2 max-w-fit mx-auto z-0"},Qo={class:"text-slate-500 text-center text-sm w-full mx-auto flex flex-wrap items-center justify-center md:justify-between"},Ko={class:"toggles py-2"},Go={class:"mr-2 inline-flex items-center text-sm"},Jo=["for"],Yo={class:"mr-2 inline-flex items-center text-sm"},Xo=["for"],Zo={key:0,class:"flex items-center"},es=["title"],ts=H({__name:"Child",props:{flowResult:{type:Object,required:!0},outputsIndex:{type:Number,required:!1,default:()=>0},openImageModal:{type:Function,required:!0}},setup(e){const t=e,n=Ie(),o=(c,h=null,d=!1)=>{if(c.child_tasks.length===0)return c;const f=c.child_tasks.findIndex(z=>z.parent_task_node_id===h);return f!==-1?(d||(a.value=c),o(c.child_tasks[f],c.child_tasks[f].outputs[0].comfy_node_id,d)):c};function i(c,h,d=null){if(d!==null&&c.parent_task_node_id===d||Number(c.task_id)===h)return c;for(let f=0;f<c.child_tasks.length;f++)for(let z=0;z<c.child_tasks[f].outputs.length;z++){const j=i(c.child_tasks[f],h,c.child_tasks[f].outputs[z].comfy_node_id);if(j!==null)return j}return null}const a=x(t.flowResult),l=x(o(t.flowResult,t.flowResult.outputs[t.outputsIndex].comfy_node_id,!1));function r(c){var h;return[[{label:`${(h=n.flowByName((c==null?void 0:c.flow_name)??(c==null?void 0:c.name)))==null?void 0:h.display_name}#${c.task_id}`,disabled:!0}],[{label:"View image",icon:"i-heroicons-eye",click:()=>{t.openImageModal(ve({task_id:c.task_id,node_id:c.outputs.length>1?c.outputs[t.outputsIndex].comfy_node_id:c.outputs[0].comfy_node_id}))}}]]}function u(c){var d;const h=[[{label:`${(d=n.flowByName((c==null?void 0:c.flow_name)??(c==null?void 0:c.name)))==null?void 0:d.display_name}#${c.task_id}`,disabled:!0}],[{label:"View image",icon:"i-heroicons-eye",disabled:c.progress<100||c.error!=="",click:()=>{t.openImageModal(ve({task_id:c.task_id,node_id:c.outputs.length>1?c.outputs[t.outputsIndex].comfy_node_id:c.outputs[0].comfy_node_id}))}},{label:c.progress<100?"Cancel":"Delete",labelClass:c.progress<100?"text-orange-500":"text-red-500",icon:c.progress<100?"i-heroicons-stop":"i-heroicons-trash",iconClass:c.progress<100?"bg-orange-500":"bg-red-500",click:()=>{n.deleteFlowHistory(c.task_id).then(()=>{const f=i(t.flowResult,c.parent_task_id,c.parent_task_node_id);f&&(f.child_tasks=f.child_tasks.filter(z=>Number(z.task_id)!==Number(c.task_id))),y(!1,t.flowResult)})}}]];return c.progress<100&&(h[0][1]={label:`Progress: ${Math.ceil(c.progress)}% (${c.execution_time.toFixed(2)}s)`,labelClass:"text-blue-500",disabled:!0}),c.error!==""&&h[0].push({label:`Error: ${c.error}`,labelClass:"text-red-500",slot:"error",click:()=>{Fn().copy(c.error),dt().add({title:"Clipboard",description:`Task #${c.task_id} error copied to clipboard`,timeout:2e3})}}),h}function g(){const c=a.value.parent_task_id;if(!c)return;const h=i(t.flowResult,c,a.value.parent_task_node_id);h&&(a.value=h)}function b(){if(a.value.child_tasks.length===0)return;const c=a.value.outputs.length>1?a.value.outputs[t.outputsIndex].comfy_node_id:a.value.outputs[0].comfy_node_id,h=a.value.child_tasks.find(d=>d.parent_task_node_id===c);h&&(a.value=h)}const w=M(()=>{if(a.value.child_tasks.length===0)return;const c=a.value.outputs.length>1?a.value.outputs[t.outputsIndex].comfy_node_id:a.value.outputs[0].comfy_node_id;return a.value.child_tasks.find(d=>d.parent_task_node_id===c).task_id!==l.value.task_id});function v(){const c=l.value.parent_task_id;if(!c)return;const h=i(t.flowResult,c,l.value.parent_task_node_id);h&&(l.value=h)}function $(){if(l.value.child_tasks.length===0)return;const c=Number(l.value.outputs[0].comfy_node_id),h=l.value.child_tasks.find(d=>Number(d.parent_task_node_id)===c);h&&(l.value=h)}function y(c=!1,h=null){c||(a.value=h),l.value=o(h,h==null?void 0:h.outputs[t.outputsIndex].comfy_node_id,c),S.value=!1}re(t.flowResult,c=>{y(!0,c)});const S=x(!1),k=x(!0),m=x(null);return re(S,c=>{c?(m.value=a.value,a.value=t.flowResult):m.value&&(a.value=m.value,l.value=cn(m.value,t.outputsIndex,a.value.outputs.length>1?a.value.outputs[t.outputsIndex].comfy_node_id:a.value.outputs[0].comfy_node_id))}),(c,h)=>{const d=Je,f=ye("ImgComparisonSlider"),z=Ho,j=ce,N=vt,B=xe,O=ct;return p(),R("div",Wo,[Ft(C(d,{class:"mb-2 rounded-lg cursor-pointer",height:s(n).outputMaxSize,width:s(n).outputMaxSize,draggable:"false",fit:"cover",loading:"lazy",src:("outputResultSrc"in c?c.outputResultSrc:s(ve))({task_id:s(l).progress===100?s(l).task_id:e.flowResult.task_id,node_id:s(l).progress===100?s(l).outputs[0].comfy_node_id:e.flowResult.outputs[e.outputsIndex].comfy_node_id}),onClick:h[0]||(h[0]=V=>e.openImageModal(("outputResultSrc"in c?c.outputResultSrc:s(ve))({task_id:s(l).task_id??e.flowResult.task_id,node_id:s(l).outputs[0].comfy_node_id??e.flowResult.outputs[e.outputsIndex].comfy_node_id})))},null,8,["height","width","src"]),[[dn,!s(k)]]),s(k)?(p(),_(f,{key:0,class:"mb-2 mx-auto outline-none w-fit rounded-lg"},{default:F(()=>{var V,ee,D;return[C(d,{slot:"first",height:s(n).outputMaxSize,width:s(n).outputMaxSize,fit:"cover",draggable:"false",src:("outputResultSrc"in c?c.outputResultSrc:s(ve))({task_id:s(S)?e.flowResult.task_id:s(a).task_id,node_id:s(S)?e.flowResult.outputs[e.outputsIndex].comfy_node_id:s(a).parent_task_node_id!==null?(V=s(a))==null?void 0:V.outputs[0].comfy_node_id:((ee=s(a))==null?void 0:ee.outputs[e.outputsIndex].comfy_node_id)??((D=s(a))==null?void 0:D.outputs[0].comfy_node_id)})},null,8,["height","width","src"]),s(l)&&s(l).progress===100?(p(),_(d,{key:0,slot:"second",height:s(n).outputMaxSize,width:s(n).outputMaxSize,fit:"cover",draggable:"false",src:("outputResultSrc"in c?c.outputResultSrc:s(ve))({task_id:s(l).task_id,node_id:s(l).outputs[0].comfy_node_id})},null,8,["height","width","src"])):(p(),_(d,{key:1,slot:"second",height:s(n).outputMaxSize,width:s(n).outputMaxSize,fit:"cover",draggable:"false",src:`${("buildBackendUrl"in c?c.buildBackendUrl:s(pa))()}/vix_logo.png`},null,8,["height","width","src"]))]}),_:1})):P("",!0),I("div",Qo,[I("div",Ko,[I("div",Go,[C(z,{id:`toggle-compare-${e.flowResult.task_id}-${e.outputsIndex}`,modelValue:s(k),"onUpdate:modelValue":h[1]||(h[1]=V=>se(k)?k.value=V:null),size:"xs",class:"mr-2"},null,8,["id","modelValue"]),I("label",{class:"cursor-pointer select-none",for:`toggle-compare-${e.flowResult.task_id}-${e.outputsIndex}`}," Comparison ",8,Jo)]),I("div",Yo,[C(z,{id:`toggle-original-${e.flowResult.task_id}-${e.outputsIndex}`,modelValue:s(S),"onUpdate:modelValue":h[2]||(h[2]=V=>se(S)?S.value=V:null),disabled:!s(k),size:"xs",class:"mr-2"},null,8,["id","modelValue","disabled"]),I("label",{class:"cursor-pointer select-none",for:`toggle-original-${e.flowResult.task_id}-${e.outputsIndex}`}," Original ",8,Xo)])]),s(k)?(p(),R("div",Zo,[C(j,{icon:"i-heroicons-arrow-small-left-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:s(S)||s(a).parent_task_id===null,onClick:g},null,8,["disabled"]),C(N,{items:r(s(a)),mode:"click",popper:{placement:"top"}},{default:F(()=>[C(j,{variant:"link",color:"white",size:"xs"},{default:F(()=>[L(" #"+Q(s(S)?e.flowResult.task_id:s(a).task_id),1)]),_:1})]),_:1},8,["items"]),C(j,{icon:"i-heroicons-arrow-small-right-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:s(S)||!s(w),onClick:b},null,8,["disabled"]),C(B,{class:"mx-3",name:"i-heroicons-arrows-right-left-16-solid"}),C(j,{icon:"i-heroicons-arrow-small-left-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:!i(t.flowResult,s(l).parent_task_id,s(l).parent_task_node_id)||s(l).parent_task_id===Number(s(a).task_id)||s(l).parent_task_id===null,onClick:v},null,8,["disabled"]),C(N,{items:u(s(l)),mode:"click",popper:{placement:"top"}},{error:F(({item:V})=>[I("div",{class:"text-red-500 truncate",title:V.label},Q(V.label),9,es)]),default:F(()=>[C(j,{class:A({"text-blue-500":s(l).progress!==100&&s(l).error==="","text-red-500":s(l).error!==""}),variant:"link",color:"white",size:"xs"},{default:F(()=>[L(Q(s(l).progress===100?"#"+s(l).task_id:Math.ceil(s(l).progress)+"%"),1)]),_:1},8,["class"])]),_:1},8,["items"]),C(j,{icon:"i-heroicons-arrow-small-right-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:s(l).child_tasks.length===0,onClick:$},null,8,["disabled"]),C(O,{class:"ml-3",text:"Reset comparison",popper:{placement:"top"}},{default:F(()=>[C(j,{icon:"i-heroicons-arrow-path-rounded-square-solid",size:"2xs",variant:"outline",color:"white",onClick:h[3]||(h[3]=()=>y(!1,e.flowResult))})]),_:1})])):P("",!0)])])}}}),ns={class:"image-output"},as={class:"flex flex-col basis-full justify-between mx-2"},ls=H({__name:"Image",props:{flowResult:{type:Object,required:!0},handleSendToFlow:{type:Function,required:!0},openImageModal:{type:Function,required:!0}},setup(e){const t=Ie();return(n,o)=>{var u,g;const i=ts,a=Je,l=ce,r=Lt;return p(),R("div",ns,[e.flowResult.outputs.length===1?(p(),R(X,{key:0},[(u=e.flowResult)!=null&&u.child_tasks&&((g=e.flowResult)==null?void 0:g.child_tasks.length)>0?(p(),_(i,{key:0,"flow-result":e.flowResult,"open-image-modal":e.openImageModal},null,8,["flow-result","open-image-modal"])):e.flowResult.outputs.length===1?(p(),_(a,{key:1,class:"mb-2 mx-auto rounded-lg cursor-pointer",height:s(t).$state.outputMaxSize,width:s(t).$state.outputMaxSize,draggable:"false",fit:"cover",loading:"lazy",src:("outputResultSrc"in n?n.outputResultSrc:s(ve))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id}),onClick:o[0]||(o[0]=b=>e.openImageModal(("outputResultSrc"in n?n.outputResultSrc:s(ve))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id})))},null,8,["height","width","src"])):P("",!0)],64)):e.flowResult.outputs.length>1?(p(),_(r,{key:1,class:"mb-3 rounded-lg overflow-hidden",items:e.flowResult.outputs.map((b,w)=>({task_id:e.flowResult.task_id,node_id:b.comfy_node_id,index:w})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4 md:hidden"}},page:1,indicators:""},{default:F(({item:b})=>{var w;return[I("div",as,[(w=e.flowResult)!=null&&w.child_tasks&&("hasChildTaskByParentTaskNodeId"in n?n.hasChildTaskByParentTaskNodeId:s(mn))(e.flowResult,b.index,b.node_id)?(p(),_(i,{key:0,"flow-result":e.flowResult,"outputs-index":b.index,"open-image-modal":e.openImageModal},null,8,["flow-result","outputs-index","open-image-modal"])):(p(),_(a,{key:1,class:A(`mb-2 h-100 max-h-[${s(t).$state.outputMaxSize}px] mx-auto rounded-lg cursor-pointer`),draggable:"false",height:s(t).$state.outputMaxSize,width:s(t).$state.outputMaxSize,fit:"cover",loading:"lazy",src:("outputResultSrc"in n?n.outputResultSrc:s(ve))(b),onClick:v=>e.openImageModal(("outputResultSrc"in n?n.outputResultSrc:s(ve))(b))},null,8,["class","height","width","src","onClick"])),C(l,{class:"mt-2 w-fit mx-auto",icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",size:"xs",variant:"outline",onClick:()=>{e.handleSendToFlow(e.flowResult,b.index)}},{default:F(()=>o[1]||(o[1]=[L(" Send to flow ")])),_:2},1032,["onClick"])])]}),_:1},8,["items"])):P("",!0)])}}}),os={class:"image-output"},ss=["width","height"],is=["src"],rs={class:"flex flex-col basis-full justify-between mx-2"},us=["width","height"],ds=["src"],cs=H({__name:"Video",props:{flowResult:{type:Object,required:!0},handleSendToFlow:{type:Function,required:!0},openImageModal:{type:Function,required:!0}},setup(e){const t=Ie();return(n,o)=>{const i=ce,a=Lt;return p(),R("div",os,[e.flowResult.outputs.length===1?(p(),R("video",{key:0,controls:"",class:"mb-2 mx-auto rounded-lg",width:s(t).$state.outputMaxSize,height:s(t).$state.outputMaxSize},[I("source",{src:("outputResultSrc"in n?n.outputResultSrc:s(ve))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id})},null,8,is)],8,ss)):e.flowResult.outputs.length>1?(p(),_(a,{key:1,class:"mb-3 rounded-lg overflow-hidden",items:e.flowResult.outputs.map((l,r)=>({task_id:e.flowResult.task_id,node_id:l.comfy_node_id,index:r})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4 md:hidden"}},page:1,indicators:""},{default:F(({item:l})=>[I("div",rs,[I("video",{controls:"",class:"mb-2 mx-auto rounded-lg",width:s(t).$state.outputMaxSize,height:s(t).$state.outputMaxSize},[I("source",{src:("outputResultSrc"in n?n.outputResultSrc:s(ve))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id})},null,8,ds)],8,us),C(i,{class:"mt-2 w-fit mx-auto",icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",size:"xs",variant:"outline",onClick:()=>{e.handleSendToFlow(e.flowResult,l.index)}},{default:F(()=>o[0]||(o[0]=[L(" Send to flow ")])),_:2},1032,["onClick"])])]),_:1},8,["items"])):P("",!0)])}}}),ms=H({__name:"Params",props:{flowResult:{type:Object,required:!0}},setup(e){const t=e,n=M(()=>["#"+t.flowResult.task_id,...Object.keys(t.flowResult.input_params_mapped).filter(i=>t.flowResult.input_params_mapped[i].value&&t.flowResult.input_params_mapped[i].value!=="").map(i=>o.value&&t.flowResult.translated_input_params_mapped&&t.flowResult.translated_input_params_mapped[i]?`${t.flowResult.input_params_mapped[i].display_name}: ${t.flowResult.translated_input_params_mapped[i].value}`:`${t.flowResult.input_params_mapped[i].display_name}: ${t.flowResult.input_params_mapped[i].value}`)].join(" | ")+`${t.flowResult.execution_time?" | execution_time: "+t.flowResult.execution_time.toFixed(2)+"s":""}`),o=x(!1);return(i,a)=>{const l=ce,r=ct,u=zt;return p(),R(X,null,[e.flowResult.translated_input_params_mapped&&Object.keys(e.flowResult.translated_input_params_mapped).length>0?(p(),_(r,{key:0,text:s(o)?"Hide translated input params":"Show translated input params",popper:{placement:"top"}},{default:F(()=>[C(l,{class:"mb-2 mr-2",color:"white",size:"xs",variant:"outline",icon:"i-heroicons-language-solid",onClick:a[0]||(a[0]=()=>{o.value=!s(o)})})]),_:1},8,["text"])):P("",!0),(p(!0),R(X,null,pe(s(n).split("|"),g=>(p(),_(u,{key:g,class:"mr-2 mb-2 last:mr-0 hover:cursor-pointer",variant:"soft",color:"gray",onClick:()=>{("useCopyToClipboard"in i?i.useCopyToClipboard:s(Fn))().copy(g.split(":")[1].trim()),("useToast"in i?i.useToast:s(dt))().add({title:"Clipboard",description:`${g.split(":")[0].trim()} copied to clipboard`,timeout:2e3})}},{default:F(()=>[L(Q(g),1)]),_:2},1032,["onClick"]))),128))],64)}}}),fs={class:"p-4"},ps={class:"flex justify-center mb-4"},vs={key:0,class:"text-sm text-slate-500 text-center mb-4"},gs={class:"text-md text-center text-red-500 mb-4"},hs={key:1},ys={class:"flex items-center justify-between"},bs=H({__name:"SendToFlowModal",props:{show:{type:Boolean,required:!1},flowResult:{type:Object,required:!1,default:()=>null},outputImgSrc:{type:String,required:!0},outputParamIndex:{type:Number,required:!0},inputParamsMapped:{type:Object,required:!0},isChildTask:{type:Boolean,required:!1,default:!1},translatePrompt:{type:Boolean,required:!1,default:!1}},emits:["update:show"],setup(e,{emit:t}){const n=e,o=Ie(),i=M(()=>o.sub_flows.map(w=>({value:w.name,label:`${w.display_name} - ${w.description}`}))),a=x(i.value[0]||""),l=x(!1),r=t;function u(){console.debug("[Send to flow]: ",a.value);const w=o.sub_flows.find($=>$.name===a.value.value&&$.display_name===a.value.label.split(" - ")[0]);if(console.debug("[Send to flow]: targetFlow",w),!w){dt().add({title:`Target sub-flow "${a.value.value}" not found`,description:"Please, verify the target sub-flow is installed and available and try again",timeout:5e3});return}const v=w.input_params.reduce(($,y)=>{const S={};return y.type==="text"?S[y.name]={value:y.default||"",type:y.type}:y.type==="number"?S[y.name]={value:y.default||0,type:y.type}:y.type==="image"?S[y.name]={value:JSON.stringify({task_id:n.flowResult.task_id,node_id:n.flowResult.outputs.length>1?n.flowResult.outputs[n.outputParamIndex].comfy_node_id:n.flowResult.outputs[0].comfy_node_id})||"",type:y.type}:y.type==="list"?S[y.name]={value:y.default||Object.keys(y.options)[0]||"",type:y.type,options:y.options}:y.type==="bool"?S[y.name]={value:y.default||!1,type:y.type}:["range","range_scale"].includes(y.type)&&(S[y.name]={value:y.default||0,type:y.type}),$.push(S),$},[]);console.debug("[Send to flow]: input_params_map",v),l.value=!0,o.runFlow(w,v,1,n.translatePrompt,g.value,g.value?Number(n.flowResult.task_id):null).finally(()=>{l.value=!1,r("update:show",!1)})}const g=x(!1),b=M(()=>{var w;return n.flowResult.progress===100&&((w=n.flowResult)==null?void 0:w.error)===""});return Tt(()=>{o.fetchSubFlows("image").then(()=>{a.value=i.value[0]||""}),g.value=!1}),(w,v)=>{const $=Je,y=Rn,S=gn,k=jt,m=ce,c=nt;return p(),_(c,{modelValue:w.$props.show,"onUpdate:modelValue":v[2]||(v[2]=h=>w.$props.show=h),class:"z-[90]",transition:!1},{default:F(()=>[I("div",fs,[v[4]||(v[4]=I("h2",{class:"text-lg text-center mb-4"},"Send to flow",-1)),I("div",ps,[s(b)?(p(),_($,{key:0,src:"outputResultSrc"in w?w.outputResultSrc:s(ve),class:"w-1/2 rounded-lg",draggable:!1},null,8,["src"])):(p(),_(y,{key:1,color:"orange",icon:"i-heroicons-exclamation-circle-solid",title:`Task is still running (${Math.ceil(e.flowResult.progress)}%, ${e.flowResult.execution_time.toFixed(2)}s)`,description:e.flowResult.error!==""?e.flowResult.error:""},null,8,["title","description"]))]),e.inputParamsMapped?(p(),R("p",vs,Q(["#"+e.flowResult.task_id,...Object.keys(e.inputParamsMapped).filter(h=>e.inputParamsMapped[h].value!=="").map(h=>`${e.inputParamsMapped[h].display_name}: ${e.inputParamsMapped[h].value}`)].join(" | ")),1)):P("",!0),I("p",gs,[s(i).length>0?(p(),_(S,{key:0,modelValue:s(a),"onUpdate:modelValue":v[0]||(v[0]=h=>se(a)?a.value=h:null),class:"w-full",size:"lg",options:s(i)},null,8,["modelValue","options"])):(p(),R("span",hs,"No sub-flows available"))]),e.isChildTask?(p(),_(y,{key:1,class:"mb-4",icon:"i-heroicons-exclamation-circle-solid",title:"Child task",description:"The latest child task is always used as input for sub-flow"})):P("",!0),I("div",ys,[C(k,{modelValue:s(g),"onUpdate:modelValue":v[1]||(v[1]=h=>se(g)?g.value=h:null),label:"Bind as child task"},null,8,["modelValue"]),C(m,{icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",variant:"outline",loading:s(l),disabled:s(i).length===0||e.isChildTask&&!s(b),onClick:u},{default:F(()=>v[3]||(v[3]=[L(" Send ")])),_:1},8,["loading","disabled"])])])]),_:1},8,["modelValue"])}}}),ws={class:"flex flex-col md:flex-row items-center justify-center mb-5 sticky top-1 z-[10]"},ks={class:"flex items-center justify-center"},$s={class:"p-4"},xs={class:"text-md text-center text-red-500 mb-4"},Ss={class:"flex justify-center"},Cs={key:0,class:"results overflow-auto"},Is=["id"],Ms={class:"text-sm text-slate-500 text-center mb-1"},Ps={class:"w-5/6 mx-auto flex flex-wrap items-center justify-center"},_s={class:"w-full flex justify-center items-center"},Rs={key:1,class:"text-center text-slate-500"},Fs=H({__name:"Output",emits:["copy-prompt-inputs"],setup(e,{emit:t}){const n=Ie(),o=M(()=>{var B;return n.flowResultsByName((B=n.currentFlow)==null?void 0:B.name).length>0||!1}),i=M(()=>{var B;return n.flowResultsByName((B=n.currentFlow)==null?void 0:B.name).reverse()||[]}),a=M(()=>n.$state.resultsPageSize);re(i,()=>{i.value.length<=n.$state.resultsPageSize?n.$state.resultsPage=1:n.$state.resultsPage>Math.ceil(i.value.length/n.$state.resultsPageSize)&&(n.$state.resultsPage=Math.ceil(i.value.length/n.$state.resultsPageSize))}),re(a,()=>{i.value.length<=n.$state.resultsPageSize?n.$state.resultsPage=1:n.$state.resultsPage>Math.ceil(i.value.length/n.$state.resultsPageSize)&&(n.$state.resultsPage=Math.ceil(i.value.length/n.$state.resultsPageSize)),n.saveUserOptions()}),_e(()=>{n.$state.flow_results_filter="",n.$state.resultsPage=1});const l=t;function r(B){l("copy-prompt-inputs",B.input_params_mapped)}function u(B){y.value=B,$.value=!0}const g=x(null),b=x(!1);window.addEventListener("scroll",()=>{var B;b.value=window.scrollY>(((B=g.value)==null?void 0:B.offsetTop)+window.screen.height||0)});const w=M(()=>n.$state.resultsPage);re(w,()=>{const B=document.getElementById("output-container");B&&B.scrollIntoView({behavior:"smooth"})});const v=x(!1),$=x(!1),y=x(""),S=x(!1),k=x(!1),m=x(!1),c=x(""),h=x(null),d=x({}),f=x(0),z=x(!1);function j(B,O=0){if(B.child_tasks.length===0||!mn(B,O,B.outputs[O].comfy_node_id))h.value=B,c.value=ve({task_id:B.task_id,node_id:B.outputs[O].comfy_node_id}),d.value=B.input_params_mapped,z.value=!1;else{const V=cn(B,O,B.outputs[O].comfy_node_id);h.value=V,d.value=B.input_params_mapped,c.value=ve({task_id:V.task_id,node_id:V.outputs[0].comfy_node_id}),z.value=!0}f.value=O,m.value=!0}function N(B){const O=[[{label:"Use params",labelClass:"text-cyan-500 text-sm",icon:"i-heroicons-document-duplicate-16-solid",iconClass:"bg-cyan-500 h-4 w-4",click:()=>r(B)}],[{label:"Comfy flow",labelClass:"text-blue-500 text-sm",icon:"i-heroicons-arrow-down-tray",iconClass:"bg-blue-500 h-4 w-4",click:()=>{var V;return n.downloadFlowComfy((V=n.currentFlow)==null?void 0:V.name,B.task_id)}}]];return B.outputs.length===1&&B.outputs.every(V=>V.type==="image")&&O.splice(1,0,[{label:"Send to flow",labelClass:"text-violet-500 text-sm",icon:"i-heroicons-arrow-uturn-up-solid",iconClass:"bg-violet-500 h-4 w-4",click:()=>{j(B)}}]),O}return(B,O)=>{var U;const V=No,ee=xe,D=Bt,K=Ia,Z=Pa,Y=ce,me=vt,Se=zt,be=nt,we=ls,q=cs,E=ms,G=bs,le=Je;return p(),R("div",{id:"output-container",ref_key:"outputContainer",ref:g,class:"w-full p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg shadow-md my-10"},[C(V,{show:s(b),class:"fixed bottom-5 right-5",target:"output-container"},null,8,["show"]),I("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center mb-3",onClick:O[0]||(O[0]=()=>{v.value=!s(v)})},[C(ee,{name:s(v)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),L(" Output ("+Q(s(i).filter(T=>T.parent_task_id===null).length)+") ",1)]),s(v)?P("",!0):(p(),R(X,{key:0},[I("div",ws,[C(D,{modelValue:s(n).$state.flow_results_filter,"onUpdate:modelValue":O[1]||(O[1]=T=>s(n).$state.flow_results_filter=T),icon:"i-heroicons-magnifying-glass-20-solid",color:"white",class:"md:mr-3",label:"Filter by prompt",trailing:!0,placeholder:"Filter results by prompt"},null,8,["modelValue"]),s(i).filter(T=>T.parent_task_id===null).length>s(n).$state.resultsPageSize?(p(),_(K,{key:0,modelValue:s(n).$state.resultsPage,"onUpdate:modelValue":O[2]||(O[2]=T=>s(n).$state.resultsPage=T),class:"my-1 md:my-0","page-count":s(n).$state.resultsPageSize,total:s(i).filter(T=>T.parent_task_id===null).length,"show-first":"","show-last":""},null,8,["modelValue","page-count","total"])):P("",!0),I("div",ks,[C(Z,{modelValue:s(n).resultsPageSize,"onUpdate:modelValue":O[3]||(O[3]=T=>s(n).resultsPageSize=T),class:"md:mx-3 w-fit mr-3",options:[5,10,20,50,100],label:"Results per page"},null,8,["modelValue"]),C(me,{items:[[{label:"Delete all results",labelClass:"text-red-500",icon:"i-heroicons-trash",iconClass:"dark:text-red-500 text-red-500",click:()=>S.value=!0}]],mode:"click",label:"Options",popper:{placement:"bottom-end"}},{default:F(()=>[C(Y,{color:"white",icon:"i-heroicons-ellipsis-vertical-16-solid"})]),_:1},8,["items"])]),C(be,{modelValue:s(S),"onUpdate:modelValue":O[6]||(O[6]=T=>se(S)?S.value=T:null),class:"z-[90]",transition:!1},{default:F(()=>[I("div",$s,[O[16]||(O[16]=I("p",{class:"text-lg text-center mb-4"},"Are you sure you want to delete all results?",-1)),I("p",xs,[O[12]||(O[12]=L(" All history and images of ")),C(Se,{class:"mx-1",color:"orange",variant:"outline"},{default:F(()=>[L(Q(s(n).currentFlow.display_name),1)]),_:1}),O[13]||(O[13]=L(" will be deleted. "))]),I("div",Ss,[C(Y,{class:"mr-2",color:"red",variant:"outline",loading:s(k),onClick:O[4]||(O[4]=()=>{var T;k.value=!0,s(n).deleteFlowResults((T=s(n).currentFlow)==null?void 0:T.name).then(()=>{k.value=!1,S.value=!1})})},{default:F(()=>O[14]||(O[14]=[L(" Yes ")])),_:1},8,["loading"]),C(Y,{variant:"outline",onClick:O[5]||(O[5]=()=>S.value=!1)},{default:F(()=>O[15]||(O[15]=[L("No")])),_:1})])])]),_:1},8,["modelValue"])]),s(o)?(p(),R("div",Cs,[(p(!0),R(X,null,pe(s(n).flowResultsByNamePaginated((U=s(n).currentFlow)==null?void 0:U.name),T=>(p(),R("div",{id:"task_id_"+T.task_id,key:T.task_id,class:"flex flex-col justify-center mx-auto mb-5"},[T.outputs.some(J=>J.type==="image")?(p(),_(we,{key:0,"flow-result":T,"handle-send-to-flow":j,"open-image-modal":u},null,8,["flow-result"])):T.outputs.some(J=>J.type==="video")?(p(),_(q,{key:1,"flow-result":T,"handle-send-to-flow":j,"open-image-modal":u},null,8,["flow-result"])):P("",!0),I("div",Ms,[I("div",Ps,[C(E,{"flow-result":T},null,8,["flow-result"])])]),I("div",_s,[C(Y,{class:"mr-3",color:"red",icon:"i-heroicons-trash",variant:"outline",size:"xs",onClick:()=>s(n).deleteFlowHistory(T.task_id)},{default:F(()=>O[17]||(O[17]=[L(" Delete ")])),_:2},1032,["onClick"]),C(me,{items:N(T),mode:"click",popper:{placement:"bottom-start"}},{default:F(()=>[C(Y,{color:"white",icon:"i-heroicons-ellipsis-vertical-16-solid",size:"xs"})]),_:2},1032,["items"])])],8,Is))),128)),C(G,{modelValue:s(m),"onUpdate:modelValue":O[7]||(O[7]=T=>se(m)?m.value=T:null),"flow-result":s(h),"output-img-src":s(c),"output-param-index":s(f),"input-params-mapped":s(d),"is-child-task":s(z),"onUpdate:show":O[8]||(O[8]=T=>m.value=T)},null,8,["modelValue","flow-result","output-img-src","output-param-index","input-params-mapped","is-child-task"])])):(p(),R("p",Rs," No output results available "))],64)),C(be,{modelValue:s($),"onUpdate:modelValue":O[11]||(O[11]=T=>se($)?$.value=T:null),class:"z-[90]",transition:!1,fullscreen:""},{default:F(()=>[C(Y,{class:"absolute top-4 right-4",icon:"i-heroicons-x-mark",variant:"ghost",onClick:O[9]||(O[9]=()=>$.value=!1)}),I("div",{class:"flex items-center justify-center w-full h-full p-4",onClick:O[10]||(O[10]=Ye(()=>$.value=!1,["left"]))},[s(y)?(p(),_(le,{key:0,class:"lg:h-full",fit:"inside",loading:"lazy",src:s(y)},null,8,["src"])):P("",!0)])]),_:1},8,["modelValue"])],512)}}}),Ts={class:"flex flex-col lg:flex-row flex-grow items-start w-full"},zs={class:"card-wrapper w-full lg:pr-5"},Os={key:0,class:"p-0 text-sm"},Bs={class:"flex flex-row items-center text-slate-400 mb-2"},Us={class:"flex flex-row flex-wrap items-center text-md mb-2"},js=["href"],Es={class:"flex flex-row items-center text-md mb-2"},As=["href"],Ds={key:1},Ls={class:"flex flex-row items-center text-md mb-2"},Ns={key:0},Vs={class:"flex flex-row items-center text-md mb-2"},qs={key:0,class:"flex flex-row flex-wrap items-center text-md mb-2"},Hs=["href"],Ws={key:1,class:"flex flex-row flex-wrap items-center text-md"},Qs={key:0,class:"flex justify-end"},Ks={class:"flex flex-row items-center justify-center text-sm mr-2"},Gs={key:1},Js={class:"text-sm flex justify-end"},Ys={class:"flex flex-row items-center justify-center text-sm mr-3"},Xs={key:0,class:"text-right"},Zs={class:"prompt-wrapper w-full"},ei={class:"flex items-center justify-between"},ti={class:"pb-2"},ni={class:"flex justify-end items-center"},ui=H({__name:"[name]",setup(e){const t=va(),n=Ie();n.setCurrentFlow(t.params.name);const o=M(()=>n.flowInstallingByName(t.params.name)),i=M(()=>{var k;return o.value&&((k=o.value)==null?void 0:k.progress)<100||!1}),a=x(!1),l=M(()=>{var k;return o.value?"error"in o.value&&((k=o.value)==null?void 0:k.error)!==""?`${o.value.progress.toFixed(0)}% Error setting up`:`${o.value.progress.toFixed(0)}% Setting up`:"Setup flow"}),r=x(!1),u=x(!1),g=M(()=>{var m;const k=[[{label:"Delete flow",icon:"i-heroicons-trash",click:w}]];return((m=n==null?void 0:n.currentFlow)==null?void 0:m.new_version_available)!==""&&k[0].unshift({label:`Update to ${n.currentFlow.new_version_available}`,icon:"i-heroicons-arrow-path",click:()=>{n.updateFlow(n.currentFlow)}}),k});function b(k,m=!1){r.value=!0,n.deleteFlow(k).then(()=>{m&&ba().push("/")}).finally(()=>{r.value=!1,u.value=!1})}function w(){var m;const k=((m=n.currentFlow)==null?void 0:m.private)||!1;if(k){u.value=!0;return}b(n.currentFlow,k)}const v=x(!1),$=x(null),y=function(k){var m;(m=$.value)==null||m.copyPromptInputs(k)},S=ga();return(k,m)=>{const c=xe,h=ct,d=zt,f=ce,z=vt,j=Ma,N=ko,B=Lo,O=Fs,V=pn,ee=nt,D=ha;return p(),_(D,null,{default:F(()=>[!s(n).loading.flows_available&&!s(n).loading.flows_installed&&s(n).currentFlow&&!s(n).$state.loading.tasks_history?(p(),R(X,{key:0},[I("div",Ts,[I("div",zs,[C(j,{as:"div",class:"w-full mb-5"},ya({header:F(()=>{var K,Z;return[I("h2",{class:"text-xl font-bold cursor-pointer select-none flex items-center",onClick:m[0]||(m[0]=()=>{v.value=!s(v)})},[(K=s(n).currentFlow)!=null&&K.private?(p(),_(h,{key:0,text:"This flow is local, manually added"},{default:F(()=>[C(c,{name:"i-heroicons-lock-closed",class:"mr-2"})]),_:1})):P("",!0),C(c,{name:s(v)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),L(" "+Q((Z=s(n).currentFlow)==null?void 0:Z.display_name),1)])]}),default:F(()=>{var K,Z,Y,me,Se,be,we,q,E,G,le,U,T,J,ue,te,ke;return[s(v)?P("",!0):(p(),R("div",Os,[I("p",Bs,Q((K=s(n).currentFlow)==null?void 0:K.description),1),I("p",Us,[C(c,{name:"i-heroicons-user-16-solid",class:"mr-1"}),m[8]||(m[8]=I("b",null,"Author:",-1)),m[9]||(m[9]=L(" ")),I("a",{class:"hover:underline text-md",href:(Z=s(n).currentFlow)==null?void 0:Z.homepage,rel:"noopener",target:"_blank"},Q((Y=s(n).currentFlow)==null?void 0:Y.author),9,js)]),I("p",Es,[C(c,{name:"i-heroicons-document-text",class:"mr-1"}),(me=s(n).currentFlow)!=null&&me.documentation?(p(),R("a",{key:0,class:"hover:underline",href:(Se=s(n).currentFlow)==null?void 0:Se.documentation,rel:"noopener",target:"_blank"}," Documentation ",8,As)):(p(),R("span",Ds,"No documentation"))]),I("p",Ls,[C(c,{name:"i-heroicons-clock",class:"mr-1"}),m[10]||(m[10]=I("b",null,"Version:",-1)),m[11]||(m[11]=L(" ")),I("span",null,Q((be=s(n).currentFlow)==null?void 0:be.version),1),((we=s(n).currentFlow)==null?void 0:we.new_version_available)!==""?(p(),R("span",Ns," (new version available: "+Q((q=s(n).currentFlow)==null?void 0:q.new_version_available)+") ",1)):P("",!0)]),I("p",Vs,[C(c,{name:"i-heroicons-tag",class:"mr-1"}),m[12]||(m[12]=I("b",null,"Tags:",-1)),m[13]||(m[13]=L(" ")),((E=s(n).currentFlow)==null?void 0:E.tags.length)>0?(p(!0),R(X,{key:0},pe((G=s(n).currentFlow)==null?void 0:G.tags,ne=>(p(),_(d,{key:ne,label:ne,color:"white",variant:"solid",class:"m-1"},null,8,["label"]))),128)):(p(),_(d,{key:1,label:"No tags",color:"white",variant:"solid",class:"m-1"}))]),((U=(le=s(n).currentFlow)==null?void 0:le.models)==null?void 0:U.length)>0?(p(),R("p",qs,[C(c,{name:"i-heroicons-arrow-down-on-square-stack",class:"mr-1"}),I("b",null,"Models ("+Q((T=s(n).currentFlow)==null?void 0:T.models.length)+"):",1),m[14]||(m[14]=L(" ")),(p(!0),R(X,null,pe((J=s(n).currentFlow)==null?void 0:J.models,ne=>(p(),_(d,{key:ne.name,class:"m-1",color:"white",variant:"solid"},{default:F(()=>[ne.gated?(p(),_(h,{key:0,text:"Gated model, requires auth token for download",popper:{placement:"top"}},{default:F(()=>[C(c,{name:"i-heroicons-key",class:"mr-1"})]),_:1})):P("",!0),I("a",{class:"hover:underline underline-offset-4",href:ne.homepage,rel:"noopener",target:"_blank"},Q(ne.name),9,Hs)]),_:2},1024))),128))])):P("",!0),((te=(ue=s(n).currentFlow)==null?void 0:ue.requires)==null?void 0:te.length)>0?(p(),R("p",Ws,[m[15]||(m[15]=I("b",null,"Requires:",-1)),m[16]||(m[16]=L(" ")),(p(!0),R(X,null,pe((ke=s(n).currentFlow)==null?void 0:ke.requires,ne=>(p(),_(d,{key:ne,class:"m-1",color:"yellow",variant:"outline"},{default:F(()=>[L(Q(ne),1)]),_:2},1024))),128))])):P("",!0)]))]}),_:2},[s(v)?void 0:{name:"footer",fn:F(()=>[s(S).isAdmin?(p(),R("div",Qs,[I("div",Ks,[C(c,{name:s(n).isFlowInstalled(s(t).params.name)?"i-heroicons-check-badge":"i-heroicons-x-mark",class:"mx-1"},null,8,["name"]),I("span",{class:A({"text-green-500":s(n).isFlowInstalled(s(t).params.name),"text-red-500":!s(n).isFlowInstalled(s(t).params.name)})},Q(s(n).isFlowInstalled(s(t).params.name)?"Installed":"Not installed"),3)]),s(n).isFlowInstalled(s(t).params.name)?P("",!0):(p(),_(h,{key:0,text:"Setup flow dependencies and configure it in ComfyUI",popper:{placement:"top"},"open-delay":500},{default:F(()=>[C(f,{icon:"i-heroicons-arrow-down-tray",class:"mx-3",color:"primary",variant:"outline",loading:s(i),onClick:m[1]||(m[1]=()=>s(n).setupFlow(s(n).currentFlow))},{default:F(()=>[L(Q(s(l)),1)]),_:1},8,["loading"])]),_:1})),!s(n).isFlowInstalled(s(t).params.name)&&s(i)?(p(),_(h,{key:1,text:"Cancel flow installation",popper:{placement:"top"},"open-delay":500},{default:F(()=>[C(f,{icon:"i-heroicons-stop",variant:"outline",color:"orange",loading:s(a),onClick:m[2]||(m[2]=()=>{a.value=!0,s(n).cancelFlowSetup(s(n).currentFlow).then(()=>{a.value=!1})})},{default:F(()=>m[17]||(m[17]=[L(" Cancel ")])),_:1},8,["loading"])]),_:1})):P("",!0),s(n).isFlowInstalled(s(t).params.name)?(p(),_(z,{key:2,items:s(g),mode:"click",label:"Actions",popper:{placement:"bottom-end"}},{default:F(()=>[C(f,{color:"white",label:"Actions","trailing-icon":"i-heroicons-chevron-down-20-solid"})]),_:1},8,["items"])):P("",!0)])):(p(),R("div",Gs,[I("div",Js,[I("div",Ys,[C(c,{name:s(n).isFlowInstalled(s(t).params.name)?"i-heroicons-check-badge":"i-heroicons-x-mark",class:"mx-1"},null,8,["name"]),I("span",{class:A({"text-green-500":s(n).isFlowInstalled(s(t).params.name),"text-red-500":!s(n).isFlowInstalled(s(t).params.name)})},Q(s(n).isFlowInstalled(s(t).params.name)?"Installed":"Not installed"),3)]),s(n).isFlowInstalled(s(t).params.name)?P("",!0):(p(),R("div",Xs,m[18]||(m[18]=[I("p",{class:"text-orange-500"},"Only admin can manage workflows.",-1),I("span",{class:"text-slate-500"},"Ask your admin to setup this workflow",-1)])))])]))]),key:"0"}]),1024)]),I("div",Zs,[!s(r)&&s(n).isFlowInstalled(s(t).params.name)?(p(),_(N,{key:0,ref_key:"workflowPrompt",ref:$},null,512)):P("",!0)])]),!s(r)&&s(n).isFlowInstalled(s(t).params.name)?(p(),_(B,{key:0})):P("",!0),!s(r)&&s(n).isFlowInstalled(s(t).params.name)||s(n).flowResultsByName(s(t).params.name).length>0?(p(),_(O,{key:1,onCopyPromptInputs:m[3]||(m[3]=K=>y(K))})):P("",!0)],64)):(p(),_(V,{key:1,class:"mb-3"})),C(ee,{modelValue:s(u),"onUpdate:modelValue":m[7]||(m[7]=K=>se(u)?u.value=K:null),"prevent-close":""},{default:F(()=>[C(j,{ui:{ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:F(()=>[I("div",ei,[m[19]||(m[19]=I("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Confirm workflow deletion ",-1)),C(f,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:m[4]||(m[4]=K=>u.value=!1)})])]),default:F(()=>{var K;return[I("p",ti,[m[20]||(m[20]=L(" Are you sure you want to delete the ")),m[21]||(m[21]=I("b",null,"private",-1)),m[22]||(m[22]=L(" workflow ")),I("b",null,Q((K=s(n).currentFlow)==null?void 0:K.display_name),1),m[23]||(m[23]=L("? "))]),I("div",ni,[C(f,{icon:"i-heroicons-x-mark-16-solid",variant:"outline",color:"green",class:"mr-2",onClick:m[5]||(m[5]=Z=>u.value=!1)},{default:F(()=>m[24]||(m[24]=[L(" Cancel ")])),_:1}),C(f,{icon:"i-heroicons-trash",variant:"outline",color:"red",onClick:m[6]||(m[6]=Z=>{var Y;return b(s(n).currentFlow,((Y=s(n).currentFlow)==null?void 0:Y.private)||!1)})},{default:F(()=>m[25]||(m[25]=[L(" Delete ")])),_:1})])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{ui as default};
