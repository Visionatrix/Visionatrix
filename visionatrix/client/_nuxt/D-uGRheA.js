import{bl as i,aT as r,bm as a,bn as s}from"./2Wk1cLn0.js";const n=i("userStore",{state:()=>({loading:!1,user:{}}),getters:{isAdmin(){return this.user.is_admin||!1}},actions:{async fetchUserInfo(){const{$apiFetch:t}=r();return this.loading=!0,await t("/whoami").then(e=>{this.user=e}).finally(()=>{this.loading=!1})}}}),o=a(t=>{if(t.path.startsWith("/settings")){const e=n();if(!e.$state.user)e.fetchUserInfo().finally(()=>e.isAdmin?s(t.path):s("/"));else if(!e.isAdmin)return s("/")}});export{o as default};
