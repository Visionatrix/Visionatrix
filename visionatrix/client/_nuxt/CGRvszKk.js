import{f as H,x as S,I as _,Z as Jt,O as ae,$ as Me,n as ie,a0 as Ue,a1 as Ve,a2 as W,a3 as st,a4 as Re,a5 as Un,a6 as Xt,a7 as Bn,a8 as fe,a9 as xt,aa as $t,ab as Be,ac as nt,ad as Pe,F as Z,ae as jn,af as En,ag as je,ah as qe,ai as He,aj as Rt,ak as ce,al as An,am as Dn,an as Zt,ao as Oe,ap as se,aq as Nn,ar as Ln,as as Lt,at as tt,au as en,av as Vn,aw as tn,ax as qn,ay as Hn,az as Wn,aA as nn,aB as Qn,aC as an,aD as Kn,aE as Ne,aF as Yn,A as D,_ as Qe,aG as ve,o as v,i as M,w as R,b as I,z as ze,a as C,c as O,aH as ln,aI as Gn,B as ge,l as P,r as he,e as on,aJ as Jn,h as Ie,U as sn,t as Q,d as L,D as Ke,E as _e,G as Ye,aK as Xn,H as me,K as it,aL as Zn,aM as Ft,aN as Tt,W as $e,V as We,aO as ea,aP as ta,aQ as na,aR as Vt,aS as aa,aT as St,aU as la,aV as qt,aW as oa,aX as rn,aY as sa,aZ as ia,m as o,a_ as zt,a$ as ra,b0 as It,g as ke,y as Ot,P as un,k as de,Q as oe,b1 as Ct,C as rt,s as ua,b2 as dn,b3 as da,b4 as ca,b5 as ma,b6 as et,b7 as fa,v as ut,b8 as cn,b9 as pe,ba as pa,bb as mn,j as Ut,bc as va,bd as ga,q as ha,be as ya,p as ba}from"./B2NO93_8.js";import{b as fn,_ as dt,a as pn}from"./CzLc4Oc4.js";import{t as Ht,b as vn,o as ct,p as wa,u as ka,c as Se,i as xa,f as $a,d as Sa,e as Ia,g as Bt,_ as jt,a as gn}from"./CKBumQZ0.js";import{a as Ca,_ as _a}from"./DcfJKL4r.js";import{_ as Et,a as hn,b as Ma}from"./h0XIw51-.js";import{_ as At}from"./Cr6Cv2yh.js";const Pa={wrapper:"relative",container:"relative w-full flex overflow-x-auto snap-x snap-mandatory scroll-smooth",item:"flex flex-none snap-center",arrows:{wrapper:"flex items-center justify-between"},indicators:{wrapper:"absolute flex items-center justify-center gap-3 bottom-4 inset-x-0",base:"rounded-full h-3 w-3",active:"bg-primary-500 dark:bg-primary-400",inactive:"bg-gray-100 dark:bg-gray-800"},default:{prevButton:{color:"black",class:"rtl:[&_span:first-child]:rotate-180 absolute start-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"black",class:"rtl:[&_span:last-child]:rotate-180 absolute end-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-right-20-solid"}}},Ra={base:"relative inline-flex flex-shrink-0 border-2 border-transparent disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none",rounded:"rounded-full",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",active:"bg-{color}-500 dark:bg-{color}-400",inactive:"bg-gray-200 dark:bg-gray-700",size:{"2xs":"h-3 w-5",xs:"h-3.5 w-6",sm:"h-4 w-7",md:"h-5 w-9",lg:"h-6 w-11",xl:"h-7 w-[3.25rem]","2xl":"h-8 w-[3.75rem]"},container:{base:"pointer-events-none relative inline-block rounded-full bg-white dark:bg-gray-900 shadow transform ring-0 transition ease-in-out duration-200",active:{"2xs":"translate-x-2 rtl:-translate-x-2",xs:"translate-x-2.5 rtl:-translate-x-2.5",sm:"translate-x-3 rtl:-translate-x-3",md:"translate-x-4 rtl:-translate-x-4",lg:"translate-x-5 rtl:-translate-x-5",xl:"translate-x-6 rtl:-translate-x-6","2xl":"translate-x-7 rtl:-translate-x-7"},inactive:"translate-x-0 rtl:-translate-x-0",size:{"2xs":"h-2 w-2",xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6","2xl":"h-7 w-7"}},icon:{base:"absolute inset-0 h-full w-full flex items-center justify-center transition-opacity",active:"opacity-100 ease-in duration-200",inactive:"opacity-0 ease-out duration-100",size:{"2xs":"h-2 w-2",xs:"h-2 w-2",sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4",xl:"h-5 w-5","2xl":"h-6 w-6"},on:"text-{color}-500 dark:text-{color}-400",off:"text-gray-400 dark:text-gray-500",loading:"animate-spin text-{color}-500 dark:text-{color}-400"},default:{onIcon:null,offIcon:null,loadingIcon:"i-heroicons-arrow-path-20-solid",color:"primary",size:"md"}},Fa={wrapper:"relative w-full flex items-center",base:"w-full absolute appearance-none cursor-pointer disabled:cursor-not-allowed disabled:bg-opacity-50 focus:outline-none peer group",rounded:"rounded-lg",background:"bg-transparent",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",progress:{base:"absolute pointer-events-none peer-disabled:bg-opacity-50",rounded:"rounded-s-lg",background:"bg-{color}-500 dark:bg-{color}-400",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"}},thumb:{base:"[&::-webkit-slider-thumb]:relative [&::-moz-range-thumb]:relative [&::-webkit-slider-thumb]:z-[1] [&::-moz-range-thumb]:z-[1] [&::-webkit-slider-thumb]:appearance-none [&::-moz-range-thumb]:appearance-none [&::-webkit-slider-thumb]:rounded-full [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:border-0",color:"text-{color}-500 dark:text-{color}-400",background:"[&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:dark:bg-gray-900 [&::-moz-range-thumb]:bg-current",ring:"[&::-webkit-slider-thumb]:ring-2 [&::-webkit-slider-thumb]:ring-current",size:{"2xs":"[&::-webkit-slider-thumb]:h-1.5 [&::-moz-range-thumb]:h-1.5 [&::-webkit-slider-thumb]:w-1.5 [&::-moz-range-thumb]:w-1.5 [&::-webkit-slider-thumb]:mt-[-2.5px] [&::-moz-range-thumb]:mt-[-2.5px]",xs:"[&::-webkit-slider-thumb]:h-2 [&::-moz-range-thumb]:h-2 [&::-webkit-slider-thumb]:w-2 [&::-moz-range-thumb]:w-2 [&::-webkit-slider-thumb]:mt-[-3px] [&::-moz-range-thumb]:mt-[-3px]",sm:"[&::-webkit-slider-thumb]:h-3 [&::-moz-range-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-moz-range-thumb]:w-3 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",md:"[&::-webkit-slider-thumb]:h-4 [&::-moz-range-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-moz-range-thumb]:w-4 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",lg:"[&::-webkit-slider-thumb]:h-5 [&::-moz-range-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-moz-range-thumb]:w-5 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",xl:"[&::-webkit-slider-thumb]:h-6 [&::-moz-range-thumb]:h-6 [&::-webkit-slider-thumb]:w-6 [&::-moz-range-thumb]:w-6 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1","2xl":"[&::-webkit-slider-thumb]:h-7 [&::-moz-range-thumb]:h-7 [&::-webkit-slider-thumb]:w-7 [&::-moz-range-thumb]:w-7 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1"}},track:{base:"[&::-webkit-slider-runnable-track]:group-disabled:bg-opacity-50 [&::-moz-range-track]:group-disabled:bg-opacity-50",background:"[&::-webkit-slider-runnable-track]:bg-gray-200 [&::-moz-range-track]:bg-gray-200 [&::-webkit-slider-runnable-track]:dark:bg-gray-700 [&::-moz-range-track]:dark:bg-gray-700",rounded:"[&::-webkit-slider-runnable-track]:rounded-lg [&::-moz-range-track]:rounded-lg",size:{"2xs":"[&::-webkit-slider-runnable-track]:h-px [&::-moz-range-track]:h-px",xs:"[&::-webkit-slider-runnable-track]:h-0.5 [&::-moz-range-track]:h-0.5",sm:"[&::-webkit-slider-runnable-track]:h-1 [&::-moz-range-track]:h-1",md:"[&::-webkit-slider-runnable-track]:h-2 [&::-moz-range-track]:h-2",lg:"[&::-webkit-slider-runnable-track]:h-3 [&::-moz-range-track]:h-3",xl:"[&::-webkit-slider-runnable-track]:h-4 [&::-moz-range-track]:h-4","2xl":"[&::-webkit-slider-runnable-track]:h-5 [&::-moz-range-track]:h-5"}},size:{"2xs":"h-1.5",xs:"h-2",sm:"h-3",md:"h-4",lg:"h-5",xl:"h-6","2xl":"h-7"},default:{size:"md",color:"primary"}},Ta={wrapper:"relative z-50",inner:"fixed inset-0 overflow-y-auto",container:"flex min-h-full items-end sm:items-center justify-center text-center",padding:"p-4 sm:p-0",margin:"sm:my-8",base:"relative text-left rtl:text-right flex flex-col",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},background:"bg-white dark:bg-gray-900",ring:"",rounded:"rounded-lg",shadow:"shadow-xl",width:"w-full sm:max-w-lg",height:"",fullscreen:"w-screen h-screen",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}};function yn(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let n=new Set;for(let t of e.value){let s=W(t);s instanceof HTMLElement&&n.add(s)}return n}var bn=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(bn||{});let Xe=Object.assign(H({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:S(new Set)}},inheritAttrs:!1,setup(e,{attrs:n,slots:t,expose:s}){let i=S(null);s({el:i,$el:i});let a=_(()=>Jt(i)),l=S(!1);ae(()=>l.value=!0),Me(()=>l.value=!1),Oa({ownerDocument:a},_(()=>l.value&&!!(e.features&16)));let u=Ua({ownerDocument:a,container:i,initialFocus:_(()=>e.initialFocus)},_(()=>l.value&&!!(e.features&2)));Ba({ownerDocument:a,container:i,containers:e.containers,previousActiveElement:u},_(()=>l.value&&!!(e.features&8)));let r=Bn();function g(k){let w=W(i);w&&(x=>x())(()=>{Be(r.value,{[nt.Forwards]:()=>{st(w,Re.First,{skipElements:[k.relatedTarget]})},[nt.Backwards]:()=>{st(w,Re.Last,{skipElements:[k.relatedTarget]})}})})}let b=S(!1);function $(k){k.key==="Tab"&&(b.value=!0,requestAnimationFrame(()=>{b.value=!1}))}function p(k){if(!l.value)return;let w=yn(e.containers);W(i)instanceof HTMLElement&&w.add(W(i));let x=k.relatedTarget;x instanceof HTMLElement&&x.dataset.headlessuiFocusGuard!=="true"&&(wn(w,x)||(b.value?st(W(i),Be(r.value,{[nt.Forwards]:()=>Re.Next,[nt.Backwards]:()=>Re.Previous})|Re.WrapAround,{relativeTo:k.target}):k.target instanceof HTMLElement&&Ve(k.target)))}return()=>{let k={},w={ref:i,onKeydown:$,onFocusout:p},{features:x,initialFocus:y,containers:c,...m}=e;return fe(Z,[!!(x&4)&&fe(xt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:g,features:$t.Focusable}),Pe({ourProps:w,theirProps:{...n,...m},slot:k,attrs:n,slots:t,name:"FocusTrap"}),!!(x&4)&&fe(xt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:g,features:$t.Focusable})])}}}),{features:bn});function za(e){let n=S(Ht.slice());return ie([e],([t],[s])=>{s===!0&&t===!1?vn(()=>{n.value.splice(0)}):s===!1&&t===!0&&(n.value=Ht.slice())},{flush:"post"}),()=>{var t;return(t=n.value.find(s=>s!=null&&s.isConnected))!=null?t:null}}function Oa({ownerDocument:e},n){let t=za(n);ae(()=>{Ue(()=>{var s,i;n.value||((s=e.value)==null?void 0:s.activeElement)===((i=e.value)==null?void 0:i.body)&&Ve(t())},{flush:"post"})}),Me(()=>{n.value&&Ve(t())})}function Ua({ownerDocument:e,container:n,initialFocus:t},s){let i=S(null),a=S(!1);return ae(()=>a.value=!0),Me(()=>a.value=!1),ae(()=>{ie([n,t,s],(l,u)=>{if(l.every((g,b)=>(u==null?void 0:u[b])===g)||!s.value)return;let r=W(n);r&&vn(()=>{var g,b;if(!a.value)return;let $=W(t),p=(g=e.value)==null?void 0:g.activeElement;if($){if($===p){i.value=p;return}}else if(r.contains(p)){i.value=p;return}$?Ve($):st(r,Re.First|Re.NoScroll)===Un.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),i.value=(b=e.value)==null?void 0:b.activeElement})},{immediate:!0,flush:"post"})}),i}function Ba({ownerDocument:e,container:n,containers:t,previousActiveElement:s},i){var a;Xt((a=e.value)==null?void 0:a.defaultView,"focus",l=>{if(!i.value)return;let u=yn(t);W(n)instanceof HTMLElement&&u.add(W(n));let r=s.value;if(!r)return;let g=l.target;g&&g instanceof HTMLElement?wn(u,g)?(s.value=g,Ve(g)):(l.preventDefault(),l.stopPropagation(),Ve(r)):Ve(s.value)},!0)}function wn(e,n){for(let t of e)if(t.contains(n))return!0;return!1}function ja(e){let n=jn(e.getSnapshot());return Me(e.subscribe(()=>{n.value=e.getSnapshot()})),n}function Ea(e,n){let t=e(),s=new Set;return{getSnapshot(){return t},subscribe(i){return s.add(i),()=>s.delete(i)},dispatch(i,...a){let l=n[i].call(t,...a);l&&(t=l,s.forEach(u=>u()))}}}function Aa(){let e;return{before({doc:n}){var t;let s=n.documentElement;e=((t=n.defaultView)!=null?t:window).innerWidth-s.clientWidth},after({doc:n,d:t}){let s=n.documentElement,i=s.clientWidth-s.offsetWidth,a=e-i;t.style(s,"paddingRight",`${a}px`)}}}function Da(){return En()?{before({doc:e,d:n,meta:t}){function s(i){return t.containers.flatMap(a=>a()).some(a=>a.contains(i))}n.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let u=ct();u.style(e.documentElement,"scrollBehavior","auto"),n.add(()=>n.microTask(()=>u.dispose()))}let a=(i=window.scrollY)!=null?i:window.pageYOffset,l=null;n.addEventListener(e,"click",u=>{if(u.target instanceof HTMLElement)try{let r=u.target.closest("a");if(!r)return;let{hash:g}=new URL(r.href),b=e.querySelector(g);b&&!s(b)&&(l=b)}catch{}},!0),n.addEventListener(e,"touchstart",u=>{if(u.target instanceof HTMLElement)if(s(u.target)){let r=u.target;for(;r.parentElement&&s(r.parentElement);)r=r.parentElement;n.style(r,"overscrollBehavior","contain")}else n.style(u.target,"touchAction","none")}),n.addEventListener(e,"touchmove",u=>{if(u.target instanceof HTMLElement){if(u.target.tagName==="INPUT")return;if(s(u.target)){let r=u.target;for(;r.parentElement&&r.dataset.headlessuiPortal!==""&&!(r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth);)r=r.parentElement;r.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),n.add(()=>{var u;let r=(u=window.scrollY)!=null?u:window.pageYOffset;a!==r&&window.scrollTo(0,a),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function Na(){return{before({doc:e,d:n}){n.style(e.documentElement,"overflow","hidden")}}}function La(e){let n={};for(let t of e)Object.assign(n,t(n));return n}let Le=Ea(()=>new Map,{PUSH(e,n){var t;let s=(t=this.get(e))!=null?t:{doc:e,count:0,d:ct(),meta:new Set};return s.count++,s.meta.add(n),this.set(e,s),this},POP(e,n){let t=this.get(e);return t&&(t.count--,t.meta.delete(n)),this},SCROLL_PREVENT({doc:e,d:n,meta:t}){let s={doc:e,d:n,meta:La(t)},i=[Da(),Aa(),Na()];i.forEach(({before:a})=>a==null?void 0:a(s)),i.forEach(({after:a})=>a==null?void 0:a(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Le.subscribe(()=>{let e=Le.getSnapshot(),n=new Map;for(let[t]of e)n.set(t,t.documentElement.style.overflow);for(let t of e.values()){let s=n.get(t.doc)==="hidden",i=t.count!==0;(i&&!s||!i&&s)&&Le.dispatch(t.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",t),t.count===0&&Le.dispatch("TEARDOWN",t)}});function Va(e,n,t){let s=ja(Le),i=_(()=>{let a=e.value?s.value.get(e.value):void 0;return a?a.count>0:!1});return ie([e,n],([a,l],[u],r)=>{if(!a||!l)return;Le.dispatch("PUSH",a,t);let g=!1;r(()=>{g||(Le.dispatch("POP",u??a,t),g=!0)})},{immediate:!0}),i}let yt=new Map,Ze=new Map;function Wt(e,n=S(!0)){Ue(t=>{var s;if(!n.value)return;let i=W(e);if(!i)return;t(function(){var l;if(!i)return;let u=(l=Ze.get(i))!=null?l:1;if(u===1?Ze.delete(i):Ze.set(i,u-1),u!==1)return;let r=yt.get(i);r&&(r["aria-hidden"]===null?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden",r["aria-hidden"]),i.inert=r.inert,yt.delete(i))});let a=(s=Ze.get(i))!=null?s:0;Ze.set(i,a+1),a===0&&(yt.set(i,{"aria-hidden":i.getAttribute("aria-hidden"),inert:i.inert}),i.setAttribute("aria-hidden","true"),i.inert=!0)})}let kn=Symbol("StackContext");var _t=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(_t||{});function qa(){return je(kn,()=>{})}function Ha({type:e,enabled:n,element:t,onUpdate:s}){let i=qa();function a(...l){s==null||s(...l),i(...l)}ae(()=>{ie(n,(l,u)=>{l?a(0,e,t):u===!0&&a(1,e,t)},{immediate:!0,flush:"sync"})}),Me(()=>{n.value&&a(1,e,t)}),qe(kn,a)}let Wa=Symbol("DescriptionContext");function Qa({slot:e=S({}),name:n="Description",props:t={}}={}){let s=S([]);function i(a){return s.value.push(a),()=>{let l=s.value.indexOf(a);l!==-1&&s.value.splice(l,1)}}return qe(Wa,{register:i,slot:e,name:n,props:t}),_(()=>s.value.length>0?s.value.join(" "):void 0)}var Ka=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ka||{});let Mt=Symbol("DialogContext");function xn(e){let n=je(Mt,null);if(n===null){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,xn),t}return n}let at="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Ya=H({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:at},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:n,attrs:t,slots:s,expose:i}){var a,l;let u=(a=e.id)!=null?a:`headlessui-dialog-${He()}`,r=S(!1);ae(()=>{r.value=!0});let g=!1,b=_(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(g||(g=!0,console.warn(`Invalid role [${b}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),$=S(0),p=Rt(),k=_(()=>e.open===at&&p!==null?(p.value&ce.Open)===ce.Open:e.open),w=S(null),x=_(()=>Jt(w));if(i({el:w,$el:w}),!(e.open!==at||p!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof k.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${k.value===at?void 0:e.open}`);let y=_(()=>r.value&&k.value?0:1),c=_(()=>y.value===0),m=_(()=>$.value>1),h=je(Mt,null)!==null,[d,f]=An(),{resolveContainers:F,mainTreeNodeRef:j,MainTreeNode:N}=Dn({portals:d,defaultContainers:[_(()=>{var q;return(q=ue.panelRef.value)!=null?q:w.value})]}),U=_(()=>m.value?"parent":"leaf"),z=_(()=>p!==null?(p.value&ce.Closing)===ce.Closing:!1),V=_(()=>h||z.value?!1:c.value),ee=_(()=>{var q,E,Y;return(Y=Array.from((E=(q=x.value)==null?void 0:q.querySelectorAll("body > *"))!=null?E:[]).find(le=>le.id==="headlessui-portal-root"?!1:le.contains(W(j))&&le instanceof HTMLElement))!=null?Y:null});Wt(ee,V);let A=_(()=>m.value?!0:c.value),K=_(()=>{var q,E,Y;return(Y=Array.from((E=(q=x.value)==null?void 0:q.querySelectorAll("[data-headlessui-portal]"))!=null?E:[]).find(le=>le.contains(W(j))&&le instanceof HTMLElement))!=null?Y:null});Wt(K,A),Ha({type:"Dialog",enabled:_(()=>y.value===0),element:w,onUpdate:(q,E)=>{if(E==="Dialog")return Be(q,{[_t.Add]:()=>$.value+=1,[_t.Remove]:()=>$.value-=1})}});let X=Qa({name:"DialogDescription",slot:_(()=>({open:k.value}))}),J=S(null),ue={titleId:J,panelRef:S(null),dialogState:y,setTitleId(q){J.value!==q&&(J.value=q)},close(){n("close",!1)}};qe(Mt,ue);let xe=_(()=>!(!c.value||m.value));Zt(F,(q,E)=>{q.preventDefault(),ue.close(),Oe(()=>E==null?void 0:E.focus())},xe);let ye=_(()=>!(m.value||y.value!==0));Xt((l=x.value)==null?void 0:l.defaultView,"keydown",q=>{ye.value&&(q.defaultPrevented||q.key===se.Escape&&(q.preventDefault(),q.stopPropagation(),ue.close()))});let be=_(()=>!(z.value||y.value!==0||h));return Va(x,be,q=>{var E;return{containers:[...(E=q.containers)!=null?E:[],F]}}),Ue(q=>{if(y.value!==0)return;let E=W(w);if(!E)return;let Y=new ResizeObserver(le=>{for(let B of le){let T=B.target.getBoundingClientRect();T.x===0&&T.y===0&&T.width===0&&T.height===0&&ue.close()}});Y.observe(E),q(()=>Y.disconnect())}),()=>{let{open:q,initialFocus:E,...Y}=e,le={...t,ref:w,id:u,role:b.value,"aria-modal":y.value===0?!0:void 0,"aria-labelledby":J.value,"aria-describedby":X.value},B={open:y.value===0};return fe(Lt,{force:!0},()=>[fe(Nn,()=>fe(Ln,{target:w.value},()=>fe(Lt,{force:!1},()=>fe(Xe,{initialFocus:E,containers:F,features:c.value?Be(U.value,{parent:Xe.features.RestoreFocus,leaf:Xe.features.All&~Xe.features.FocusLock}):Xe.features.None},()=>fe(f,{},()=>Pe({ourProps:le,theirProps:{...Y,...t},slot:B,attrs:t,slots:s,visible:y.value===0,features:tt.RenderStrategy|tt.Static,name:"Dialog"})))))),fe(N)])}}}),Ga=H({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:n,slots:t,expose:s}){var i;let a=(i=e.id)!=null?i:`headlessui-dialog-panel-${He()}`,l=xn("DialogPanel");s({el:l.panelRef,$el:l.panelRef});function u(r){r.stopPropagation()}return()=>{let{...r}=e,g={id:a,ref:l.panelRef,onClick:u};return Pe({ourProps:g,theirProps:r,slot:{open:l.dialogState.value===0},attrs:n,slots:t,name:"DialogPanel"})}}});var Ja=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ja||{}),Xa=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Xa||{});function Za(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let $n=Symbol("MenuContext");function mt(e){let n=je($n,null);if(n===null){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,mt),t}return n}let el=H({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:n,attrs:t}){let s=S(1),i=S(null),a=S(null),l=S([]),u=S(""),r=S(null),g=S(1);function b(p=k=>k){let k=r.value!==null?l.value[r.value]:null,w=qn(p(l.value.slice()),y=>W(y.dataRef.domRef)),x=k?w.indexOf(k):null;return x===-1&&(x=null),{items:w,activeItemIndex:x}}let $={menuState:s,buttonRef:i,itemsRef:a,items:l,searchQuery:u,activeItemIndex:r,activationTrigger:g,closeMenu:()=>{s.value=1,r.value=null},openMenu:()=>s.value=0,goToItem(p,k,w){let x=b(),y=$a(p===Se.Specific?{focus:Se.Specific,id:k}:{focus:p},{resolveItems:()=>x.items,resolveActiveIndex:()=>x.activeItemIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.disabled});u.value="",r.value=y,g.value=w??1,l.value=x.items},search(p){let k=u.value!==""?0:1;u.value+=p.toLowerCase();let w=(r.value!==null?l.value.slice(r.value+k).concat(l.value.slice(0,r.value+k)):l.value).find(y=>y.dataRef.textValue.startsWith(u.value)&&!y.dataRef.disabled),x=w?l.value.indexOf(w):-1;x===-1||x===r.value||(r.value=x,g.value=1)},clearSearch(){u.value=""},registerItem(p,k){let w=b(x=>[...x,{id:p,dataRef:k}]);l.value=w.items,r.value=w.activeItemIndex,g.value=1},unregisterItem(p){let k=b(w=>{let x=w.findIndex(y=>y.id===p);return x!==-1&&w.splice(x,1),w});l.value=k.items,r.value=k.activeItemIndex,g.value=1}};return Zt([i,a],(p,k)=>{var w;$.closeMenu(),Hn(k,Wn.Loose)||(p.preventDefault(),(w=W(i))==null||w.focus())},_(()=>s.value===0)),qe($n,$),nn(_(()=>Be(s.value,{0:ce.Open,1:ce.Closed}))),()=>{let p={open:s.value===0,close:$.closeMenu};return Pe({ourProps:{},theirProps:e,slot:p,slots:n,attrs:t,name:"Menu"})}}}),tl=H({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:n,slots:t,expose:s}){var i;let a=(i=e.id)!=null?i:`headlessui-menu-button-${He()}`,l=mt("MenuButton");s({el:l.buttonRef,$el:l.buttonRef});function u($){switch($.key){case se.Space:case se.Enter:case se.ArrowDown:$.preventDefault(),$.stopPropagation(),l.openMenu(),Oe(()=>{var p;(p=W(l.itemsRef))==null||p.focus({preventScroll:!0}),l.goToItem(Se.First)});break;case se.ArrowUp:$.preventDefault(),$.stopPropagation(),l.openMenu(),Oe(()=>{var p;(p=W(l.itemsRef))==null||p.focus({preventScroll:!0}),l.goToItem(Se.Last)});break}}function r($){switch($.key){case se.Space:$.preventDefault();break}}function g($){e.disabled||(l.menuState.value===0?(l.closeMenu(),Oe(()=>{var p;return(p=W(l.buttonRef))==null?void 0:p.focus({preventScroll:!0})})):($.preventDefault(),l.openMenu(),Za(()=>{var p;return(p=W(l.itemsRef))==null?void 0:p.focus({preventScroll:!0})})))}let b=tn(_(()=>({as:e.as,type:n.type})),l.buttonRef);return()=>{var $;let p={open:l.menuState.value===0},{...k}=e,w={ref:l.buttonRef,id:a,type:b.value,"aria-haspopup":"menu","aria-controls":($=W(l.itemsRef))==null?void 0:$.id,"aria-expanded":l.menuState.value===0,onKeydown:u,onKeyup:r,onClick:g};return Pe({ourProps:w,theirProps:k,slot:p,attrs:n,slots:t,name:"MenuButton"})}}}),nl=H({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:n,slots:t,expose:s}){var i;let a=(i=e.id)!=null?i:`headlessui-menu-items-${He()}`,l=mt("MenuItems"),u=S(null);s({el:l.itemsRef,$el:l.itemsRef}),xa({container:_(()=>W(l.itemsRef)),enabled:_(()=>l.menuState.value===0),accept(p){return p.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:p.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(p){p.setAttribute("role","none")}});function r(p){var k;switch(u.value&&clearTimeout(u.value),p.key){case se.Space:if(l.searchQuery.value!=="")return p.preventDefault(),p.stopPropagation(),l.search(p.key);case se.Enter:if(p.preventDefault(),p.stopPropagation(),l.activeItemIndex.value!==null){let w=l.items.value[l.activeItemIndex.value];(k=W(w.dataRef.domRef))==null||k.click()}l.closeMenu(),en(W(l.buttonRef));break;case se.ArrowDown:return p.preventDefault(),p.stopPropagation(),l.goToItem(Se.Next);case se.ArrowUp:return p.preventDefault(),p.stopPropagation(),l.goToItem(Se.Previous);case se.Home:case se.PageUp:return p.preventDefault(),p.stopPropagation(),l.goToItem(Se.First);case se.End:case se.PageDown:return p.preventDefault(),p.stopPropagation(),l.goToItem(Se.Last);case se.Escape:p.preventDefault(),p.stopPropagation(),l.closeMenu(),Oe(()=>{var w;return(w=W(l.buttonRef))==null?void 0:w.focus({preventScroll:!0})});break;case se.Tab:p.preventDefault(),p.stopPropagation(),l.closeMenu(),Oe(()=>Vn(W(l.buttonRef),p.shiftKey?Re.Previous:Re.Next));break;default:p.key.length===1&&(l.search(p.key),u.value=setTimeout(()=>l.clearSearch(),350));break}}function g(p){switch(p.key){case se.Space:p.preventDefault();break}}let b=Rt(),$=_(()=>b!==null?(b.value&ce.Open)===ce.Open:l.menuState.value===0);return()=>{var p,k;let w={open:l.menuState.value===0},{...x}=e,y={"aria-activedescendant":l.activeItemIndex.value===null||(p=l.items.value[l.activeItemIndex.value])==null?void 0:p.id,"aria-labelledby":(k=W(l.buttonRef))==null?void 0:k.id,id:a,onKeydown:r,onKeyup:g,role:"menu",tabIndex:0,ref:l.itemsRef};return Pe({ourProps:y,theirProps:x,slot:w,attrs:n,slots:t,features:tt.RenderStrategy|tt.Static,visible:$.value,name:"MenuItems"})}}}),al=H({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:n,attrs:t,expose:s}){var i;let a=(i=e.id)!=null?i:`headlessui-menu-item-${He()}`,l=mt("MenuItem"),u=S(null);s({el:u,$el:u});let r=_(()=>l.activeItemIndex.value!==null?l.items.value[l.activeItemIndex.value].id===a:!1),g=wa(u),b=_(()=>({disabled:e.disabled,get textValue(){return g()},domRef:u}));ae(()=>l.registerItem(a,b)),Me(()=>l.unregisterItem(a)),Ue(()=>{l.menuState.value===0&&r.value&&l.activationTrigger.value!==0&&Oe(()=>{var c,m;return(m=(c=W(u))==null?void 0:c.scrollIntoView)==null?void 0:m.call(c,{block:"nearest"})})});function $(c){if(e.disabled)return c.preventDefault();l.closeMenu(),en(W(l.buttonRef))}function p(){if(e.disabled)return l.goToItem(Se.Nothing);l.goToItem(Se.Specific,a)}let k=ka();function w(c){k.update(c)}function x(c){k.wasMoved(c)&&(e.disabled||r.value||l.goToItem(Se.Specific,a,0))}function y(c){k.wasMoved(c)&&(e.disabled||r.value&&l.goToItem(Se.Nothing))}return()=>{let{disabled:c,...m}=e,h={active:r.value,disabled:c,close:l.closeMenu};return Pe({ourProps:{id:a,ref:u,role:"menuitem",tabIndex:c===!0?void 0:-1,"aria-disabled":c===!0?!0:void 0,onClick:$,onFocus:p,onPointerenter:w,onMouseenter:w,onPointermove:x,onMousemove:x,onPointerleave:y,onMouseleave:y},theirProps:{...t,...m},slot:h,attrs:t,slots:n,name:"MenuItem"})}}}),ll=Symbol("GroupContext"),ol=H({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(e,{emit:n,attrs:t,slots:s,expose:i}){var a;let l=(a=e.id)!=null?a:`headlessui-switch-${He()}`,u=je(ll,null),[r,g]=Sa(_(()=>e.modelValue),m=>n("update:modelValue",m),_(()=>e.defaultChecked));function b(){g(!r.value)}let $=S(null),p=u===null?$:u.switchRef,k=tn(_(()=>({as:e.as,type:t.type})),p);i({el:p,$el:p});function w(m){m.preventDefault(),b()}function x(m){m.key===se.Space?(m.preventDefault(),b()):m.key===se.Enter&&Ia(m.currentTarget)}function y(m){m.preventDefault()}let c=_(()=>{var m,h;return(h=(m=W(p))==null?void 0:m.closest)==null?void 0:h.call(m,"form")});return ae(()=>{ie([c],()=>{if(!c.value||e.defaultChecked===void 0)return;function m(){g(e.defaultChecked)}return c.value.addEventListener("reset",m),()=>{var h;(h=c.value)==null||h.removeEventListener("reset",m)}},{immediate:!0})}),()=>{let{name:m,value:h,form:d,tabIndex:f,...F}=e,j={checked:r.value},N={id:l,ref:p,role:"switch",type:k.value,tabIndex:f===-1?0:f,"aria-checked":r.value,"aria-labelledby":u==null?void 0:u.labelledby.value,"aria-describedby":u==null?void 0:u.describedby.value,onClick:w,onKeyup:x,onKeypress:y};return fe(Z,[m!=null&&r.value!=null?fe(xt,Qn({features:$t.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:r.value,form:d,disabled:F.disabled,name:m,value:h})):null,Pe({ourProps:N,theirProps:{...t,...an(F,["modelValue","defaultChecked"])},slot:j,attrs:t,slots:s,name:"Switch"})])}}});function sl(e){let n={called:!1};return(...t)=>{if(!n.called)return n.called=!0,e(...t)}}function bt(e,...n){e&&n.length>0&&e.classList.add(...n)}function lt(e,...n){e&&n.length>0&&e.classList.remove(...n)}var Pt=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(Pt||{});function il(e,n){let t=ct();if(!e)return t.dispose;let{transitionDuration:s,transitionDelay:i}=getComputedStyle(e),[a,l]=[s,i].map(u=>{let[r=0]=u.split(",").filter(Boolean).map(g=>g.includes("ms")?parseFloat(g):parseFloat(g)*1e3).sort((g,b)=>b-g);return r});return a!==0?t.setTimeout(()=>n("finished"),a+l):n("finished"),t.add(()=>n("cancelled")),t.dispose}function Qt(e,n,t,s,i,a){let l=ct(),u=a!==void 0?sl(a):()=>{};return lt(e,...i),bt(e,...n,...t),l.nextFrame(()=>{lt(e,...t),bt(e,...s),l.add(il(e,r=>(lt(e,...s,...n),bt(e,...i),u(r))))}),l.add(()=>lt(e,...n,...t,...s,...i)),l.add(()=>u("cancelled")),l.dispose}function Ae(e=""){return e.split(/\s+/).filter(n=>n.length>1)}let Dt=Symbol("TransitionContext");var rl=(e=>(e.Visible="visible",e.Hidden="hidden",e))(rl||{});function ul(){return je(Dt,null)!==null}function dl(){let e=je(Dt,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function cl(){let e=je(Nt,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let Nt=Symbol("NestingContext");function ft(e){return"children"in e?ft(e.children):e.value.filter(({state:n})=>n==="visible").length>0}function Sn(e){let n=S([]),t=S(!1);ae(()=>t.value=!0),Me(()=>t.value=!1);function s(a,l=Ne.Hidden){let u=n.value.findIndex(({id:r})=>r===a);u!==-1&&(Be(l,{[Ne.Unmount](){n.value.splice(u,1)},[Ne.Hidden](){n.value[u].state="hidden"}}),!ft(n)&&t.value&&(e==null||e()))}function i(a){let l=n.value.find(({id:u})=>u===a);return l?l.state!=="visible"&&(l.state="visible"):n.value.push({id:a,state:"visible"}),()=>s(a,Ne.Unmount)}return{children:n,register:i,unregister:s}}let In=tt.RenderStrategy,Cn=H({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:n,attrs:t,slots:s,expose:i}){let a=S(0);function l(){a.value|=ce.Opening,n("beforeEnter")}function u(){a.value&=~ce.Opening,n("afterEnter")}function r(){a.value|=ce.Closing,n("beforeLeave")}function g(){a.value&=~ce.Closing,n("afterLeave")}if(!ul()&&Kn())return()=>fe(_n,{...e,onBeforeEnter:l,onAfterEnter:u,onBeforeLeave:r,onAfterLeave:g},s);let b=S(null),$=_(()=>e.unmount?Ne.Unmount:Ne.Hidden);i({el:b,$el:b});let{show:p,appear:k}=dl(),{register:w,unregister:x}=cl(),y=S(p.value?"visible":"hidden"),c={value:!0},m=He(),h={value:!1},d=Sn(()=>{!h.value&&y.value!=="hidden"&&(y.value="hidden",x(m),g())});ae(()=>{let A=w(m);Me(A)}),Ue(()=>{if($.value===Ne.Hidden&&m){if(p.value&&y.value!=="visible"){y.value="visible";return}Be(y.value,{hidden:()=>x(m),visible:()=>w(m)})}});let f=Ae(e.enter),F=Ae(e.enterFrom),j=Ae(e.enterTo),N=Ae(e.entered),U=Ae(e.leave),z=Ae(e.leaveFrom),V=Ae(e.leaveTo);ae(()=>{Ue(()=>{if(y.value==="visible"){let A=W(b);if(A instanceof Comment&&A.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function ee(A){let K=c.value&&!k.value,X=W(b);!X||!(X instanceof HTMLElement)||K||(h.value=!0,p.value&&l(),p.value||r(),A(p.value?Qt(X,f,F,j,N,J=>{h.value=!1,J===Pt.Finished&&u()}):Qt(X,U,z,V,N,J=>{h.value=!1,J===Pt.Finished&&(ft(d)||(y.value="hidden",x(m),g()))})))}return ae(()=>{ie([p],(A,K,X)=>{ee(X),c.value=!1},{immediate:!0})}),qe(Nt,d),nn(_(()=>Be(y.value,{visible:ce.Open,hidden:ce.Closed})|a.value)),()=>{let{appear:A,show:K,enter:X,enterFrom:J,enterTo:ue,entered:xe,leave:ye,leaveFrom:be,leaveTo:q,...E}=e,Y={ref:b},le={...E,...k.value&&p.value&&Yn.isServer?{class:D([t.class,E.class,...f,...F])}:{}};return Pe({theirProps:le,ourProps:Y,slot:{},slots:s,attrs:t,features:In,visible:y.value==="visible",name:"TransitionChild"})}}}),ml=Cn,_n=H({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:n,attrs:t,slots:s}){let i=Rt(),a=_(()=>e.show===null&&i!==null?(i.value&ce.Open)===ce.Open:e.show);Ue(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let l=S(a.value?"visible":"hidden"),u=Sn(()=>{l.value="hidden"}),r=S(!0),g={show:a,appear:_(()=>e.appear||!r.value)};return ae(()=>{Ue(()=>{r.value=!1,a.value?l.value="visible":ft(u)||(l.value="hidden")})}),qe(Nt,u),qe(Dt,g),()=>{let b=an(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),$={unmount:e.unmount};return Pe({ourProps:{...$,as:"template"},theirProps:{},slot:{},slots:{...s,default:()=>[fe(ml,{onBeforeEnter:()=>n("beforeEnter"),onAfterEnter:()=>n("afterEnter"),onBeforeLeave:()=>n("beforeLeave"),onAfterLeave:()=>n("afterLeave"),...t,...$,...b},s.default)]},attrs:{},features:In,visible:l.value==="visible",name:"Transition"})}}});const wt=Ye(me.ui.strategy,me.ui.dropdown,Xn),fl=H({components:{HMenu:el,HMenuButton:tl,HMenuItems:nl,HMenuItem:al,UIcon:Ie,UAvatar:sn,UKbd:fn},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},openDelay:{type:Number,default:()=>wt.default.openDelay},closeDelay:{type:Number,default:()=>wt.default.closeDelay},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(e,{emit:n}){const{ui:t,attrs:s}=Ke("dropdown",_e(e,"ui"),wt,_e(e,"class")),i=_(()=>it(e.mode==="hover"?{offsetDistance:0}:{},e.popper,t.value.popper)),[a,l]=Zn(i.value),u=S(null);let r=null,g=null;ae(()=>{var m,h;const y=(m=a.value)==null?void 0:m.$.provides;if(!y)return;const c=Object.getOwnPropertySymbols(y);u.value=c.length&&y[c[0]],e.open&&((h=u.value)==null||h.openMenu())});const b=_(()=>{var h,d,f;if(e.mode!=="hover")return{};const y=((h=e.popper)==null?void 0:h.offsetDistance)||((d=t.value.popper)==null?void 0:d.offsetDistance)||8,c=(f=i.value.placement)==null?void 0:f.split("-")[0],m=`${y}px`;return c==="top"||c==="bottom"?{paddingTop:m,paddingBottom:m}:c==="left"||c==="right"?{paddingLeft:m,paddingRight:m}:{paddingTop:m,paddingBottom:m,paddingLeft:m,paddingRight:m}});function $(y){!y.cancelable||!u.value||e.mode==="click"||(u.value.menuState===0?u.value.closeMenu():u.value.openMenu())}function p(){e.mode!=="hover"||!u.value||(g&&(clearTimeout(g),g=null),u.value.menuState!==0&&(r=r||setTimeout(()=>{u.value.openMenu&&u.value.openMenu(),r=null},e.openDelay)))}function k(){e.mode!=="hover"||!u.value||(r&&(clearTimeout(r),r=null),u.value.menuState!==1&&(g=g||setTimeout(()=>{u.value.closeMenu&&u.value.closeMenu(),g=null},e.closeDelay)))}function w(y,c,{href:m,navigate:h,close:d,isExternal:f}){c.click&&c.click(y),m&&!f&&(h(y),d())}ie(()=>e.open,(y,c)=>{u.value&&(c===void 0||y===c||(y?u.value.openMenu():u.value.closeMenu()))}),ie(()=>{var y;return(y=u.value)==null?void 0:y.menuState},(y,c)=>{c===void 0||y===c||n("update:open",y===0)});const x=on;return Ft(()=>Tt()),{ui:t,attrs:s,popper:i,trigger:a,container:l,containerStyle:b,onTouchStart:$,onMouseEnter:p,onMouseLeave:k,onClick:w,getNuxtLinkProps:ea,twMerge:We,twJoin:$e,NuxtLink:x}}}),pl=["disabled"];function vl(e,n,t,s,i,a){const l=ve("HMenuButton"),u=Ie,r=sn,g=fn,b=ve("HMenuItem"),$=on,p=ve("HMenuItems"),k=ve("HMenu");return v(),M(k,ge({as:"div",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:R(({open:w})=>[I(l,{ref:"trigger",as:"div",disabled:e.disabled,class:D(e.ui.trigger),role:"button",onMouseenter:e.onMouseEnter,onTouchstartPassive:e.onTouchStart},{default:R(()=>[ze(e.$slots,"default",{open:w,disabled:e.disabled},()=>[C("button",{disabled:e.disabled}," Open ",8,pl)])]),_:2},1032,["disabled","class","onMouseenter","onTouchstartPassive"]),w&&e.items.length?(v(),O("div",{key:0,ref:"container",class:D([e.ui.container,e.ui.width]),style:ln(e.containerStyle),onMouseenter:n[0]||(n[0]=(...x)=>e.onMouseEnter&&e.onMouseEnter(...x))},[I(Gn,ge({appear:""},e.ui.transition),{default:R(()=>[C("div",null,[e.popper.arrow?(v(),O("div",{key:0,"data-popper-arrow":"",class:D(Object.values(e.ui.arrow))},null,2)):P("",!0),I(p,{class:D([e.ui.base,e.ui.divide,e.ui.ring,e.ui.rounded,e.ui.shadow,e.ui.background,e.ui.height]),static:""},{default:R(()=>[(v(!0),O(Z,null,he(e.items,(x,y)=>(v(),O("div",{key:y,class:D(e.ui.padding)},[(v(!0),O(Z,null,he(x,(c,m)=>(v(),M($,ge({key:m,ref_for:!0},e.getNuxtLinkProps(c),{custom:""}),{default:R(({href:h,target:d,rel:f,navigate:F,isExternal:j,isActive:N})=>[I(b,{disabled:c.disabled},{default:R(({active:U,disabled:z,close:V})=>[(v(),M(Jn(h?"a":"button"),{href:z?void 0:h,rel:f,target:d,class:D(e.twMerge(e.twJoin(e.ui.item.base,e.ui.item.padding,e.ui.item.size,e.ui.item.rounded,U||N?e.ui.item.active:e.ui.item.inactive,z&&e.ui.item.disabled),c.class)),onClick:ee=>e.onClick(ee,c,{href:h,navigate:F,close:V,isExternal:j})},{default:R(()=>[ze(e.$slots,c.slot||"item",{item:c},()=>{var ee;return[c.icon?(v(),M(u,{key:0,name:c.icon,class:D(e.twMerge(e.twJoin(e.ui.item.icon.base,U||N?e.ui.item.icon.active:e.ui.item.icon.inactive),c.iconClass))},null,8,["name","class"])):c.avatar?(v(),M(r,ge({key:1,ref_for:!0},{size:e.ui.item.avatar.size,...c.avatar},{class:e.ui.item.avatar.base}),null,16,["class"])):P("",!0),C("span",{class:D(e.twMerge(e.ui.item.label,c.labelClass))},Q(c.label),3),(ee=c.shortcuts)!=null&&ee.length?(v(),O("span",{key:2,class:D(e.ui.item.shortcuts)},[(v(!0),O(Z,null,he(c.shortcuts,A=>(v(),M(g,{key:A},{default:R(()=>[L(Q(A),1)]),_:2},1024))),128))],2)):P("",!0)]})]),_:2},1032,["href","rel","target","class","onClick"]))]),_:2},1032,["disabled"])]),_:2},1040))),128))],2))),128))]),_:3},8,["class"])])]),_:3},16)],38)):P("",!0)]),_:3},16,["class","onMouseleave"])}const pt=Qe(fl,[["render",vl]]),Te=Ye(me.ui.strategy,me.ui.textarea,ta),gl=H({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(Te.size).includes(e)}},color:{type:String,default:()=>Te.default.color,validator(e){return[...me.ui.colors,...Object.keys(Te.color)].includes(e)}},variant:{type:String,default:()=>Te.default.variant,validator(e){return[...Object.keys(Te.variant),...Object.values(Te.color).flatMap(n=>Object.keys(n))].includes(e)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:n}){const{ui:t,attrs:s}=Ke("textarea",_e(e,"ui"),Te,_e(e,"class")),{emitFormBlur:i,emitFormInput:a,inputId:l,color:u,size:r,name:g}=Bt(e,Te),b=S(it({},e.modelModifiers,{trim:!1,lazy:!1,number:!1,nullify:!1})),$=S(null),p=()=>{var h;e.autofocus&&((h=$.value)==null||h.focus())},k=()=>{if(e.autoresize){if(!$.value)return;$.value.rows=e.rows;const h=$.value.style.overflow;$.value.style.overflow="hidden";const d=window.getComputedStyle($.value),f=Number.parseInt(d.paddingTop),F=Number.parseInt(d.paddingBottom),j=f+F,N=Number.parseInt(d.lineHeight),{scrollHeight:U}=$.value,z=(U-j)/N;z>e.rows&&($.value.rows=e.maxrows?Math.min(z,e.maxrows):z),$.value.style.overflow=h}},w=h=>{b.value.trim&&(h=h.trim()),b.value.number&&(h=na(h)),b.value.nullify&&(h||(h=null)),n("update:modelValue",h),a()},x=h=>{k(),b.value.lazy||w(h.target.value)},y=h=>{const d=h.target.value;n("change",d),b.value.lazy&&w(d),b.value.trim&&(h.target.value=d.trim())},c=h=>{n("blur",h),i()};ae(()=>{setTimeout(()=>{p()},e.autofocusDelay)}),ie(()=>e.modelValue,()=>{Oe(k)}),ae(()=>{setTimeout(()=>{p(),k()},100)});const m=_(()=>{var d,f;const h=((f=(d=t.value.color)==null?void 0:d[u.value])==null?void 0:f[e.variant])||t.value.variant[e.variant];return We($e(t.value.base,t.value.form,t.value.rounded,t.value.placeholder,t.value.size[r.value],e.padded?t.value.padding[r.value]:"p-0",h==null?void 0:h.replaceAll("{color}",u.value),!e.resize&&"resize-none"),e.textareaClass)});return{ui:t,attrs:s,name:g,inputId:l,textarea:$,textareaClass:m,onInput:x,onChange:y,onBlur:c}}}),hl=["id","value","name","rows","required","disabled","placeholder"];function yl(e,n,t,s,i,a){return v(),O("div",{class:D(e.ui.wrapper)},[C("textarea",ge({id:e.inputId,ref:"textarea",value:e.modelValue,name:e.name,rows:e.rows,required:e.required,disabled:e.disabled,placeholder:e.placeholder,class:e.textareaClass},e.attrs,{onInput:n[0]||(n[0]=(...l)=>e.onInput&&e.onInput(...l)),onBlur:n[1]||(n[1]=(...l)=>e.onBlur&&e.onBlur(...l)),onChange:n[2]||(n[2]=(...l)=>e.onChange&&e.onChange(...l))}),null,16,hl),ze(e.$slots,"default")],2)}const bl=Qe(gl,[["render",yl]]);async function wl(e,n){return await kl(n).catch(s=>(console.error("Failed to get image meta for "+n,s+""),{width:0,height:0,ratio:0}))}async function kl(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((n,t)=>{const s=new Image;s.onload=()=>{const i={width:s.width,height:s.height,ratio:s.width/s.height};n(i)},s.onerror=i=>t(i),s.src=e})}function Kt(e){return n=>n?e[n]||n:e.missingValue}function xl({formatter:e,keyMap:n,joinWith:t="/",valueMap:s}={}){e||(e=(a,l)=>`${a}=${l}`),n&&typeof n!="function"&&(n=Kt(n));const i=s||{};return Object.keys(i).forEach(a=>{typeof i[a]!="function"&&(i[a]=Kt(i[a]))}),(a={})=>Object.entries(a).filter(([u,r])=>typeof r<"u").map(([u,r])=>{const g=i[u];return typeof g=="function"&&(r=g(a[u])),u=typeof n=="function"?n(u):u,e(u,r)}).join(t)}function Ce(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function $l(e=""){if(e===void 0||!e.length)return[];const n=new Set;for(const t of e.split(" ")){const s=Number.parseInt(t.replace("x",""));s&&n.add(s)}return Array.from(n)}function Sl(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function Il(e){const n={};if(typeof e=="string")for(const t of e.split(/[\s,]+/).filter(s=>s)){const s=t.split(":");s.length!==2?n["1px"]=s[0].trim():n[s[0].trim()]=s[1].trim()}else Object.assign(n,e);return n}function Cl(e){const n={options:e},t=(i,a={})=>Mn(n,i,a),s=(i,a={},l={})=>t(i,{...l,modifiers:it(a,l.modifiers||{})}).url;for(const i in e.presets)s[i]=(a,l,u)=>s(a,l,{...e.presets[i],...u});return s.options=e,s.getImage=t,s.getMeta=(i,a)=>_l(n,i,a),s.getSizes=(i,a)=>Rl(n,i,a),n.$img=s,s}async function _l(e,n,t){const s=Mn(e,n,{...t});return typeof s.getMeta=="function"?await s.getMeta():await wl(e,s.url)}function Mn(e,n,t){var g,b;if(n&&typeof n!="string")throw new TypeError(`input must be a string (received ${typeof n}: ${JSON.stringify(n)})`);if(!n||n.startsWith("data:"))return{url:n};const{provider:s,defaults:i}=Ml(e,t.provider||e.options.provider),a=Pl(e,t.preset);if(n=Vt(n)?n:aa(n),!s.supportsAlias){for(const $ in e.options.alias)if(n.startsWith($)){const p=e.options.alias[$];p&&(n=St(p,n.slice($.length)))}}if(s.validateDomains&&Vt(n)){const $=la(n).host;if(!e.options.domains.find(p=>p===$))return{url:n}}const l=it(t,a,i);l.modifiers={...l.modifiers};const u=l.modifiers.format;(g=l.modifiers)!=null&&g.width&&(l.modifiers.width=Ce(l.modifiers.width)),(b=l.modifiers)!=null&&b.height&&(l.modifiers.height=Ce(l.modifiers.height));const r=s.getImage(n,l,e);return r.format=r.format||u||"",r}function Ml(e,n){const t=e.options.providers[n];if(!t)throw new Error("Unknown provider: "+n);return t}function Pl(e,n){if(!n)return{};if(!e.options.presets[n])throw new Error("Unknown preset: "+n);return e.options.presets[n]}function Rl(e,n,t){var w,x,y,c,m;const s=Ce((w=t.modifiers)==null?void 0:w.width),i=Ce((x=t.modifiers)==null?void 0:x.height),a=Il(t.sizes),l=(y=t.densities)!=null&&y.trim()?$l(t.densities.trim()):e.options.densities;Sl(l);const u=s&&i?i/s:0,r=[],g=[];if(Object.keys(a).length>=1){for(const h in a){const d=Yt(h,String(a[h]),i,u,e);if(d!==void 0){r.push({size:d.size,screenMaxWidth:d.screenMaxWidth,media:`(max-width: ${d.screenMaxWidth}px)`});for(const f of l)g.push({width:d._cWidth*f,src:Gt(e,n,t,d,f)})}}Fl(r)}else for(const h of l){const d=Object.keys(a)[0];let f=d?Yt(d,String(a[d]),i,u,e):void 0;f===void 0&&(f={size:"",screenMaxWidth:0,_cWidth:(c=t.modifiers)==null?void 0:c.width,_cHeight:(m=t.modifiers)==null?void 0:m.height}),g.push({width:h,src:Gt(e,n,t,f,h)})}Tl(g);const b=g[g.length-1],$=r.length?r.map(h=>`${h.media?h.media+" ":""}${h.size}`).join(", "):void 0,p=$?"w":"x",k=g.map(h=>`${h.src} ${h.width}${p}`).join(", ");return{sizes:$,srcset:k,src:b==null?void 0:b.src}}function Yt(e,n,t,s,i){const a=i.options.screens&&i.options.screens[e]||Number.parseInt(e),l=n.endsWith("vw");if(!l&&/^\d+$/.test(n)&&(n=n+"px"),!l&&!n.endsWith("px"))return;let u=Number.parseInt(n);if(!a||!u)return;l&&(u=Math.round(u/100*a));const r=s?Math.round(u*s):t;return{size:n,screenMaxWidth:a,_cWidth:u,_cHeight:r}}function Gt(e,n,t,s,i){return e.$img(n,{...t.modifiers,width:s._cWidth?s._cWidth*i:void 0,height:s._cHeight?s._cHeight*i:void 0},t)}function Fl(e){var t;e.sort((s,i)=>s.screenMaxWidth-i.screenMaxWidth);let n=null;for(let s=e.length-1;s>=0;s--){const i=e[s];i.media===n&&e.splice(s,1),n=i.media}for(let s=0;s<e.length;s++)e[s].media=((t=e[s+1])==null?void 0:t.media)||""}function Tl(e){e.sort((t,s)=>t.width-s.width);let n=null;for(let t=e.length-1;t>=0;t--){const s=e[t];s.width===n&&e.splice(t,1),n=s.width}}const zl=xl({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,n)=>qt(e)+"_"+qt(n)}),Ol=(e,{modifiers:n={},baseURL:t}={},s)=>{n.width&&n.height&&(n.resize=`${n.width}x${n.height}`,delete n.width,delete n.height);const i=zl(n)||"_";return t||(t=St(s.options.nuxt.baseURL,"/_ipx")),{url:St(t,i,oa(e))}},Ul=!0,Bl=!0,jl=Object.freeze(Object.defineProperty({__proto__:null,getImage:Ol,supportsAlias:Bl,validateDomains:Ul},Symbol.toStringTag,{value:"Module"})),Pn={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"]};Pn.providers={ipxStatic:{provider:jl,defaults:{}}};const vt=()=>{const e=sa(),n=rn();return n.$img||n._img||(n._img=Cl({...Pn,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};function El(e){var n;(n=performance==null?void 0:performance.mark)==null||n.call(performance,"mark_feature_usage",{detail:{feature:e}})}const Al={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},Dl=e=>{const n=_(()=>({provider:e.provider,preset:e.preset})),t=_(()=>({width:Ce(e.width),height:Ce(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),s=vt(),i=_(()=>({...e.modifiers,width:Ce(e.width),height:Ce(e.height),format:e.format,quality:e.quality||s.options.quality,background:e.background,fit:e.fit}));return{options:n,attrs:t,modifiers:i}},Nl={...Al,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1}},Ll=["src"],Ee=H({__name:"NuxtImg",props:Nl,emits:["load","error"],setup(e,{emit:n}){const t=e,s=ia(),i=n,a=!1,l=vt(),u=Dl(t),r=S(!1),g=S(),b=_(()=>l.getSizes(t.src,{...u.options.value,sizes:t.sizes,densities:t.densities,modifiers:{...u.modifiers.value,width:Ce(t.width),height:Ce(t.height)}})),$=_(()=>{const c={...u.attrs.value,"data-nuxt-img":""};return(!t.placeholder||r.value)&&(c.sizes=b.value.sizes,c.srcset=b.value.srcset),c}),p=_(()=>{let c=t.placeholder;if(c===""&&(c=!0),!c||r.value)return!1;if(typeof c=="string")return c;const m=Array.isArray(c)?c:typeof c=="number"?[c,c]:[10,10];return l(t.src,{...u.modifiers.value,width:m[0],height:m[1],quality:m[2]||50,blur:m[3]||3},u.options.value)}),k=_(()=>t.sizes?b.value.src:l(t.src,u.modifiers.value,u.options.value)),w=_(()=>p.value?p.value:k.value),y=rn().isHydrating;return ae(()=>{if(p.value){const c=new Image;k.value&&(c.src=k.value),t.sizes&&(c.sizes=b.value.sizes||"",c.srcset=b.value.srcset),c.onload=m=>{r.value=!0,i("load",m)},El("nuxt-image");return}g.value&&(g.value.complete&&y&&(g.value.getAttribute("data-error")?i("error",new Event("error")):i("load",new Event("load"))),g.value.onload=c=>{i("load",c)},g.value.onerror=c=>{i("error",c)})}),(c,m)=>(v(),O("img",ge({ref_key:"imgEl",ref:g,class:t.placeholder&&!r.value?t.placeholderClass:void 0},{...o(a)?{onerror:"this.setAttribute('data-error', 1)"}:{},...$.value,...o(s)},{src:w.value}),null,16,Ll))}}),ot=Ye(me.ui.strategy,me.ui.range,Fa),Vl=H({inheritAttrs:!1,props:{modelValue:{type:Number,default:0},id:{type:String,default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},size:{type:String,default:null,validator(e){return Object.keys(ot.size).includes(e)}},color:{type:String,default:()=>ot.default.color,validator(e){return me.ui.colors.includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{ui:t,attrs:s}=Ke("range",_e(e,"ui"),ot),{emitFormChange:i,inputId:a,color:l,size:u,name:r}=Bt(e,ot),g=_({get(){return e.modelValue},set(c){n("update:modelValue",c)}}),b=c=>{n("change",c.target.value),i()},$=_(()=>We($e(t.value.wrapper,t.value.size[u.value]),e.class)),p=_(()=>We($e(t.value.base,t.value.background,t.value.rounded,l.value&&t.value.ring.replaceAll("{color}",l.value),t.value.size[u.value]),e.inputClass)),k=_(()=>$e(t.value.thumb.base,l.value&&t.value.thumb.color.replaceAll("{color}",l.value),t.value.thumb.ring,t.value.thumb.background,t.value.thumb.size[u.value])),w=_(()=>$e(t.value.track.base,t.value.track.background,t.value.track.rounded,t.value.track.size[u.value])),x=_(()=>$e(t.value.progress.base,t.value.progress.rounded,l.value&&t.value.progress.background.replaceAll("{color}",l.value),t.value.progress.size[u.value])),y=_(()=>{const{modelValue:c,min:m,max:h}=e;return{width:`${(Math.max(m,Math.min(c,h))-m)/(h-m)*100}%`}});return{ui:t,attrs:s,name:r,inputId:a,value:g,wrapperClass:$,inputClass:p,thumbClass:k,trackClass:w,progressClass:x,progressStyle:y,onChange:b}}}),ql=["id","name","min","max","disabled","step"];function Hl(e,n,t,s,i,a){return v(),O("div",{class:D(e.wrapperClass)},[zt(C("input",ge({id:e.inputId,ref:"input","onUpdate:modelValue":n[0]||(n[0]=l=>e.value=l),name:e.name,min:e.min,max:e.max,disabled:e.disabled,step:e.step,type:"range",class:[e.inputClass,e.thumbClass,e.trackClass]},e.attrs,{onChange:n[1]||(n[1]=(...l)=>e.onChange&&e.onChange(...l))}),null,16,ql),[[ra,e.value,void 0,{number:!0}]]),C("span",{class:D(e.progressClass),style:ln(e.progressStyle)},null,6)],2)}const Rn=Qe(Vl,[["render",Hl]]),Wl={class:"image-mask flex flex-col w-full"},Ql={class:"canvas flex flex-col items-center justify-center mb-3 w-full"},Kl={class:"preview-over-original relative"},Yl={class:"actions flex items-center justify-center mb-3 mx-auto"},Gl={class:"options w-full max-w-[320px]"},Jl=H({__name:"ImageInpaint",props:Ct({imageSrc:{type:String,required:!0}},{imageInpaintMask:{default:"",type:String},imageInpaintMaskModifiers:{},imageInpaintMaskData:{default:{},type:Object},imageInpaintMaskDataModifiers:{}}),emits:["update:imageInpaintMask","update:imageInpaintMaskData"],setup(e){const n=e,t=It(e,"imageInpaintMask"),s=It(e,"imageInpaintMaskData"),i=ke(),a=S(null),l=S(null),u=S(null),r=S(null),g=S(30),b=S([]),$=S({width:i.$state.outputMaxSize,height:i.$state.outputMaxSize}),p=S(null),k=S({x:0,y:0}),w=S({x:0,y:0,radius:g.value,fill:"rgba(255, 255, 255, 0.5)",stroke:null,strokeWidth:0,visible:!1}),x=S(5),y=S(!1),c=S([]),m=S([]);function h(){if(!a.value||!u.value){console.error("Could not get stage, image layer, or mask layer");return}const B=a.value.getNode(),T=r.value?r.value.width:B.width(),G=r.value?r.value.height:B.height(),re=document.createElement("canvas");re.width=T,re.height=G;const te=re.getContext("2d");if(!te){console.error("Could not get 2d context for mask canvas");return}te.fillStyle="black",te.fillRect(0,0,T,G);const we=T/B.width(),ne=G/B.height();te.fillStyle="white",b.value.forEach(Je=>{te.beginPath(),te.arc(Je.x*we,Je.y*ne,Je.radius*Math.max(we,ne),0,Math.PI*2,!0),te.closePath(),te.fill()});const Fe=re.toDataURL("image/png",1);Fe?(z(),t.value=Fe,w.value.visible=!1,y.value=!1):console.error("Could not get data URI for masked image")}function d(B){const T=a.value.getNode();if(B.type.startsWith("touch")){const G=B.evt.touches[0]||B.evt.changedTouches[0];return{x:G.clientX-T.getContainer().offsetLeft,y:G.clientY-T.getContainer().offsetTop}}return T.getPointerPosition()}function f(B){B.type==="mousedown"&&B.evt.button!==0||(y.value=!0,k.value=d(B),U(),F(k.value))}function F(B){const T={x:B.x,y:B.y,radius:g.value,fill:"rgba(255, 255, 255, 1)"};b.value=b.value.filter(G=>!(j({x:G.x,y:G.y},B)+G.radius<=T.radius)),b.value.push(T)}function j(B,T){return Math.sqrt(Math.pow(T.x-B.x,2)+Math.pow(T.y-B.y,2))}function N(B){if(B.type.startsWith("touch")&&B.evt.preventDefault(),ye(B),!y.value)return;const T=d(B);j(k.value,d(B))>=x.value&&(F(T),k.value=T)}function U(){c.value.push([...b.value]),m.value=[]}function z(){s.value={circles:[...b.value],brushRadius:g.value,undoStack:c.value,redoStack:m.value}}function V(){s.value!==null&&(b.value=s.value.circles||[],g.value=s.value.brushRadius||30,c.value=s.value.undoStack||[],m.value=s.value.redoStack||[])}function ee(){c.value.length!==0&&(m.value.push([...b.value]),b.value=c.value.pop()||[])}function A(){m.value.length!==0&&(c.value.push([...b.value]),b.value=m.value.pop()||[])}function K(){y.value=!1}function X(){t.value=""}function J(){U(),b.value=[],t.value=""}const ue=_(()=>c.value.length>0),xe=_(()=>m.value.length>0);function ye(B){const T=d(B);w.value.x=T.x,w.value.y=T.y}function be(){w.value.visible=!1,y.value=!1}function q(){w.value.visible=!0,w.value.radius=g.value}function E(){const B=new Image;B.src=n.imageSrc,B.onload=()=>{r.value=B,Y(),le()}}function Y(){if(!r.value)return;const B=window.innerWidth,T=window.innerHeight,G=r.value.width/r.value.height;let re,te;const we=Math.min(B*.9,1200),ne=Math.min(T*.8,i.outputMaxSize);G>we/ne?(re=we,te=re/G):(te=ne,re=te*G),$.value={width:Math.floor(re),height:Math.floor(te)},le()}function le(){const B=$.value.width,T=$.value.height,G=r.value.width,re=r.value.height,te=B/G,we=T/re,ne=Math.min(te,we);p.value={x:0,y:0,width:G*ne,height:re*ne}}return Ot(()=>{E(),V()}),ae(()=>{if(a.value){const B=a.value.getNode();B.on("touchstart",f),B.on("touchmove",N),B.on("touchend",K),B.on("touchcancel",be)}}),un(()=>{if(a.value){const B=a.value.getNode();B.off("touchstart"),B.off("touchmove"),B.off("touchend"),B.off("touchcancel")}z()}),(B,T)=>{const G=Ee,re=ve("v-image"),te=ve("v-layer"),we=ve("v-circle"),ne=ve("v-stage"),Fe=de,Je=Rn,zn=Et;return v(),O("div",Wl,[C("div",Ql,[T[1]||(T[1]=C("p",{class:"text-sm my-2 text-slate-500"},"Select the target area for image inpaint",-1)),C("div",Kl,[e.imageSrc&&e.imageSrc!==""&&t.value!==""?(v(),M(G,{key:0,src:e.imageSrc,fit:"inside",width:o($).width,height:o($).height,draggable:"false",class:D({absolute:t.value!==""})},null,8,["src","width","height","class"])):P("",!0),t.value?(v(),M(G,{key:1,src:t.value,fit:"inside",width:o($).width,height:o($).height,draggable:"false",class:"opacity-50"},null,8,["src","width","height"])):P("",!0)]),t.value===""?(v(),M(ne,{key:0,ref_key:"stageRef",ref:a,config:o($),onMousedown:f,onMousemove:N,onMouseup:K,onMouseleave:be,onMouseenter:q},{default:R(()=>[I(te,{ref_key:"imageLayerRef",ref:l},{default:R(()=>[I(re,{image:o(r),config:o($)},null,8,["image","config"])]),_:1},512),I(te,{ref_key:"maskLayerRef",ref:u},{default:R(()=>[(v(!0),O(Z,null,he(o(b),(ht,On)=>(v(),M(we,{key:On,config:ht},null,8,["config"]))),128)),o(w).visible?(v(),M(we,{key:0,config:o(w)},null,8,["config"])):P("",!0)]),_:1},512)]),_:1},8,["config"])):P("",!0)]),C("div",Yl,[I(Fe,{class:"mr-2",size:"xs",icon:"i-heroicons-clipboard-document-check-16-solid",variant:"soft",disabled:o(b).length===0||t.value!=="",onClick:h},{default:R(()=>T[2]||(T[2]=[L(" Apply ")])),_:1},8,["disabled"]),I(Fe,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-uturn-left-16-solid",variant:"soft",color:"cyan",disabled:!o(ue)||t.value!=="",onClick:ee},null,8,["disabled"]),I(Fe,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-uturn-right-16-solid",variant:"soft",color:"cyan",disabled:!o(xe)||t.value!=="",onClick:A},null,8,["disabled"]),I(Fe,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-turn-up-left-20-solid",variant:"soft",disabled:o(b).length===0&&t.value==="",color:"red",onClick:J},{default:R(()=>T[3]||(T[3]=[L(" Reset ")])),_:1},8,["disabled"]),I(Fe,{size:"xs",icon:"i-heroicons-pencil-solid",variant:"soft",disabled:t.value==="",color:"orange",onClick:X},{default:R(()=>T[4]||(T[4]=[L(" Edit ")])),_:1},8,["disabled"])]),C("div",Gl,[I(zn,{class:"mb-3 text-sm",hint:`value: ${o(g)}`,label:"Brush radius"},{default:R(()=>[I(Je,{modelValue:o(g),"onUpdate:modelValue":T[0]||(T[0]=ht=>oe(g)?g.value=ht:null),min:1,max:100,size:"sm",class:"my-2",disabled:t.value!==""},null,8,["modelValue","disabled"])]),_:1},8,["hint"])])])}}}),Xl=Ye(me.ui.strategy,me.ui.modal,Ta),Zl=H({components:{HDialog:Ya,HDialogPanel:Ga,TransitionRoot:_n,TransitionChild:Cn},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close","close-prevented","after-leave"],setup(e,{emit:n}){const{ui:t,attrs:s}=Ke("modal",_e(e,"ui"),Xl,_e(e,"class")),i=_({get(){return e.modelValue},set(r){n("update:modelValue",r)}}),a=_(()=>e.transition?{...t.value.transition}:{});function l(r){if(e.preventClose){n("close-prevented");return}i.value=r,n("close")}const u=()=>{n("after-leave")};return Ft(()=>Tt()),{ui:t,attrs:s,isOpen:i,transitionClass:a,onAfterLeave:u,close:l}}});function eo(e,n,t,s,i,a){const l=ve("TransitionChild"),u=ve("HDialogPanel"),r=ve("HDialog"),g=ve("TransitionRoot");return v(),M(g,{appear:e.appear,show:e.isOpen,as:"template",onAfterLeave:e.onAfterLeave},{default:R(()=>[I(r,ge({class:e.ui.wrapper},e.attrs,{onClose:e.close}),{default:R(()=>[e.overlay?(v(),M(l,ge({key:0,as:"template",appear:e.appear},e.ui.overlay.transition,{class:e.ui.overlay.transition.enterFrom}),{default:R(()=>[C("div",{class:D([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear","class"])):P("",!0),C("div",{class:D(e.ui.inner)},[C("div",{class:D([e.ui.container,!e.fullscreen&&e.ui.padding])},[I(l,ge({as:"template",appear:e.appear},e.transitionClass,{class:e.transitionClass.enterFrom}),{default:R(()=>[I(u,{class:D([e.ui.base,e.ui.background,e.ui.ring,e.ui.shadow,e.fullscreen?e.ui.fullscreen:[e.ui.width,e.ui.height,e.ui.rounded,e.ui.margin]])},{default:R(()=>[ze(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear","class"])],2)],2)]),_:3},16,["class","onClose"])]),_:3},8,["appear","show","onAfterLeave"])}const Ge=Qe(Zl,[["render",eo]]),to="0.05";function no(e,n){const t=parseFloat(e);if(isNaN(t))return e;const s=t+n;return s<0?"0":String(Number(s.toFixed(10)))}function ao(e,n){let t=n,s=n,i=0,a=0;for(;t>=0&&(t--,!(e[t]==="("&&i===a));)e[t]==="("&&i++,e[t]===")"&&a++;if(t<0)return!1;for(i=0,a=0;s<e.length&&!(e[s]===")"&&i===a);)e[s]==="("&&i++,e[s]===")"&&a++,s++;return s===e.length?!1:{start:t+1,end:s}}function lo(e){const n=/^\((.*)\)$/,t=e.match(n),s=/:([+-]?(\d*\.)?\d+([eE][+-]?\d+)?)/,i=e.match(s);return t&&!i?`(${t[1]}:1.0)`:e}function oo(e){const n=e.composedPath()[0],t=parseFloat(to);if(n.tagName!=="TEXTAREA"||!(e.key==="ArrowUp"||e.key==="ArrowDown")||!e.ctrlKey&&!e.metaKey)return;e.preventDefault();let s=n.selectionStart,i=n.selectionEnd,a=n.value.substring(s,i);if(!a){const r=ao(n.value,s);if(r)s=r.start,i=r.end,a=n.value.substring(s,i);else{const g=" .,\\/!?%^*;:{}=-_`~()\r\n	";for(;!g.includes(n.value[s-1])&&s>0;)s--;for(;!g.includes(n.value[i])&&i<n.value.length;)i++;if(a=n.value.substring(s,i),!a)return}}a[a.length-1]===" "&&(a=a.substring(0,a.length-1),i-=1),n.value[s-1]==="("&&n.value[i]===")"&&(s-=1,i+=1,a=n.value.substring(s,i)),(a[0]!=="("||a[a.length-1]!==")")&&(a=`(${a})`),a=lo(a);const l=e.key==="ArrowUp"?t:-t,u=a.replace(/\((.*):(\d+(?:\.\d+)?)\)/,(r,g,b)=>(b=no(b,l),Number(b)==1?g:`(${g}:${b})`));return n.setRangeText(u,s,i,"select"),n.value}const so={key:0,class:"text-red-300"},io={key:0,class:"flex items-center"},ro={key:2,class:"flex flex-row flex-grow items-center justify-between"},uo={key:3,class:"flex flex-row flex-grow items-center"},co={class:"sm:inline"},mo={class:"preview-over-original relative"},fo={key:1,class:"text-red-300 text-sm"},po=H({__name:"InputParam",props:{inputParam:{type:Object,required:!0},index:{type:Number,required:!0},inputParamsMap:{type:Array,required:!0},advanced:{type:Boolean,default:!1}},setup(e){const n=e,t=S(!1),s=S(null),i=S(""),a=S({width:0,height:0}),l=S(""),u=S({}),r=S(null),g=n.inputParamsMap[n.index][n.inputParam.name].source_input_name,b=n.inputParamsMap.findIndex(d=>{if(Object.keys(d)[0]===n.inputParamsMap[n.index][n.inputParam.name].source_input_name)return!0});function $(){try{const d=n.inputParamsMap.find(f=>{const F=Object.keys(f)[0];if(F===g)return f[F]});y(d[g].value)}catch{a.value.width=0,a.value.height=0}}ae(()=>{n.inputParam.type==="range_scale"&&$(),n.inputParam.type==="image-mask"&&ie(l,d=>{const f=new File([l.value],`image-mask-${n.inputParam.name}.png`,{type:"image/png"});n.inputParamsMap[n.index][n.inputParam.name].value=f,n.inputParamsMap[n.index][n.inputParam.name].mask_applied=d!==""})}),n.inputParam.type==="range_scale"&&ie(n.inputParamsMap,()=>{$()});function p(d){return d?URL.createObjectURL(d):""}function k(){URL.revokeObjectURL(i.value),i.value="",s.value&&(s.value.$refs.input.value=""),n.inputParamsMap[n.index][n.inputParam.name].value=null,n.inputParamsMap[n.index][n.inputParam.name].image_preview_url=""}function w(){URL.revokeObjectURL(l.value),l.value="",u.value={},n.inputParamsMap[n.index][n.inputParam.name].value=null,n.inputParamsMap[n.index][n.inputParam.name].mask_applied=!1}const x=_(()=>n.inputParam.type!=="bool"?n.inputParam.display_name:"");function y(d){if(!(d instanceof File)){a.value.width=0,a.value.height=0;return}const f=URL.createObjectURL(d),F=new Image;F.onload=function(){a.value.width=F.naturalWidth,a.value.height=F.naturalHeight,URL.revokeObjectURL(F.src)},F.src=f}const c=_(()=>{if(n.inputParam.type==="range_scale"){const d=n.inputParamsMap[n.index][n.inputParam.name].value;return`value: ${d}x (${a.value.width}x${a.value.height} -> ${(a.value.width*d).toFixed(0)}x${(a.value.height*d).toFixed(0)})`}return["range","range_scale"].includes(n.inputParam.type)?`value: ${n.inputParamsMap[n.index][n.inputParam.name].value}`:""}),m=S(null);function h(d){const f=oo(d);f&&(n.inputParamsMap[n.index][n.inputParam.name].value=f)}return ae(()=>{n.inputParam.type==="text"&&m.value&&m.value.$refs.textarea.addEventListener("keydown",h),n.inputParam.type==="image-mask"&&(r.value=n.inputParamsMap[b][g],ie(n.inputParamsMap[b][g],d=>{l.value="",u.value={},r.value=d}))}),un(()=>{URL.revokeObjectURL(i.value),URL.revokeObjectURL(l.value),n.inputParam.type==="text"&&m.value&&m.value.$refs.textarea.removeEventListener("keydown",h)}),(d,f)=>{var J;const F=bl,j=jt,N=de,U=Ee,z=Jl,V=Ge,ee=gn,A=At,K=Rn,X=Et;return(((J=e.inputParam)==null?void 0:J.advanced)||!1)===e.advanced?(v(),M(X,{key:0,label:o(x),class:"mb-3",help:o(c)},{hint:R(()=>[e.inputParam.optional?P("",!0):(v(),O("span",so,"required"))]),default:R(()=>{var ue,xe,ye,be,q;return[e.inputParam.type==="text"?(v(),M(F,{key:0,ref_key:"textareaInput",ref:m,size:"md",placeholder:e.inputParam.display_name,required:!e.inputParam.optional,resize:!0,label:e.inputParam.display_name,value:e.inputParamsMap[e.index][e.inputParam.name].value,autoresize:"",variant:"outline",onInput:f[0]||(f[0]=E=>{const Y=E.target;e.inputParamsMap[e.index][e.inputParam.name].value=Y.value})},null,8,["placeholder","required","label","value"])):P("",!0),e.inputParam.type==="number"?(v(),O(Z,{key:1},[e.inputParam.name==="seed"?(v(),O("div",io,[e.inputParam.type==="number"?(v(),M(j,{key:0,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":f[1]||(f[1]=E=>e.inputParamsMap[e.index][e.inputParam.name].value=E),type:"number",label:e.inputParam.display_name,required:!e.inputParam.optional,max:e.inputParam.max||100,min:e.inputParam.min||0,variant:"outline"},null,8,["modelValue","label","required","max","min"])):P("",!0),I(N,{icon:"i-heroicons-arrow-path",color:"violet",variant:"outline",size:"xs",class:"ml-2",onClick:f[2]||(f[2]=()=>{e.inputParamsMap[e.index][e.inputParam.name].value=Math.floor(Math.random()*1e7)})})])):(v(),M(j,{key:1,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":f[3]||(f[3]=E=>e.inputParamsMap[e.index][e.inputParam.name].value=E),type:"number",label:e.inputParam.display_name,required:!e.inputParam.optional,max:e.inputParam.max||100,min:e.inputParam.min||0,variant:"outline"},null,8,["modelValue","label","required","max","min"]))],64)):P("",!0),e.inputParam.type==="image"?(v(),O("div",ro,[I(j,{ref_key:"imageInput",ref:s,type:"file",accept:"image/*",class:"w-full",variant:"outline",color:"gray",label:e.inputParam.display_name,onChange:f[4]||(f[4]=E=>{console.debug("files",E);const Y=E==null?void 0:E[0];e.inputParamsMap[e.index][e.inputParam.name].value=Y,i.value=p(Y),e.inputParamsMap[e.index][e.inputParam.name].image_preview_url=o(i),console.debug("inputParamsMap",e.inputParamsMap)})},null,8,["label"]),o(i)!==""?(v(),M(U,{key:0,src:o(l)?o(l):o(i),class:"h-10 rounded-lg cursor-pointer ml-2",onClick:f[5]||(f[5]=()=>{t.value=!0})},null,8,["src"])):P("",!0),o(i)!==""?(v(),M(N,{key:1,icon:"i-heroicons-x-mark",variant:"outline",class:"ml-2",onClick:k})):P("",!0)])):P("",!0),e.inputParam.type==="image-mask"?(v(),O("div",uo,[o(r)?(v(),M(N,{key:0,icon:"i-heroicons-paint-brush-16-solid",class:"mr-2",color:"violet",variant:"outline",size:"xs",disabled:!((ue=o(r))!=null&&ue.value),onClick:f[6]||(f[6]=()=>{t.value=!0})},{default:R(()=>[C("span",co,Q(o(l)!==""?"Edit mask":"Draw mask"),1)]),_:1},8,["disabled"])):P("",!0),C("div",mo,[o(r)&&((xe=o(r))!=null&&xe.value)?(v(),M(U,{key:0,src:(ye=o(r))==null?void 0:ye.image_preview_url,class:D(["h-10 rounded-lg cursor-pointer",{absolute:o(l)!==""}]),onClick:f[7]||(f[7]=()=>{t.value=!0})},null,8,["src","class"])):P("",!0),o(l)?(v(),M(U,{key:1,src:o(l),class:"h-10 rounded-lg cursor-pointer opacity-50",onClick:f[8]||(f[8]=()=>{t.value=!0})},null,8,["src"])):P("",!0)]),!o(r)||o(r)&&!((be=o(r))!=null&&be.value)?(v(),O("span",fo," Select source image ")):P("",!0),o(l)?(v(),M(N,{key:2,icon:"i-heroicons-x-mark",variant:"outline",color:"violet",class:"ml-2",onClick:w})):P("",!0)])):P("",!0),e.inputParam.type==="image"||e.inputParam.type==="image-mask"?(v(),M(V,{key:4,modelValue:o(t),"onUpdate:modelValue":f[13]||(f[13]=E=>oe(t)?t.value=E:null),class:"z-[90] overflow-y-auto",transition:!1,fullscreen:""},{default:R(()=>{var E;return[I(N,{class:"absolute top-4 right-4 z-[100]",icon:"i-heroicons-x-mark",variant:"ghost",onClick:f[9]||(f[9]=()=>t.value=!1)}),e.inputParam.type==="image"?(v(),O("div",{key:0,class:"flex items-center justify-center w-full h-full p-4",onClick:f[10]||(f[10]=rt(()=>t.value=!1,["left"]))},[I(U,{class:"lg:h-full",fit:"inside",src:o(i)},null,8,["src"])])):(v(),M(z,{key:1,ref:"imageInpaint","image-inpaint-mask":o(l),"onUpdate:imageInpaintMask":f[11]||(f[11]=Y=>oe(l)?l.value=Y:null),"image-inpaint-mask-data":o(u),"onUpdate:imageInpaintMaskData":f[12]||(f[12]=Y=>oe(u)?u.value=Y:null),class:"flex items-center justify-center w-full h-full p-4","image-src":(E=o(r))==null?void 0:E.image_preview_url},null,8,["image-inpaint-mask","image-inpaint-mask-data","image-src"]))]}),_:1},8,["modelValue"])):P("",!0),e.inputParam.type==="list"?(v(),M(ee,{key:5,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":f[14]||(f[14]=E=>e.inputParamsMap[e.index][e.inputParam.name].value=E),placeholder:e.inputParam.display_name,options:Object.keys(e.inputParam.options)},null,8,["modelValue","placeholder","options"])):P("",!0),e.inputParam.type==="bool"?(v(),M(A,{key:6,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":f[15]||(f[15]=E=>e.inputParamsMap[e.index][e.inputParam.name].value=E),label:(q=e.inputParam)==null?void 0:q.display_name},null,8,["modelValue","label"])):P("",!0),["range","range_scale"].includes(e.inputParam.type)?(v(),M(K,{key:7,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":f[16]||(f[16]=E=>e.inputParamsMap[e.index][e.inputParam.name].value=E),label:e.inputParam.display_name,size:"sm",min:e.inputParam.min,max:e.inputParam.max,step:e.inputParam.step},null,8,["modelValue","label","min","max","step"])):P("",!0)]}),_:1},8,["label","help"])):P("",!0)}}}),vo={key:0,class:"heading"},go={key:1},ho=H({__name:"InputParams",props:{inputParamsMap:{type:Array,required:!0},additionalInputParamsMap:{type:Array,required:!1,default:[]},advanced:{type:Boolean,default:!1}},setup(e){const n=e,t=ke(),s=S(!n.advanced);return(i,a)=>{const l=Ie,u=po;return v(),O(Z,null,[e.advanced?(v(),O("div",vo,[C("h4",{class:"text-md font-bold cursor-pointer select-none flex items-center mb-3",onClick:a[0]||(a[0]=()=>{s.value=!o(s)})},[I(l,{name:o(s)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"mr-2"},null,8,["name"]),a[1]||(a[1]=L(" Advanced options "))])])):P("",!0),o(s)?(v(),O("div",go,[(v(!0),O(Z,null,he(o(t).currentFlow.input_params,(r,g)=>(v(),M(u,{key:g,"input-params-map":e.inputParamsMap,index:g,"input-param":r,advanced:e.advanced},null,8,["input-params-map","index","input-param","advanced"]))),128)),(v(!0),O(Z,null,he(e.additionalInputParamsMap,(r,g)=>(v(),M(u,{key:Object.keys(r)[0],"input-params-map":e.additionalInputParamsMap,index:g,"input-param":r[Object.keys(r)[0]],advanced:e.advanced},null,8,["input-params-map","index","input-param","advanced"]))),128))])):P("",!0)],64)}}}),yo={key:0,id:"prompt",class:"w-full my-10 lg:my-0 p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg"},bo={class:"action flex items-center"},wo=H({__name:"Prompt",setup(e,{expose:n}){var y,c,m,h;const t=ke();let s=localStorage.getItem(`input_params_map_${(y=t.currentFlow)==null?void 0:y.name}`);if(s){const d=JSON.parse(s);"flow_version"in d&&d.flow_version.split(".")[0]===((c=t.currentFlow)==null?void 0:c.version.split(".")[0])?s=d:(s=null,localStorage.removeItem(`input_params_map_${(m=t.currentFlow)==null?void 0:m.name}`))}const i=S(((h=t.currentFlow)==null?void 0:h.input_params.map(d=>{var f;if(d.type==="text")return{[d.name]:{value:s!==null&&s[d.name]?s[d.name]:d.default||"",type:d.type,optional:d.optional,advanced:d.advanced||!1,default:d.default||"",translatable:d.translatable||!1}};if(d.type==="number")return{[d.name]:{value:s!==null&&s[d.name]?s[d.name]:d.default||0,type:d.type,optional:d.optional,advanced:d.advanced||!1,default:d.default||0}};if(d.type==="image")return{[d.name]:{value:null,type:d.type,optional:d.optional,advanced:d.advanced||!1}};if(d.type==="image-mask")return{[d.name]:{value:null,type:d.type,optional:d.optional,advanced:d.advanced||!1,source_input_name:d.source_input_name||null}};if(d.type==="list")return{[d.name]:{value:s!==null&&s[d.name]?s[d.name]:d.default||Object.keys(d.options)[0]||"",type:d.type,optional:d.optional,options:d.options,advanced:d.advanced||!1,default:Object.keys(d.options)[0]||""}};if(d.type==="bool")return{[d.name]:{value:s!==null&&s[d.name]?s[d.name]:d.default||!1,type:d.type,optional:d.optional,advanced:d.advanced||!1,default:d.default||!1}};if(["range","range_scale"].includes(d.type)){const F={value:s!==null&&s[d.name]?s[d.name]:d.default||0,type:d.type,optional:d.optional,advanced:d.advanced||!1,min:d.min||0,max:d.max||100,step:d.step||1,default:d.default||0};if(d.type==="range_scale"&&(F.source_input_name=d.source_input_name||null,F.source_input_name===null||F.source_input_name==="")){const j=(f=t.currentFlow)==null?void 0:f.input_params.find(N=>N.type==="image"&&!N.optional);j&&(F.source_input_name=j.name)}return{[d.name]:F}}}))||[]),a=S([]);t.currentFlow.is_seed_supported&&a.value.push({seed:{name:"seed",display_name:"Random seed",value:Math.floor(Math.random()*1e7),type:"number",optional:!0,advanced:!0,min:0,max:1e7}});const l=ua(),u=S(t.currentFlow.is_translations_supported&&l.settingsMap.translations_provider.value.trim()!==""),r=S(u.value);Ot(()=>{const d=localStorage.getItem("translatePrompt");d&&(r.value=JSON.parse(d))}),ie(r,d=>{localStorage.setItem("translatePrompt",JSON.stringify(d))});function g(d){console.debug("Copy prompt inputs",d),Object.keys(d).forEach(F=>{const j=i.value.findIndex(N=>Object.keys(N)[0]===F);j!==-1&&(i.value[j][F].value=d[F].value)});const f=document.getElementById("prompt");f&&f.scrollIntoView({behavior:"smooth"})}n({copyPromptInputs:g}),i.value.forEach(d=>{const f=Object.keys(d)[0];["image","image-mask"].includes(d[f].type)||ie(()=>d[f].value,()=>{var j,N;const F={};i.value.forEach(U=>{const z=Object.keys(U)[0];F[z]=U[z].value}),localStorage.setItem(`input_params_map_${(j=t.currentFlow)==null?void 0:j.name}`,JSON.stringify({...F,flow_version:(N=t.currentFlow)==null?void 0:N.version}))})});const b=_(()=>i.value.filter(d=>{const f=Object.keys(d)[0];return!["image","image-mask"].includes(d[f].type)}).some(d=>{const f=Object.keys(d)[0];return d[f].value!==d[f].default}));function $(){i.value.forEach(d=>{const f=Object.keys(d)[0];d[f].type==="text"?d[f].value=d[f].default||"":d[f].type==="number"?d[f].value=d[f].default||d[f].min||0:d[f].type==="list"?d[f].value=Object.keys(d[f].options)[0]||"":d[f].type==="bool"?d[f].value=d[f].default||!1:["range","range_scale"].includes(d[f].type)&&(d[f].value=d[f].default||d[f].min||0)})}const p=S(!1),k=S(1),w=S(!1),x=_(()=>i.value.every(d=>{var j;const f=Object.keys(d)[0];if(d[f].optional)return!0;const F=d[f].value;if(d[f].type==="text")return F!=="";if(d[f].type==="number")return F>=d[f].min&&F<=d[f].max;if(d[f].type==="list")return F!==""&&Object.keys(d[f].options).includes(F);if(d[f].type==="bool")return!0;if(d[f].type==="range")return F>=d[f].min&&F<=d[f].max;if(d[f].type==="range_scale")return F>=d[f].min&&F<=d[f].max;if(d[f].type==="image")return F instanceof File&&F.size>0;if(d[f].type==="image-mask")return F instanceof File&&F.size>0&&(((j=d[f])==null?void 0:j.mask_applied)||!1)}));return(d,f)=>{const F=Ie,j=ho,N=jt,U=Et,z=At,V=de,ee=dt;return o(t).currentFlow?(v(),O("div",yo,[C("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center mb-3",onClick:f[0]||(f[0]=()=>{w.value=!o(w)})},[I(F,{name:o(w)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),f[8]||(f[8]=L(" Prompt "))]),zt(C("div",null,[I(j,{"input-params-map":o(i),"onUpdate:inputParamsMap":f[1]||(f[1]=A=>oe(i)?i.value=A:null),"additional-input-params-map":o(a),"onUpdate:additionalInputParamsMap":f[2]||(f[2]=A=>oe(a)?a.value=A:null),advanced:!1},null,8,["input-params-map","additional-input-params-map"]),o(a).length>0?(v(),M(j,{key:0,"input-params-map":o(i),"onUpdate:inputParamsMap":f[3]||(f[3]=A=>oe(i)?i.value=A:null),"additional-input-params-map":o(a),"onUpdate:additionalInputParamsMap":f[4]||(f[4]=A=>oe(a)?a.value=A:null),advanced:!0},null,8,["input-params-map","additional-input-params-map"])):P("",!0),o(t).currentFlow.is_count_supported?(v(),M(U,{key:1,label:"Number of results"},{default:R(()=>[I(N,{modelValue:o(k),"onUpdate:modelValue":f[5]||(f[5]=A=>oe(k)?k.value=A:null),type:"number",min:"1",max:"50",label:"Batch size",class:"mb-3 max-w-fit flex justify-end"},null,8,["modelValue"])]),_:1})):P("",!0),o(u)?(v(),M(U,{key:2,class:"my-3 flex justify-end"},{default:R(()=>[I(z,{modelValue:o(r),"onUpdate:modelValue":f[6]||(f[6]=A=>oe(r)?r.value=A:null),label:"Translate prompt"},null,8,["modelValue"])]),_:1})):P("",!0),C("div",{class:D(["flex",{"justify-between":o(b),"justify-end":!o(b)}])},[o(b)?(v(),M(ee,{key:0,text:"Reset input params values to defaults"},{default:R(()=>[I(V,{icon:"i-heroicons-arrow-path-rounded-square",variant:"ghost",color:"amber",onClick:$},{default:R(()=>f[9]||(f[9]=[L(" Reset params ")])),_:1})]),_:1})):P("",!0),C("div",bo,[I(V,{icon:"i-heroicons-sparkles-16-solid",variant:"outline",loading:o(p),disabled:!o(x),onClick:f[7]||(f[7]=()=>{p.value=!0,o(t).runFlow(o(t).currentFlow,[...o(i),...o(a)],o(k),o(u)&&o(r)).finally(()=>{p.value=!1;const A=o(a).find(K=>Object.keys(K)[0]==="seed");A.seed.value=Number(A.seed.value)+o(k)+1})})},{default:R(()=>f[10]||(f[10]=[L(" Run prompt ")])),_:1},8,["loading","disabled"])])],2)],512),[[dn,!o(w)]])])):P("",!0)}}}),ko=e=>{const n=S(0);function t(a){e.value.style.scrollSnapType="none",e.value.style.scrollBehavior="auto",n.value=a.pageX,window.addEventListener("mousemove",i),window.addEventListener("mouseup",s)}function s(){e.value.style.removeProperty("scroll-behavior"),e.value.style.removeProperty("scroll-snap-type"),e.value.style.removeProperty("pointer-events"),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s)}function i(a){a.preventDefault(),e.value.style.pointerEvents="none";const l=a.pageX-n.value;n.value=a.pageX,e.value.scrollBy(-l,0)}ae(()=>{e.value&&e.value.addEventListener("mousedown",t)}),Me(()=>{e.value&&e.value.removeEventListener("mousedown",t)})},kt=Ye(me.ui.strategy,me.ui.carousel,Pa),xo=H({components:{UButton:de},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},arrows:{type:Boolean,default:!1},indicators:{type:Boolean,default:!1},dir:{type:String,default:"ltr"},prevButton:{type:Object,default:()=>kt.default.prevButton},nextButton:{type:Object,default:()=>kt.default.nextButton},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:void 0}},setup(e,{expose:n}){const{ui:t,attrs:s}=Ke("carousel",_e(e,"ui"),kt,_e(e,"class")),i=S(),a=S(0),{x:l}=da(i,{behavior:"smooth"}),{width:u}=ca(i);ko(i),ma(i,y=>{var m,h;const[c]=y;a.value=((h=(m=c==null?void 0:c.target)==null?void 0:m.firstElementChild)==null?void 0:h.clientWidth)||0});const r=_(()=>e.dir==="rtl"),g=_(()=>a.value?r.value?Math.round(-l.value/a.value)+1:Math.round(l.value/a.value)+1:0),b=_(()=>{if(!a.value)return 0;const y=Math.round(u.value/a.value);return e.items.length<=y?0:e.items.length-y+1}),$=_(()=>g.value<=1),p=_(()=>g.value===b.value);function k(){l.value+=r.value?-a.value:a.value}function w(){l.value-=r.value?-a.value:a.value}function x(y){l.value=(y-1)*a.value*(r.value?-1:1)}return n({pages:b,page:g,prev:w,next:k,select:x}),{ui:t,attrs:s,isFirst:$,isLast:p,carouselRef:i,pages:b,currentPage:g,onClickNext:k,onClickPrev:w,onClick:x,twMerge:We}}}),$o=["dir"],So=["role"],Io=["aria-selected","aria-label","onClick"];function Co(e,n,t,s,i,a){const l=de;return v(),O("div",ge({class:e.ui.wrapper},e.attrs,{dir:e.dir}),[C("div",{ref:"carouselRef",class:D([e.ui.container,"no-scrollbar"])},[(v(!0),O(Z,null,he(e.items,(u,r)=>(v(),O("div",{key:r,class:D(e.ui.item),role:e.indicators?"tabpanel":null},[ze(e.$slots,"default",{item:u,index:r},void 0,!0)],10,So))),128))],2),e.arrows?(v(),O("div",{key:0,class:D(e.ui.arrows.wrapper)},[ze(e.$slots,"prev",{onClick:e.onClickPrev,disabled:e.isFirst},()=>{var u;return[e.prevButton?(v(),M(l,ge({key:0,disabled:e.isFirst},{...e.ui.default.prevButton,...e.prevButton},{class:e.twMerge(e.ui.default.prevButton.class,(u=e.prevButton)==null?void 0:u.class),"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["disabled","class","onClick"])):P("",!0)]},!0),ze(e.$slots,"next",{onClick:e.onClickNext,disabled:e.isLast},()=>{var u;return[e.nextButton?(v(),M(l,ge({key:0,disabled:e.isLast},{...e.ui.default.nextButton,...e.nextButton},{class:e.twMerge(e.ui.default.nextButton.class,(u=e.nextButton)==null?void 0:u.class),"aria-label":"Next",onClick:e.onClickNext}),null,16,["disabled","class","onClick"])):P("",!0)]},!0)],2)):P("",!0),e.indicators?(v(),O("div",{key:1,role:"tablist",class:D(e.ui.indicators.wrapper)},[(v(!0),O(Z,null,he(e.pages,u=>ze(e.$slots,"indicator",{key:u,onClick:e.onClick,active:u===e.currentPage,page:u},()=>[C("button",{type:"button",role:"tab","aria-selected":u===e.currentPage,class:D([e.ui.indicators.base,u===e.currentPage?e.ui.indicators.active:e.ui.indicators.inactive]),"aria-label":`set slide ${u}`,onClick:r=>e.onClick(u)},null,10,Io)],!0)),128))],2)):P("",!0)],16,$o)}const gt=Qe(xo,[["render",Co],["__scopeId","data-v-5fdb8633"]]),_o={class:"flex flex-col basis-full"},Mo=H({__name:"InputFiles",props:{running:{type:Object,required:!0}},setup(e){const n=vt(),t=function(u,r){return`${et()}/tasks/inputs?task_id=${u}&input_index=${r}`},s=S(!1),i=S(""),a=S(0),l=S(!0);return(u,r)=>{var w,x,y,c,m;const g=Ie,b=Ee,$=gt,p=de,k=Ge;return e.running&&e.running.input_files&&((w=Object.keys(e.running.input_files))==null?void 0:w.length)>0?(v(),O("div",{key:0,class:D(["ml-2 mt-2 mb-5",{"mb-10":((x=Object.keys(e.running.input_files))==null?void 0:x.length)>1&&!o(l)}])},[C("h4",{class:"mb-3 font-bold cursor-pointer select-none flex items-center text-sm",onClick:r[0]||(r[0]=()=>l.value=!o(l))},[I(g,{name:o(l)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),C("span",null," Input files ("+Q((y=Object.keys(e.running.input_files))==null?void 0:y.length)+") ",1)]),o(l)?P("",!0):(v(),O(Z,{key:0},[((c=Object.keys(e.running.input_files))==null?void 0:c.length)===1?(v(),M(b,{key:0,class:"mb-5 rounded-lg cursor-pointer",fit:"outside",loading:"lazy",placeholder:o(n)(`${("buildBackendApiUrl"in u?u.buildBackendApiUrl:o(et))()}/vix_logo.png`,{f:"png",blur:3,q:50}),src:t(e.running.task_id,0),onClick:r[1]||(r[1]=()=>{i.value=t(e.running.task_id,0),a.value=0,s.value=!0})},null,8,["placeholder","src"])):P("",!0),((m=Object.keys(e.running.input_files))==null?void 0:m.length)>1?(v(),M($,{key:1,items:Object.keys(e.running.input_files).map(h=>({task_id:e.running.task_id,index:h})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4"}},page:1,indicators:""},{default:R(({item:h})=>[C("div",_o,[I(b,{class:"rounded-lg cursor-pointer",fit:"outside",loading:"lazy",placeholder:o(n)(`${("buildBackendApiUrl"in u?u.buildBackendApiUrl:o(et))()}/vix_logo.png`,{f:"png",blur:3,q:50}),src:t(h.task_id,h.index),onClick:()=>{i.value=t(e.running.task_id,h.index),a.value=h.index,s.value=!0}},null,8,["placeholder","src","onClick"])])]),_:1},8,["items"])):P("",!0),I(k,{modelValue:o(s),"onUpdate:modelValue":r[4]||(r[4]=h=>oe(s)?s.value=h:null),class:"z-[90]",transition:!1,fullscreen:""},{default:R(()=>[I(p,{class:"absolute top-4 right-4",icon:"i-heroicons-x-mark",variant:"ghost",onClick:r[2]||(r[2]=()=>s.value=!1)}),C("div",{class:"flex items-center justify-center w-full h-full p-4",onClick:r[3]||(r[3]=rt(()=>s.value=!1,["left"]))},[o(i)?(v(),M(b,{key:0,class:"lg:h-full",fit:"inside",loading:"lazy",placeholder:"/vix_logo.png",src:o(i)},null,8,["src"])):P("",!0)])]),_:1},8,["modelValue"])],64))],2)):P("",!0)}}}),Po=H({__name:"ErrorAlert",props:{running:{type:Object,required:!0}},setup(e){const n=ke(),t=S(!1);return(s,i)=>{const a=hn;return v(),M(a,{class:"mb-5",icon:"i-heroicons-exclamation-circle-16-solid",color:"red",variant:"soft",title:"Task failed",description:e.running.error,actions:[{variant:"outline",color:"yellow",label:"Restart",loading:o(t),icon:"i-heroicons-arrow-path",click:()=>{t.value=!0,o(n).restartFlow(s.$props.running).finally(()=>{t.value=!1})}}]},null,8,["description","actions"])}}}),Ro={class:"mb-5"},Fo={class:"text-sm mb-5 text-slate-500"},To={class:"flex justify-between"},zo=H({__name:"Item",props:{running:{type:Object,required:!0}},setup(e){const n=ke(),t=S(!1),s=S(!1);function i(a){return[[{label:"Comfy flow",labelClass:"text-blue-500",icon:"i-heroicons-arrow-down-tray",iconClass:"bg-blue-500",click:()=>{var l;return n.downloadFlowComfy((l=n.currentFlow)==null?void 0:l.name,a.task_id)}}],[{label:`Raise priority ${a.priority>0?`(${a.priority})`:""}`,labelClass:"text-gray-500",icon:"i-heroicons-arrow-up",iconClass:"bg-gray-500",disabled:a.priority===15||a.progress>0,click:()=>{s.value=!0,n.raiseQueuePriority(a).finally(()=>{s.value=!1})}},{label:`Lower priority ${a.priority>0?`(${a.priority})`:""}`,labelClass:"text-gray-500",icon:"i-heroicons-arrow-down",iconClass:"bg-gray-500",disabled:a.priority===0||a.progress>0,click:()=>{s.value=!0,n.lowerQueuePriority(a).finally(()=>{s.value=!1})}},{label:`Reset priority ${a.priority>0?`(${a.priority})`:""}`,labelClass:"text-gray-500",icon:"i-heroicons-arrow-path-rounded-square-solid",iconClass:"bg-gray-500",disabled:a.priority===0||a.progress>0,click:()=>{s.value=!0,n.resetQueuePriority(a).finally(()=>{s.value=!1})}}]]}return(a,l)=>{var p,k;const u=pn,r=Mo,g=Po,b=de,$=pt;return v(),O("div",Ro,[I(u,{class:"mb-3",value:(p=e.running)==null?void 0:p.progress,indicator:"",color:e.running.error?"red":"green"},null,8,["value","color"]),C("p",Fo,Q([`${(k=e.running)!=null&&k.priority&&e.running.priority>0?"["+e.running.priority+"] ":""}#${e.running.task_id}`,...Object.keys(e.running.input_params_mapped).filter(w=>e.running.input_params_mapped[w].value&&e.running.input_params_mapped[w].value!=="").map(w=>`${e.running.input_params_mapped[w].display_name}: ${e.running.input_params_mapped[w].value}`)].join(" | ")+`${e.running.execution_time?" | execution_time: "+e.running.execution_time.toFixed(2)+"s":""}`),1),I(r,{running:e.running},null,8,["running"]),e.running.error?(v(),M(g,{key:0,running:e.running},null,8,["running"])):P("",!0),C("div",To,[I(b,{icon:e.running.progress>=0&&e.running.progress<100?"i-heroicons-stop":"i-heroicons-minus-circle",color:e.running.error?"red":"orange",variant:"outline",loading:o(t),onClick:l[0]||(l[0]=()=>{t.value=!0,o(n).cancelRunningFlow(e.running).finally(()=>{t.value=!1})})},{default:R(()=>[L(Q(e.running.progress>=0&&e.running.progress<100?"Cancel":"Remove"),1)]),_:1},8,["icon","color","loading"]),I($,{items:i(e.running),mode:"click",popper:{placement:"bottom-end"}},{default:R(()=>[I(b,{color:"blue",variant:"outline",icon:"i-heroicons-ellipsis-vertical-16-solid"})]),_:1},8,["items"])])])}}}),Oo={class:"w-full p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg shadow-md mt-5 mb-10"},Uo={class:"flex items-center justify-between mb-2"},Bo={key:0},jo={key:1,class:"text-red-400"},Eo=H({__name:"Queue",setup(e){const n=ke(),t=S(!0),s=S(!1);return(i,a)=>{var g,b,$,p,k,w,x,y,c;const l=Ie,u=de,r=zo;return v(),O("div",Oo,[C("div",Uo,[C("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center",onClick:a[0]||(a[0]=()=>{t.value=!o(t)})},[I(l,{name:o(t)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),C("span",null," Queue ("+Q(o(n).flowsRunningByName((g=o(n).currentFlow)==null?void 0:g.name).length)+") ",1),o(n).flowsRunningByName((b=o(n).currentFlow)==null?void 0:b.name).length>0?(v(),O("span",Bo,"  - "+Q(`${((p=o(n).flowsRunningByName(($=o(n).currentFlow)==null?void 0:$.name).filter(m=>m.progress>0)[0])==null?void 0:p.progress.toFixed(0))??0}%`),1)):P("",!0),o(n).flowsRunningByNameWithErrors((k=o(n))==null?void 0:k.currentFlow.name).length>0?(v(),O("span",jo,"  ("+Q(o(n).flowsRunningByNameWithErrors((w=o(n).currentFlow)==null?void 0:w.name).length)+") ",1)):P("",!0)]),(x=o(n).currentFlow)!=null&&x.name&&o(n).flowsRunningByName((y=o(n).currentFlow)==null?void 0:y.name).length>0?(v(),M(u,{key:0,icon:"i-heroicons-stop",color:"orange",variant:"outline",loading:o(s),onClick:a[1]||(a[1]=()=>{var m;s.value=!0,o(n).cancelRunningFlows((m=o(n).currentFlow)==null?void 0:m.name).finally(()=>{s.value=!1})})},{default:R(()=>a[2]||(a[2]=[L(" Cancel all ")])),_:1},8,["loading"])):P("",!0)]),o(t)?P("",!0):(v(!0),O(Z,{key:0},he(o(n).flowsRunningByName((c=o(n).currentFlow)==null?void 0:c.name),m=>(v(),M(r,{key:m.task_id,running:m},null,8,["running"]))),128))])}}}),Ao=H({__name:"ScrollToTop",props:{show:{type:Boolean,required:!0},target:{type:String,required:!0}},setup(e){const n=e;function t(){const s=document.getElementById(n.target);s&&s.scrollIntoView({behavior:"smooth"})}return(s,i)=>{const a=de;return e.show?(v(),M(a,{key:0,icon:"i-heroicons-arrow-small-up",color:"black",variant:"outline",onClick:t})):P("",!0)}}}),De=Ye(me.ui.strategy,me.ui.toggle,Ra),Do=H({components:{HSwitch:ol,UIcon:Ie},inheritAttrs:!1,props:{id:{type:String,default:null},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},onIcon:{type:String,default:()=>De.default.onIcon},offIcon:{type:String,default:()=>De.default.offIcon},loadingIcon:{type:String,default:()=>De.default.loadingIcon},color:{type:String,default:()=>De.default.color,validator(e){return me.ui.colors.includes(e)}},size:{type:String,default:()=>De.default.size,validator(e){return Object.keys(De.size).includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{ui:t,attrs:s}=Ke("toggle",_e(e,"ui"),De),{emitFormChange:i,color:a,inputId:l,name:u}=Bt(e),r=_({get(){return e.modelValue},set(w){n("update:modelValue",w),n("change",w),i()}}),g=_(()=>We($e(t.value.base,t.value.size[e.size],t.value.rounded,a.value&&t.value.ring.replaceAll("{color}",a.value),a.value&&(r.value?t.value.active:t.value.inactive).replaceAll("{color}",a.value)),e.class)),b=_(()=>$e(t.value.container.base,t.value.container.size[e.size],r.value?t.value.container.active[e.size]:t.value.container.inactive)),$=_(()=>$e(t.value.icon.size[e.size],a.value&&t.value.icon.on.replaceAll("{color}",a.value))),p=_(()=>$e(t.value.icon.size[e.size],a.value&&t.value.icon.off.replaceAll("{color}",a.value))),k=_(()=>$e(t.value.icon.size[e.size],a.value&&t.value.icon.loading.replaceAll("{color}",a.value)));return Ft(()=>Tt()),{ui:t,attrs:s,name:u,inputId:l,active:r,switchClass:g,containerClass:b,onIconClass:$,offIconClass:p,loadingIconClass:k}}});function No(e,n,t,s,i,a){const l=Ie,u=ve("HSwitch");return v(),M(u,ge({id:e.inputId,modelValue:e.active,"onUpdate:modelValue":n[0]||(n[0]=r=>e.active=r),name:e.name,disabled:e.disabled||e.loading,class:e.switchClass},e.attrs),{default:R(()=>[C("span",{class:D(e.containerClass)},[e.loading?(v(),O("span",{key:0,class:D([e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[I(l,{name:e.loadingIcon,class:D(e.loadingIconClass)},null,8,["name","class"])],2)):P("",!0),!e.loading&&e.onIcon?(v(),O("span",{key:1,class:D([e.active?e.ui.icon.active:e.ui.icon.inactive,e.ui.icon.base]),"aria-hidden":"true"},[I(l,{name:e.onIcon,class:D(e.onIconClass)},null,8,["name","class"])],2)):P("",!0),!e.loading&&e.offIcon?(v(),O("span",{key:2,class:D([e.active?e.ui.icon.inactive:e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[I(l,{name:e.offIcon,class:D(e.offIconClass)},null,8,["name","class"])],2)):P("",!0)],2)]),_:1},16,["id","modelValue","name","disabled","class"])}const Lo=Qe(Do,[["render",No]]);function Fn(e={}){const{copy:n,isSupported:t}=fa(),s=ut();function i(a,l={},u={}){t&&n(a).then(()=>{!l.title&&!l.description||s.add({...l,...e})},function(r){s.add({...u,description:u.description||r.message,...e})})}return{copy:i}}const Vo={class:"flex flex-col items-center mb-2 max-w-fit mx-auto z-0"},qo={class:"text-slate-500 text-center text-sm w-full mx-auto flex flex-wrap items-center justify-center md:justify-between"},Ho={class:"toggles py-2"},Wo={class:"mr-2 inline-flex items-center text-sm"},Qo=["for"],Ko={class:"mr-2 inline-flex items-center text-sm"},Yo=["for"],Go={key:0,class:"flex items-center"},Jo=["title"],Xo=H({__name:"Child",props:{flowResult:{type:Object,required:!0},outputsIndex:{type:Number,required:!1,default:()=>0},openImageModal:{type:Function,required:!0}},setup(e){const n=e,t=ke(),s=(m,h=null,d=!1)=>{if(m.child_tasks.length===0)return m;const f=m.child_tasks.findIndex(F=>F.parent_task_node_id===h);return f!==-1?(d||(a.value=m),s(m.child_tasks[f],m.child_tasks[f].outputs[0].comfy_node_id,d)):m};function i(m,h,d=null){if(d!==null&&m.parent_task_node_id===d||Number(m.task_id)===h)return m;for(let f=0;f<m.child_tasks.length;f++)for(let F=0;F<m.child_tasks[f].outputs.length;F++){const j=i(m.child_tasks[f],h,m.child_tasks[f].outputs[F].comfy_node_id);if(j!==null)return j}return null}const a=S(n.flowResult),l=S(s(n.flowResult,n.flowResult.outputs[n.outputsIndex].comfy_node_id,!1));function u(m){var h;return[[{label:`${(h=t.flowByName((m==null?void 0:m.flow_name)??(m==null?void 0:m.name)))==null?void 0:h.display_name}#${m.task_id}`,disabled:!0}],[{label:"View image",icon:"i-heroicons-eye",click:()=>{n.openImageModal(pe({task_id:m.task_id,node_id:m.outputs.length>1?m.outputs[n.outputsIndex].comfy_node_id:m.outputs[0].comfy_node_id}))}}]]}function r(m){var d;const h=[[{label:`${(d=t.flowByName((m==null?void 0:m.flow_name)??(m==null?void 0:m.name)))==null?void 0:d.display_name}#${m.task_id}`,disabled:!0}],[{label:"View image",icon:"i-heroicons-eye",disabled:m.progress<100||m.error!=="",click:()=>{n.openImageModal(pe({task_id:m.task_id,node_id:m.outputs.length>1?m.outputs[n.outputsIndex].comfy_node_id:m.outputs[0].comfy_node_id}))}},{label:m.progress<100?"Cancel":"Delete",labelClass:m.progress<100?"text-orange-500":"text-red-500",icon:m.progress<100?"i-heroicons-stop":"i-heroicons-trash",iconClass:m.progress<100?"bg-orange-500":"bg-red-500",click:()=>{t.deleteFlowHistory(m.task_id).then(()=>{const f=i(n.flowResult,m.parent_task_id,m.parent_task_node_id);f&&(f.child_tasks=f.child_tasks.filter(F=>Number(F.task_id)!==Number(m.task_id))),w(!1,n.flowResult)})}}]];return m.progress<100&&(h[0][1]={label:`Progress: ${Math.ceil(m.progress)}% (${m.execution_time.toFixed(2)}s)`,labelClass:"text-blue-500",disabled:!0}),m.error!==""&&h[0].push({label:`Error: ${m.error}`,labelClass:"text-red-500",slot:"error",click:()=>{Fn().copy(m.error),ut().add({title:"Clipboard",description:`Task #${m.task_id} error copied to clipboard`,timeout:2e3})}}),h}function g(){const m=a.value.parent_task_id;if(!m)return;const h=i(n.flowResult,m,a.value.parent_task_node_id);h&&(a.value=h)}function b(){if(a.value.child_tasks.length===0)return;const m=a.value.outputs.length>1?a.value.outputs[n.outputsIndex].comfy_node_id:a.value.outputs[0].comfy_node_id,h=a.value.child_tasks.find(d=>d.parent_task_node_id===m);h&&(a.value=h)}const $=_(()=>{if(a.value.child_tasks.length===0)return;const m=a.value.outputs.length>1?a.value.outputs[n.outputsIndex].comfy_node_id:a.value.outputs[0].comfy_node_id;return a.value.child_tasks.find(d=>d.parent_task_node_id===m).task_id!==l.value.task_id});function p(){const m=l.value.parent_task_id;if(!m)return;const h=i(n.flowResult,m,l.value.parent_task_node_id);h&&(l.value=h)}function k(){if(l.value.child_tasks.length===0)return;const m=Number(l.value.outputs[0].comfy_node_id),h=l.value.child_tasks.find(d=>Number(d.parent_task_node_id)===m);h&&(l.value=h)}function w(m=!1,h=null){m||(a.value=h),l.value=s(h,h==null?void 0:h.outputs[n.outputsIndex].comfy_node_id,m),x.value=!1}ie(n.flowResult,m=>{w(!0,m)});const x=S(!1),y=S(!0),c=S(null);return ie(x,m=>{m?(c.value=a.value,a.value=n.flowResult):c.value&&(a.value=c.value,l.value=cn(c.value,n.outputsIndex,a.value.outputs.length>1?a.value.outputs[n.outputsIndex].comfy_node_id:a.value.outputs[0].comfy_node_id))}),(m,h)=>{const d=Ee,f=ve("ImgComparisonSlider"),F=Lo,j=de,N=pt,U=Ie,z=dt;return v(),O("div",Vo,[zt(I(d,{class:"mb-2 rounded-lg cursor-pointer",height:o(t).outputMaxSize,width:o(t).outputMaxSize,draggable:"false",fit:"cover",loading:"lazy",src:("outputResultSrc"in m?m.outputResultSrc:o(pe))({task_id:o(l).progress===100?o(l).task_id:e.flowResult.task_id,node_id:o(l).progress===100?o(l).outputs[0].comfy_node_id:e.flowResult.outputs[e.outputsIndex].comfy_node_id}),onClick:h[0]||(h[0]=V=>e.openImageModal(("outputResultSrc"in m?m.outputResultSrc:o(pe))({task_id:o(l).task_id??e.flowResult.task_id,node_id:o(l).outputs[0].comfy_node_id??e.flowResult.outputs[e.outputsIndex].comfy_node_id})))},null,8,["height","width","src"]),[[dn,!o(y)]]),o(y)?(v(),M(f,{key:0,class:"mb-2 mx-auto outline-none w-fit rounded-lg"},{default:R(()=>{var V,ee,A;return[I(d,{slot:"first",height:o(t).outputMaxSize,width:o(t).outputMaxSize,fit:"cover",draggable:"false",src:("outputResultSrc"in m?m.outputResultSrc:o(pe))({task_id:o(x)?e.flowResult.task_id:o(a).task_id,node_id:o(x)?e.flowResult.outputs[e.outputsIndex].comfy_node_id:o(a).parent_task_node_id!==null?(V=o(a))==null?void 0:V.outputs[0].comfy_node_id:((ee=o(a))==null?void 0:ee.outputs[e.outputsIndex].comfy_node_id)??((A=o(a))==null?void 0:A.outputs[0].comfy_node_id)})},null,8,["height","width","src"]),o(l)&&o(l).progress===100?(v(),M(d,{key:0,slot:"second",height:o(t).outputMaxSize,width:o(t).outputMaxSize,fit:"cover",draggable:"false",src:("outputResultSrc"in m?m.outputResultSrc:o(pe))({task_id:o(l).task_id,node_id:o(l).outputs[0].comfy_node_id})},null,8,["height","width","src"])):(v(),M(d,{key:1,slot:"second",height:o(t).outputMaxSize,width:o(t).outputMaxSize,fit:"cover",draggable:"false",src:`${("buildBackendUrl"in m?m.buildBackendUrl:o(pa))()}/vix_logo.png`},null,8,["height","width","src"]))]}),_:1})):P("",!0),C("div",qo,[C("div",Ho,[C("div",Wo,[I(F,{id:`toggle-compare-${e.flowResult.task_id}-${e.outputsIndex}`,modelValue:o(y),"onUpdate:modelValue":h[1]||(h[1]=V=>oe(y)?y.value=V:null),size:"xs",class:"mr-2"},null,8,["id","modelValue"]),C("label",{class:"cursor-pointer select-none",for:`toggle-compare-${e.flowResult.task_id}-${e.outputsIndex}`}," Comparison ",8,Qo)]),C("div",Ko,[I(F,{id:`toggle-original-${e.flowResult.task_id}-${e.outputsIndex}`,modelValue:o(x),"onUpdate:modelValue":h[2]||(h[2]=V=>oe(x)?x.value=V:null),disabled:!o(y),size:"xs",class:"mr-2"},null,8,["id","modelValue","disabled"]),C("label",{class:"cursor-pointer select-none",for:`toggle-original-${e.flowResult.task_id}-${e.outputsIndex}`}," Original ",8,Yo)])]),o(y)?(v(),O("div",Go,[I(j,{icon:"i-heroicons-arrow-small-left-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:o(x)||o(a).parent_task_id===null,onClick:g},null,8,["disabled"]),I(N,{items:u(o(a)),mode:"click",popper:{placement:"top"}},{default:R(()=>[I(j,{variant:"link",color:"white",size:"xs"},{default:R(()=>[L(" #"+Q(o(x)?e.flowResult.task_id:o(a).task_id),1)]),_:1})]),_:1},8,["items"]),I(j,{icon:"i-heroicons-arrow-small-right-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:o(x)||!o($),onClick:b},null,8,["disabled"]),I(U,{class:"mx-3",name:"i-heroicons-arrows-right-left-16-solid"}),I(j,{icon:"i-heroicons-arrow-small-left-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:!i(n.flowResult,o(l).parent_task_id,o(l).parent_task_node_id)||o(l).parent_task_id===Number(o(a).task_id)||o(l).parent_task_id===null,onClick:p},null,8,["disabled"]),I(N,{items:r(o(l)),mode:"click",popper:{placement:"top"}},{error:R(({item:V})=>[C("div",{class:"text-red-500 truncate",title:V.label},Q(V.label),9,Jo)]),default:R(()=>[I(j,{class:D({"text-blue-500":o(l).progress!==100&&o(l).error==="","text-red-500":o(l).error!==""}),variant:"link",color:"white",size:"xs"},{default:R(()=>[L(Q(o(l).progress===100?"#"+o(l).task_id:Math.ceil(o(l).progress)+"%"),1)]),_:1},8,["class"])]),_:1},8,["items"]),I(j,{icon:"i-heroicons-arrow-small-right-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:o(l).child_tasks.length===0,onClick:k},null,8,["disabled"]),I(z,{class:"ml-3",text:"Reset comparison",popper:{placement:"top"}},{default:R(()=>[I(j,{icon:"i-heroicons-arrow-path-rounded-square-solid",size:"2xs",variant:"outline",color:"white",onClick:h[3]||(h[3]=()=>w(!1,e.flowResult))})]),_:1})])):P("",!0)])])}}}),Zo={class:"w-full h-full p-4"},es={class:"mb-3 font-bold select-none flex items-center justify-center text-lg w-full"},ts={class:"flex flex-col basis-full"},Tn=H({__name:"InputFiles",props:{flowResult:{type:Object,required:!0}},setup(e){const n=ke(),t=vt(),s=(u,r)=>`${et()}/tasks/inputs?task_id=${u}&input_index=${r}`,i=S(!1),a=S(""),l=S(0);return(u,r)=>{const g=Ie,b=Ee,$=gt,p=de,k=Ge;return v(),M(k,{modelValue:e.flowResult.showInputFiles,"onUpdate:modelValue":r[4]||(r[4]=w=>e.flowResult.showInputFiles=w),io:""},{default:R(()=>{var w,x,y;return[C("div",Zo,[C("h2",es,[I(g,{name:"i-heroicons-document-solid",cla:"",ss:"mr-2"}),C("span",null," #"+Q(e.flowResult.task_id)+" Input files ("+Q((w=Object.keys(e.flowResult.input_files))==null?void 0:w.length)+") ",1)]),((x=Object.keys(e.flowResult.input_files))==null?void 0:x.length)===1?(v(),M(b,{key:0,class:"mb-5 rounded-lg cursor-pointer",height:o(n).$state.outputMaxSize,width:o(n).$state.outputMaxSize,fit:"cover",loading:"lazy",placeholder:o(t)(`${("buildBackendApiUrl"in u?u.buildBackendApiUrl:o(et))()}/vix_logo.png`,{f:"png",blur:3,q:50}),src:s(e.flowResult.task_id,0),onClick:r[0]||(r[0]=()=>{a.value=s(e.flowResult.task_id,0),l.value=0,i.value=!0})},null,8,["height","width","placeholder","src"])):P("",!0),((y=Object.keys(e.flowResult.input_files))==null?void 0:y.length)>1?(v(),M($,{key:1,items:Object.keys(e.flowResult.input_files).map(c=>({task_id:e.flowResult.task_id,index:c})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4"}},page:1,indicators:""},{default:R(({item:c})=>[C("div",ts,[I(b,{class:D(`mb-2 h-100 max-h-[${o(n).$state.outputMaxSize}px] mx-auto rounded-lg cursor-pointer`),fit:"cover",loading:"lazy",draggable:"false",height:o(n).$state.outputMaxSize,width:o(n).$state.outputMaxSize,src:s(c.task_id,c.index),onClick:()=>{a.value=s(e.flowResult.task_id,c.index),l.value=c.index,i.value=!0}},null,8,["class","height","width","src","onClick"])])]),_:1},8,["items"])):P("",!0),I(k,{modelValue:o(i),"onUpdate:modelValue":r[3]||(r[3]=c=>oe(i)?i.value=c:null),class:"z-[90]",transition:!1,fullscreen:""},{default:R(()=>[I(p,{class:"absolute top-4 right-4",icon:"i-heroicons-x-mark",variant:"ghost",onClick:r[1]||(r[1]=()=>i.value=!1)}),C("div",{class:"flex items-center justify-center w-full h-full p-4",onClick:r[2]||(r[2]=rt(()=>i.value=!1,["left"]))},[o(a)?(v(),M(b,{key:0,class:"lg:h-full",fit:"inside",loading:"lazy",placeholder:"/vix_logo.png",src:o(a)},null,8,["src"])):P("",!0)])]),_:1},8,["modelValue"])])]}),_:1},8,["modelValue"])}}}),ns={class:"image-output"},as={class:"flex flex-col basis-full justify-between mx-2"},ls=H({__name:"Image",props:{flowResult:{type:Object,required:!0},handleSendToFlow:{type:Function,required:!0},openImageModal:{type:Function,required:!0}},setup(e){const n=ke();return(t,s)=>{var g,b;const i=Xo,a=Ee,l=de,u=gt,r=Tn;return v(),O("div",ns,[e.flowResult.outputs.length===1?(v(),O(Z,{key:0},[(g=e.flowResult)!=null&&g.child_tasks&&((b=e.flowResult)==null?void 0:b.child_tasks.length)>0?(v(),M(i,{key:0,"flow-result":e.flowResult,"open-image-modal":e.openImageModal},null,8,["flow-result","open-image-modal"])):e.flowResult.outputs.length===1?(v(),M(a,{key:1,class:"mb-2 mx-auto rounded-lg cursor-pointer",height:o(n).$state.outputMaxSize,width:o(n).$state.outputMaxSize,draggable:"false",fit:"cover",loading:"lazy",src:("outputResultSrc"in t?t.outputResultSrc:o(pe))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id}),onClick:s[0]||(s[0]=$=>e.openImageModal(("outputResultSrc"in t?t.outputResultSrc:o(pe))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id})))},null,8,["height","width","src"])):P("",!0)],64)):e.flowResult.outputs.length>1?(v(),M(u,{key:1,class:"mb-3 rounded-lg overflow-hidden",items:e.flowResult.outputs.map(($,p)=>({task_id:e.flowResult.task_id,node_id:$.comfy_node_id,index:p})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4 md:hidden"}},page:1,indicators:""},{default:R(({item:$})=>{var p;return[C("div",as,[(p=e.flowResult)!=null&&p.child_tasks&&("hasChildTaskByParentTaskNodeId"in t?t.hasChildTaskByParentTaskNodeId:o(mn))(e.flowResult,$.index,$.node_id)?(v(),M(i,{key:0,"flow-result":e.flowResult,"outputs-index":$.index,"open-image-modal":e.openImageModal},null,8,["flow-result","outputs-index","open-image-modal"])):(v(),M(a,{key:1,class:D(`mb-2 h-100 max-h-[${o(n).$state.outputMaxSize}px] mx-auto rounded-lg cursor-pointer`),draggable:"false",height:o(n).$state.outputMaxSize,width:o(n).$state.outputMaxSize,fit:"cover",loading:"lazy",src:("outputResultSrc"in t?t.outputResultSrc:o(pe))($),onClick:k=>e.openImageModal(("outputResultSrc"in t?t.outputResultSrc:o(pe))($))},null,8,["class","height","width","src","onClick"])),I(l,{class:"mt-2 w-fit mx-auto",icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",size:"xs",variant:"outline",onClick:()=>{e.handleSendToFlow(e.flowResult,$.index)}},{default:R(()=>s[1]||(s[1]=[L(" Send to flow ")])),_:2},1032,["onClick"])])]}),_:1},8,["items"])):P("",!0),I(r,{"flow-result":e.flowResult},null,8,["flow-result"])])}}}),os={class:"image-output"},ss=["width","height"],is=["src"],rs={class:"flex flex-col basis-full justify-between mx-2"},us=["width","height"],ds=["src"],cs=H({__name:"Video",props:{flowResult:{type:Object,required:!0},handleSendToFlow:{type:Function,required:!0},openImageModal:{type:Function,required:!0}},setup(e){const n=ke();return(t,s)=>{const i=de,a=gt,l=Tn;return v(),O("div",os,[e.flowResult.outputs.length===1?(v(),O("video",{key:0,controls:"",class:"mb-2 mx-auto rounded-lg",width:o(n).$state.outputMaxSize,height:o(n).$state.outputMaxSize},[C("source",{src:("outputResultSrc"in t?t.outputResultSrc:o(pe))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id})},null,8,is)],8,ss)):e.flowResult.outputs.length>1?(v(),M(a,{key:1,class:"mb-3 rounded-lg overflow-hidden",items:e.flowResult.outputs.map((u,r)=>({task_id:e.flowResult.task_id,node_id:u.comfy_node_id,index:r})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4 md:hidden"}},page:1,indicators:""},{default:R(({item:u})=>[C("div",rs,[C("video",{controls:"",class:"mb-2 mx-auto rounded-lg",width:o(n).$state.outputMaxSize,height:o(n).$state.outputMaxSize},[C("source",{src:("outputResultSrc"in t?t.outputResultSrc:o(pe))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id})},null,8,ds)],8,us),I(i,{class:"mt-2 w-fit mx-auto",icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",size:"xs",variant:"outline",onClick:()=>{e.handleSendToFlow(e.flowResult,u.index)}},{default:R(()=>s[0]||(s[0]=[L(" Send to flow ")])),_:2},1032,["onClick"])])]),_:1},8,["items"])):P("",!0),I(l,{"flow-result":e.flowResult},null,8,["flow-result"])])}}}),ms=H({__name:"Params",props:{flowResult:{type:Object,required:!0}},setup(e){const n=e,t=S(!1),s=_(()=>["#"+n.flowResult.task_id,...Object.keys(n.flowResult.input_params_mapped).filter(i=>n.flowResult.input_params_mapped[i].value&&n.flowResult.input_params_mapped[i].value!=="").map(i=>t.value&&n.flowResult.translated_input_params_mapped&&n.flowResult.translated_input_params_mapped[i]?`${n.flowResult.input_params_mapped[i].display_name}: ${n.flowResult.translated_input_params_mapped[i].value}`:`${n.flowResult.input_params_mapped[i].display_name}: ${n.flowResult.input_params_mapped[i].value}`)].join(" | ")+`${n.flowResult.execution_time?" | execution_time: "+n.flowResult.execution_time.toFixed(2)+"s":""}${n.flowResult.input_files.length>0?" | input_files: "+n.flowResult.input_files.length:""}`);return(i,a)=>{const l=de,u=dt,r=Ut;return v(),O(Z,null,[e.flowResult.translated_input_params_mapped&&Object.keys(e.flowResult.translated_input_params_mapped).length>0?(v(),M(u,{key:0,text:o(t)?"Hide translated input params":"Show translated input params",popper:{placement:"top"}},{default:R(()=>[I(l,{class:"mb-2 mr-2",color:"white",size:"xs",variant:"outline",icon:"i-heroicons-language-solid",onClick:a[0]||(a[0]=()=>{t.value=!o(t)})})]),_:1},8,["text"])):P("",!0),(v(!0),O(Z,null,he(o(s).split("|"),g=>(v(),M(r,{key:g,class:"mr-2 mb-2 last:mr-0 hover:cursor-pointer",variant:"soft",color:"gray",onClick:()=>{("useCopyToClipboard"in i?i.useCopyToClipboard:o(Fn))().copy(g.split(":")[1].trim()),("useToast"in i?i.useToast:o(ut))().add({title:"Clipboard",description:`${g.split(":")[0].trim()} copied to clipboard`,timeout:2e3})}},{default:R(()=>[L(Q(g),1)]),_:2},1032,["onClick"]))),128))],64)}}}),fs={class:"p-4"},ps={class:"flex justify-center mb-4"},vs={key:0,class:"text-sm text-slate-500 text-center mb-4"},gs={class:"text-md text-center text-red-500 mb-4"},hs={key:1},ys={class:"flex items-center justify-between"},bs=H({__name:"SendToFlowModal",props:Ct({flowResult:{type:Object,required:!1,default:()=>null},outputImgSrc:{type:String,required:!0},outputParamIndex:{type:Number,required:!0},inputParamsMapped:{type:Object,required:!0},isChildTask:{type:Boolean,required:!1,default:!1},translatePrompt:{type:Boolean,required:!1,default:!1}},{show:{default:!1,type:Boolean},showModifiers:{}}),emits:Ct(["update:show"],["update:show"]),setup(e,{emit:n}){const t=e,s=It(e,"show"),i=ke(),a=_(()=>i.sub_flows.map(p=>({value:p.name,label:`${p.display_name} - ${p.description}`}))),l=S(a.value[0]||""),u=S(!1),r=n;function g(){console.debug("[Send to flow]: ",l.value);const p=i.sub_flows.find(w=>w.name===l.value.value&&w.display_name===l.value.label.split(" - ")[0]);if(console.debug("[Send to flow]: targetFlow",p),!p){ut().add({title:`Target sub-flow "${l.value.value}" not found`,description:"Please, verify the target sub-flow is installed and available and try again",timeout:5e3});return}const k=p.input_params.reduce((w,x)=>{const y={};return x.type==="text"?y[x.name]={value:x.default||"",type:x.type}:x.type==="number"?y[x.name]={value:x.default||0,type:x.type}:x.type==="image"?y[x.name]={value:JSON.stringify({task_id:t.flowResult.task_id,node_id:t.flowResult.outputs.length>1?t.flowResult.outputs[t.outputParamIndex].comfy_node_id:t.flowResult.outputs[0].comfy_node_id})||"",type:x.type}:x.type==="list"?y[x.name]={value:x.default||Object.keys(x.options)[0]||"",type:x.type,options:x.options}:x.type==="bool"?y[x.name]={value:x.default||!1,type:x.type}:["range","range_scale"].includes(x.type)&&(y[x.name]={value:x.default||0,type:x.type}),w.push(y),w},[]);console.debug("[Send to flow]: input_params_map",k),u.value=!0,i.runFlow(p,k,1,t.translatePrompt,b.value,b.value?Number(t.flowResult.task_id):null).finally(()=>{u.value=!1,r("update:show",!1)})}const b=S(!1),$=_(()=>{var p;return t.flowResult.progress===100&&((p=t.flowResult)==null?void 0:p.error)===""});return Ot(()=>{i.fetchSubFlows("image").then(()=>{l.value=a.value[0]||""}),b.value=!1}),(p,k)=>{const w=Ee,x=hn,y=gn,c=At,m=de,h=Ge;return v(),M(h,{modelValue:s.value,"onUpdate:modelValue":k[2]||(k[2]=d=>s.value=d),class:"z-[90]",transition:!1},{default:R(()=>[C("div",fs,[k[4]||(k[4]=C("h2",{class:"text-lg text-center mb-4"},"Send to flow",-1)),C("div",ps,[o($)?(v(),M(w,{key:0,src:e.outputImgSrc,class:"w-1/2 rounded-lg",draggable:!1},null,8,["src"])):(v(),M(x,{key:1,color:"orange",icon:"i-heroicons-exclamation-circle-solid",title:`Task is still running (${Math.ceil(e.flowResult.progress)}%, ${e.flowResult.execution_time.toFixed(2)}s)`,description:e.flowResult.error!==""?e.flowResult.error:""},null,8,["title","description"]))]),e.inputParamsMapped?(v(),O("p",vs,Q(["#"+e.flowResult.task_id,...Object.keys(e.inputParamsMapped).filter(d=>e.inputParamsMapped[d].value!=="").map(d=>`${e.inputParamsMapped[d].display_name}: ${e.inputParamsMapped[d].value}`)].join(" | ")),1)):P("",!0),C("p",gs,[o(a).length>0?(v(),M(y,{key:0,modelValue:o(l),"onUpdate:modelValue":k[0]||(k[0]=d=>oe(l)?l.value=d:null),class:"w-full",size:"lg",options:o(a)},null,8,["modelValue","options"])):(v(),O("span",hs,"No sub-flows available"))]),e.isChildTask?(v(),M(x,{key:1,class:"mb-4",icon:"i-heroicons-exclamation-circle-solid",title:"Child task",description:"The latest child task is always used as input for sub-flow"})):P("",!0),C("div",ys,[I(c,{modelValue:o(b),"onUpdate:modelValue":k[1]||(k[1]=d=>oe(b)?b.value=d:null),label:"Bind as child task"},null,8,["modelValue"]),I(m,{icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",variant:"outline",loading:o(u),disabled:o(a).length===0||e.isChildTask&&!o($),onClick:g},{default:R(()=>k[3]||(k[3]=[L(" Send ")])),_:1},8,["loading","disabled"])])])]),_:1},8,["modelValue"])}}}),ws={class:"flex flex-col md:flex-row items-center justify-center mb-5 sticky top-1 z-[10]"},ks={class:"flex items-center justify-center"},xs={class:"p-4"},$s={class:"text-md text-center text-red-500 mb-4"},Ss={class:"flex justify-center"},Is={key:0,class:"results overflow-auto"},Cs=["id"],_s={class:"text-sm text-slate-500 text-center mb-1"},Ms={class:"w-5/6 mx-auto flex flex-wrap items-center justify-center"},Ps={class:"w-full flex justify-center items-center"},Rs={key:1,class:"text-center text-slate-500"},Fs=H({__name:"Output",emits:["copy-prompt-inputs"],setup(e,{emit:n}){const t=ke(),s=_(()=>{var U;return t.flowResultsByName((U=t.currentFlow)==null?void 0:U.name).length>0||!1}),i=_(()=>{var U;return t.flowResultsByName((U=t.currentFlow)==null?void 0:U.name)||[]}),a=_(()=>t.$state.resultsPageSize);ie(i,()=>{i.value.length<=t.$state.resultsPageSize?t.$state.resultsPage=1:t.$state.resultsPage>Math.ceil(i.value.length/t.$state.resultsPageSize)&&(t.$state.resultsPage=Math.ceil(i.value.length/t.$state.resultsPageSize))}),ie(a,()=>{i.value.length<=t.$state.resultsPageSize?t.$state.resultsPage=1:t.$state.resultsPage>Math.ceil(i.value.length/t.$state.resultsPageSize)&&(t.$state.resultsPage=Math.ceil(i.value.length/t.$state.resultsPageSize)),t.saveUserOptions()}),Me(()=>{t.$state.flow_results_filter="",t.$state.resultsPage=1});const l=n;function u(U){l("copy-prompt-inputs",U.input_params_mapped)}function r(U){w.value=U,k.value=!0}const g=S(null),b=S(!1);window.addEventListener("scroll",()=>{var U;b.value=window.scrollY>(((U=g.value)==null?void 0:U.offsetTop)+window.screen.height||0)});const $=_(()=>t.$state.resultsPage);ie($,()=>{const U=document.getElementById("output-container");U&&U.scrollIntoView({behavior:"smooth"})});const p=S(!1),k=S(!1),w=S(""),x=S(!1),y=S(!1),c=S(!1),m=S(""),h=S(null),d=S({}),f=S(0),F=S(!1);function j(U,z=0){if(U.child_tasks.length===0||!mn(U,z,U.outputs[z].comfy_node_id))h.value=U,m.value=pe({task_id:U.task_id,node_id:U.outputs[z].comfy_node_id}),d.value=U.input_params_mapped,F.value=!1;else{const V=cn(U,z,U.outputs[z].comfy_node_id);h.value=V,d.value=U.input_params_mapped,m.value=pe({task_id:V.task_id,node_id:V.outputs[0].comfy_node_id}),F.value=!0}f.value=z,c.value=!0}function N(U){const z=[[{label:"Use params",labelClass:"text-cyan-500 text-sm",icon:"i-heroicons-document-duplicate-16-solid",iconClass:"bg-cyan-500 h-4 w-4",click:()=>u(U)}],[{label:"Comfy flow",labelClass:"text-blue-500 text-sm",icon:"i-heroicons-arrow-down-tray",iconClass:"bg-blue-500 h-4 w-4",click:()=>{var V;return t.downloadFlowComfy((V=t.currentFlow)==null?void 0:V.name,U.task_id)}}]];return U.outputs.length===1&&U.outputs.every(V=>V.type==="image")&&z.splice(1,0,[{label:"Send to flow",labelClass:"text-violet-500 text-sm",icon:"i-heroicons-arrow-uturn-up-solid",iconClass:"bg-violet-500 h-4 w-4",click:()=>{j(U)}}]),U.input_files.length>0&&z.splice(2,0,[{label:"Show input files",labelClass:"text-green-500 text-sm",icon:"i-heroicons-document-solid",iconClass:"bg-green-500 h-4 w-4",click:()=>{U.showInputFiles=!0}}]),z}return(U,z)=>{var B;const V=Ao,ee=Ie,A=jt,K=Ca,X=Ma,J=de,ue=pt,xe=Ut,ye=Ge,be=ls,q=cs,E=ms,Y=bs,le=Ee;return v(),O("div",{id:"output-container",ref_key:"outputContainer",ref:g,class:"w-full p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg shadow-md my-10"},[I(V,{show:o(b),class:"fixed bottom-5 right-5",target:"output-container"},null,8,["show"]),C("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center mb-3",onClick:z[0]||(z[0]=()=>{p.value=!o(p)})},[I(ee,{name:o(p)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),L(" Output ("+Q(o(i).filter(T=>T.parent_task_id===null).length)+") ",1)]),o(p)?P("",!0):(v(),O(Z,{key:0},[C("div",ws,[I(A,{modelValue:o(t).$state.flow_results_filter,"onUpdate:modelValue":z[1]||(z[1]=T=>o(t).$state.flow_results_filter=T),icon:"i-heroicons-magnifying-glass-20-solid",color:"white",class:"md:mr-3",label:"Filter by prompt",trailing:!0,placeholder:"Filter results by prompt"},null,8,["modelValue"]),o(i).filter(T=>T.parent_task_id===null).length>o(t).$state.resultsPageSize?(v(),M(K,{key:0,modelValue:o(t).$state.resultsPage,"onUpdate:modelValue":z[2]||(z[2]=T=>o(t).$state.resultsPage=T),class:"my-1 md:my-0","page-count":o(t).$state.resultsPageSize,total:o(i).filter(T=>T.parent_task_id===null).length,"show-first":"","show-last":""},null,8,["modelValue","page-count","total"])):P("",!0),C("div",ks,[I(X,{modelValue:o(t).resultsPageSize,"onUpdate:modelValue":z[3]||(z[3]=T=>o(t).resultsPageSize=T),class:"md:mx-3 w-fit mr-3",options:[5,10,20,50,100],label:"Results per page"},null,8,["modelValue"]),I(ue,{items:[[{label:"Delete all results",labelClass:"text-red-500",icon:"i-heroicons-trash",iconClass:"dark:text-red-500 text-red-500",click:()=>x.value=!0}]],mode:"click",label:"Options",popper:{placement:"bottom-end"}},{default:R(()=>[I(J,{color:"white",icon:"i-heroicons-ellipsis-vertical-16-solid"})]),_:1},8,["items"])]),I(ye,{modelValue:o(x),"onUpdate:modelValue":z[6]||(z[6]=T=>oe(x)?x.value=T:null),class:"z-[90]",transition:!1},{default:R(()=>[C("div",xs,[z[15]||(z[15]=C("p",{class:"text-lg text-center mb-4"},"Are you sure you want to delete all results?",-1)),C("p",$s,[z[11]||(z[11]=L(" All history and images of ")),I(xe,{class:"mx-1",color:"orange",variant:"outline"},{default:R(()=>[L(Q(o(t).currentFlow.display_name),1)]),_:1}),z[12]||(z[12]=L(" will be deleted. "))]),C("div",Ss,[I(J,{class:"mr-2",color:"red",variant:"outline",loading:o(y),onClick:z[4]||(z[4]=()=>{var T;y.value=!0,o(t).deleteFlowResults((T=o(t).currentFlow)==null?void 0:T.name).then(()=>{y.value=!1,x.value=!1})})},{default:R(()=>z[13]||(z[13]=[L(" Yes ")])),_:1},8,["loading"]),I(J,{variant:"outline",onClick:z[5]||(z[5]=()=>x.value=!1)},{default:R(()=>z[14]||(z[14]=[L("No")])),_:1})])])]),_:1},8,["modelValue"])]),o(s)?(v(),O("div",Is,[(v(!0),O(Z,null,he(o(t).flowResultsByNamePaginated((B=o(t).currentFlow)==null?void 0:B.name),T=>(v(),O("div",{id:"task_id_"+T.task_id,key:T.task_id,class:"flex flex-col justify-center mx-auto mb-5"},[T.outputs.some(G=>G.type==="image")?(v(),M(be,{key:0,"flow-result":T,"handle-send-to-flow":j,"open-image-modal":r},null,8,["flow-result"])):T.outputs.some(G=>G.type==="video")?(v(),M(q,{key:1,"flow-result":T,"handle-send-to-flow":j,"open-image-modal":r},null,8,["flow-result"])):P("",!0),C("div",_s,[C("div",Ms,[I(E,{"flow-result":T},null,8,["flow-result"])])]),C("div",Ps,[I(J,{class:"mr-3",color:"red",icon:"i-heroicons-trash",variant:"outline",size:"xs",onClick:()=>o(t).deleteFlowHistory(T.task_id)},{default:R(()=>z[16]||(z[16]=[L(" Delete ")])),_:2},1032,["onClick"]),I(ue,{items:N(T),mode:"click",popper:{placement:"bottom-start"}},{default:R(()=>[I(J,{color:"white",icon:"i-heroicons-ellipsis-vertical-16-solid",size:"xs"})]),_:2},1032,["items"])])],8,Cs))),128)),I(Y,{show:o(c),"onUpdate:show":z[7]||(z[7]=T=>oe(c)?c.value=T:null),"flow-result":o(h),"output-img-src":o(m),"output-param-index":o(f),"input-params-mapped":o(d),"is-child-task":o(F)},null,8,["show","flow-result","output-img-src","output-param-index","input-params-mapped","is-child-task"])])):(v(),O("p",Rs," No output results available "))],64)),I(ye,{modelValue:o(k),"onUpdate:modelValue":z[10]||(z[10]=T=>oe(k)?k.value=T:null),class:"z-[90]",transition:!1,fullscreen:""},{default:R(()=>[I(J,{class:"absolute top-4 right-4",icon:"i-heroicons-x-mark",variant:"ghost",onClick:z[8]||(z[8]=()=>k.value=!1)}),C("div",{class:"flex items-center justify-center w-full h-full p-4",onClick:z[9]||(z[9]=rt(()=>k.value=!1,["left"]))},[o(w)?(v(),M(le,{key:0,class:"lg:h-full",fit:"inside",loading:"lazy",src:o(w)},null,8,["src"])):P("",!0)])]),_:1},8,["modelValue"])],512)}}}),Ts={class:"flex flex-col lg:flex-row flex-grow items-start w-full"},zs={class:"card-wrapper w-full lg:pr-5"},Os={key:0,class:"p-0 text-sm"},Us={class:"flex flex-row items-center text-slate-400 mb-2"},Bs={class:"flex flex-row flex-wrap items-center text-md mb-2"},js=["href"],Es={class:"flex flex-row items-center text-md mb-2"},As=["href"],Ds={key:1},Ns={class:"flex flex-row items-center text-md mb-2"},Ls={key:0},Vs={class:"flex flex-row items-center text-md mb-2"},qs={key:0,class:"flex flex-row flex-wrap items-center text-md mb-2"},Hs=["href"],Ws={key:1,class:"flex flex-row flex-wrap items-center text-md"},Qs={key:0,class:"flex justify-end"},Ks={class:"flex flex-row items-center justify-center text-sm mr-2"},Ys={key:1},Gs={class:"text-sm flex justify-end"},Js={class:"flex flex-row items-center justify-center text-sm mr-3"},Xs={key:0,class:"text-right"},Zs={class:"prompt-wrapper w-full"},ei={class:"flex items-center justify-between"},ti={class:"pb-2"},ni={class:"flex justify-end items-center"},ui=H({__name:"[name]",setup(e){const n=va(),t=ke();t.setCurrentFlow(n.params.name);const s=_(()=>t.flowInstallingByName(n.params.name)),i=_(()=>{var y;return s.value&&((y=s.value)==null?void 0:y.progress)<100||!1}),a=S(!1),l=_(()=>{var y;return s.value?"error"in s.value&&((y=s.value)==null?void 0:y.error)!==""?`${s.value.progress.toFixed(0)}% Error setting up`:`${s.value.progress.toFixed(0)}% Setting up`:"Setup flow"}),u=S(!1),r=S(!1),g=_(()=>{var c;const y=[[{label:"Delete flow",icon:"i-heroicons-trash",click:$}]];return((c=t==null?void 0:t.currentFlow)==null?void 0:c.new_version_available)!==""&&y[0].unshift({label:`Update to ${t.currentFlow.new_version_available}`,icon:"i-heroicons-arrow-path",click:()=>{t.updateFlow(t.currentFlow)}}),y});function b(y,c=!1){u.value=!0,t.deleteFlow(y).then(()=>{c&&ga().push("/")}).finally(()=>{u.value=!1,r.value=!1})}function $(){var c;const y=((c=t.currentFlow)==null?void 0:c.private)||!1;if(y){r.value=!0;return}b(t.currentFlow,y)}const p=S(!1),k=S(null),w=function(y){var c;(c=k.value)==null||c.copyPromptInputs(y)},x=ha();return(y,c)=>{const m=Ie,h=dt,d=Ut,f=de,F=pt,j=_a,N=wo,U=Eo,z=Fs,V=pn,ee=Ge,A=ba;return v(),M(A,null,{default:R(()=>[!o(t).loading.flows_available&&!o(t).loading.flows_installed&&o(t).currentFlow&&!o(t).$state.loading.tasks_history?(v(),O(Z,{key:0},[C("div",Ts,[C("div",zs,[I(j,{as:"div",class:"w-full mb-5"},ya({header:R(()=>{var K,X;return[C("h2",{class:"text-xl font-bold cursor-pointer select-none flex items-center",onClick:c[0]||(c[0]=()=>{p.value=!o(p)})},[(K=o(t).currentFlow)!=null&&K.private?(v(),M(h,{key:0,text:"This flow is local, manually added"},{default:R(()=>[I(m,{name:"i-heroicons-lock-closed",class:"mr-2"})]),_:1})):P("",!0),I(m,{name:o(p)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),L(" "+Q((X=o(t).currentFlow)==null?void 0:X.display_name),1)])]}),default:R(()=>{var K,X,J,ue,xe,ye,be,q,E,Y,le,B,T,G,re,te,we;return[o(p)?P("",!0):(v(),O("div",Os,[C("p",Us,Q((K=o(t).currentFlow)==null?void 0:K.description),1),C("p",Bs,[I(m,{name:"i-heroicons-user-16-solid",class:"mr-1"}),c[8]||(c[8]=C("b",null,"Author:",-1)),c[9]||(c[9]=L("  ")),C("a",{class:"hover:underline text-md",href:(X=o(t).currentFlow)==null?void 0:X.homepage,rel:"noopener",target:"_blank"},Q((J=o(t).currentFlow)==null?void 0:J.author),9,js)]),C("p",Es,[I(m,{name:"i-heroicons-document-text",class:"mr-1"}),(ue=o(t).currentFlow)!=null&&ue.documentation?(v(),O("a",{key:0,class:"hover:underline",href:(xe=o(t).currentFlow)==null?void 0:xe.documentation,rel:"noopener",target:"_blank"}," Documentation ",8,As)):(v(),O("span",Ds,"No documentation"))]),C("p",Ns,[I(m,{name:"i-heroicons-clock",class:"mr-1"}),c[10]||(c[10]=C("b",null,"Version:",-1)),c[11]||(c[11]=L("  ")),C("span",null,Q((ye=o(t).currentFlow)==null?void 0:ye.version),1),((be=o(t).currentFlow)==null?void 0:be.new_version_available)!==""?(v(),O("span",Ls,"  (new version available: "+Q((q=o(t).currentFlow)==null?void 0:q.new_version_available)+") ",1)):P("",!0)]),C("p",Vs,[I(m,{name:"i-heroicons-tag",class:"mr-1"}),c[12]||(c[12]=C("b",null,"Tags:",-1)),c[13]||(c[13]=L("  ")),((E=o(t).currentFlow)==null?void 0:E.tags.length)>0?(v(!0),O(Z,{key:0},he((Y=o(t).currentFlow)==null?void 0:Y.tags,ne=>(v(),M(d,{key:ne,label:ne,color:"white",variant:"solid",class:"m-1"},null,8,["label"]))),128)):(v(),M(d,{key:1,label:"No tags",color:"white",variant:"solid",class:"m-1"}))]),((B=(le=o(t).currentFlow)==null?void 0:le.models)==null?void 0:B.length)>0?(v(),O("p",qs,[I(m,{name:"i-heroicons-arrow-down-on-square-stack",class:"mr-1"}),C("b",null,"Models ("+Q((T=o(t).currentFlow)==null?void 0:T.models.length)+"):",1),c[14]||(c[14]=L("  ")),(v(!0),O(Z,null,he((G=o(t).currentFlow)==null?void 0:G.models,ne=>(v(),M(d,{key:ne.name,class:"m-1",color:"white",variant:"solid"},{default:R(()=>[ne.gated?(v(),M(h,{key:0,text:"Gated model, requires auth token for download",popper:{placement:"top"}},{default:R(()=>[I(m,{name:"i-heroicons-key",class:"mr-1"})]),_:1})):P("",!0),C("a",{class:"hover:underline underline-offset-4",href:ne.homepage,rel:"noopener",target:"_blank"},Q(ne.name),9,Hs)]),_:2},1024))),128))])):P("",!0),((te=(re=o(t).currentFlow)==null?void 0:re.requires)==null?void 0:te.length)>0?(v(),O("p",Ws,[c[15]||(c[15]=C("b",null,"Requires:",-1)),c[16]||(c[16]=L("  ")),(v(!0),O(Z,null,he((we=o(t).currentFlow)==null?void 0:we.requires,ne=>(v(),M(d,{key:ne,class:"m-1",color:"yellow",variant:"outline"},{default:R(()=>[L(Q(ne),1)]),_:2},1024))),128))])):P("",!0)]))]}),_:2},[o(p)?void 0:{name:"footer",fn:R(()=>[o(x).isAdmin?(v(),O("div",Qs,[C("div",Ks,[I(m,{name:o(t).isFlowInstalled(o(n).params.name)?"i-heroicons-check-badge":"i-heroicons-x-mark",class:"mx-1"},null,8,["name"]),C("span",{class:D({"text-green-500":o(t).isFlowInstalled(o(n).params.name),"text-red-500":!o(t).isFlowInstalled(o(n).params.name)})},Q(o(t).isFlowInstalled(o(n).params.name)?"Installed":"Not installed"),3)]),o(t).isFlowInstalled(o(n).params.name)?P("",!0):(v(),M(h,{key:0,text:"Setup flow dependencies and configure it in ComfyUI",popper:{placement:"top"},"open-delay":500},{default:R(()=>[I(f,{icon:"i-heroicons-arrow-down-tray",class:"mx-3",color:"primary",variant:"outline",loading:o(i),onClick:c[1]||(c[1]=()=>o(t).setupFlow(o(t).currentFlow))},{default:R(()=>[L(Q(o(l)),1)]),_:1},8,["loading"])]),_:1})),!o(t).isFlowInstalled(o(n).params.name)&&o(i)?(v(),M(h,{key:1,text:"Cancel flow installation",popper:{placement:"top"},"open-delay":500},{default:R(()=>[I(f,{icon:"i-heroicons-stop",variant:"outline",color:"orange",loading:o(a),onClick:c[2]||(c[2]=()=>{a.value=!0,o(t).cancelFlowSetup(o(t).currentFlow).then(()=>{a.value=!1})})},{default:R(()=>c[17]||(c[17]=[L(" Cancel ")])),_:1},8,["loading"])]),_:1})):P("",!0),o(t).isFlowInstalled(o(n).params.name)?(v(),M(F,{key:2,items:o(g),mode:"click",label:"Actions",popper:{placement:"bottom-end"}},{default:R(()=>[I(f,{color:"white",label:"Actions","trailing-icon":"i-heroicons-chevron-down-20-solid"})]),_:1},8,["items"])):P("",!0)])):(v(),O("div",Ys,[C("div",Gs,[C("div",Js,[I(m,{name:o(t).isFlowInstalled(o(n).params.name)?"i-heroicons-check-badge":"i-heroicons-x-mark",class:"mx-1"},null,8,["name"]),C("span",{class:D({"text-green-500":o(t).isFlowInstalled(o(n).params.name),"text-red-500":!o(t).isFlowInstalled(o(n).params.name)})},Q(o(t).isFlowInstalled(o(n).params.name)?"Installed":"Not installed"),3)]),o(t).isFlowInstalled(o(n).params.name)?P("",!0):(v(),O("div",Xs,c[18]||(c[18]=[C("p",{class:"text-orange-500"},"Only admin can manage workflows.",-1),C("span",{class:"text-slate-500"},"Ask your admin to setup this workflow",-1)])))])]))]),key:"0"}]),1024)]),C("div",Zs,[!o(u)&&o(t).isFlowInstalled(o(n).params.name)?(v(),M(N,{key:0,ref_key:"workflowPrompt",ref:k},null,512)):P("",!0)])]),!o(u)&&o(t).isFlowInstalled(o(n).params.name)?(v(),M(U,{key:0})):P("",!0),!o(u)&&o(t).isFlowInstalled(o(n).params.name)||o(t).flowResultsByName(o(n).params.name).length>0?(v(),M(z,{key:1,onCopyPromptInputs:c[3]||(c[3]=K=>w(K))})):P("",!0)],64)):(v(),M(V,{key:1,class:"mb-3"})),I(ee,{modelValue:o(r),"onUpdate:modelValue":c[7]||(c[7]=K=>oe(r)?r.value=K:null),"prevent-close":""},{default:R(()=>[I(j,{ui:{ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:R(()=>[C("div",ei,[c[19]||(c[19]=C("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Confirm workflow deletion ",-1)),I(f,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:c[4]||(c[4]=K=>r.value=!1)})])]),default:R(()=>{var K;return[C("p",ti,[c[20]||(c[20]=L(" Are you sure you want to delete the ")),c[21]||(c[21]=C("b",null,"private",-1)),c[22]||(c[22]=L(" workflow ")),C("b",null,Q((K=o(t).currentFlow)==null?void 0:K.display_name),1),c[23]||(c[23]=L("? "))]),C("div",ni,[I(f,{icon:"i-heroicons-x-mark-16-solid",variant:"outline",color:"green",class:"mr-2",onClick:c[5]||(c[5]=X=>r.value=!1)},{default:R(()=>c[24]||(c[24]=[L(" Cancel ")])),_:1}),I(f,{icon:"i-heroicons-trash",variant:"outline",color:"red",onClick:c[6]||(c[6]=X=>{var J;return b(o(t).currentFlow,((J=o(t).currentFlow)==null?void 0:J.private)||!1)})},{default:R(()=>c[25]||(c[25]=[L(" Delete ")])),_:1})])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{ui as default};
