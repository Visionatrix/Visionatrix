import{f as Q,x as C,C as S,Z as Xt,N as se,$ as _e,a0 as Aa,a1 as he,a2 as St,a3 as Ct,a4 as Fe,F as Z,a5 as Re,a6 as Ke,n as ce,a7 as K,a8 as Zt,a9 as Ne,aa as lt,ab as rt,ac as ze,ad as ja,ae as Ua,af as Ea,ag as Qe,ah as De,ai as Ye,aj as Ft,ak as fe,al as Ra,am as Na,an as ea,ao as Da,ap as La,aq as Nt,ar as at,as as Ee,at as ue,au as Va,av as qa,aw as ta,ax as aa,ay as Ha,az as na,aA as Wa,aB as Ga,aC as la,aD as Ka,aE as We,aF as Qa,I as R,y as Le,aG as Ya,z as te,_ as Oe,k as ve,U as ut,A as Ve,B as Se,E as dt,aH as Ja,aI as zt,aJ as Xa,V as Te,W as de,aK as be,o as v,h as T,w as B,b as M,H as pe,a as P,c as F,aL as oa,aM as Za,J as re,i as _,r as me,aN as en,t as H,d as L,e as sa,aO as Tt,aP as tn,aQ as an,aR as Dt,aS as nn,aT as xt,aU as ln,aV as on,aW as Lt,aX as ia,aY as sn,aZ as rn,j as i,a_ as ct,a$ as un,b0 as dn,b1 as Vt,g as Be,P as ra,O as ua,Q as ye,l as we,K as Je,b2 as Ot,b3 as cn,b4 as mn,b5 as fn,b6 as yt,b7 as pn,b8 as vn,G as qt,b9 as gn,v as mt,ba as da,bb as Ce,bc as hn,bd as Ht,m as ca,be as bn,q as yn,p as wn,bf as kn,bg as $n}from"./CcAHSYu8.js";import{b as ma,_ as Bt,a as fa}from"./C_8AnvVV.js";import{t as pa,b as Wt,o as ft,i as In,p as Sn,u as Cn,f as xn,c as xe,d as Mn,e as Pn,g as pt,_ as At,a as va}from"./w78XhY_L.js";import{a as _n,_ as Fn}from"./B8Jfa4ro.js";import{_ as jt}from"./BgbvKRja.js";import{_ as ga}from"./B6R3jR6a.js";const zn={wrapper:"w-full relative overflow-hidden",inner:"w-0 flex-1",title:"text-sm font-medium",description:"mt-1 text-sm leading-4 opacity-90",actions:"flex items-center gap-2 mt-3 flex-shrink-0",shadow:"",rounded:"rounded-lg",padding:"p-4",gap:"gap-3",icon:{base:"flex-shrink-0 w-5 h-5"},avatar:{base:"flex-shrink-0 self-center",size:"md"},color:{white:{solid:"text-gray-900 dark:text-white bg-white dark:bg-gray-900 ring-1 ring-gray-200 dark:ring-gray-800"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},default:{color:"white",variant:"solid",icon:null,closeButton:null,actionButton:{size:"xs",color:"primary",variant:"link"}}},Tn={wrapper:"relative",container:"relative w-full flex overflow-x-auto snap-x snap-mandatory scroll-smooth",item:"flex flex-none snap-center",arrows:{wrapper:"flex items-center justify-between"},indicators:{wrapper:"absolute flex items-center justify-center gap-3 bottom-4 inset-x-0",base:"rounded-full h-3 w-3",active:"bg-primary-500 dark:bg-primary-400",inactive:"bg-gray-100 dark:bg-gray-800"},default:{prevButton:{color:"black",class:"rtl:[&_span:first-child]:rotate-180 absolute left-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"black",class:"rtl:[&_span:last-child]:rotate-180 absolute right-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-right-20-solid "}}},On={base:"relative inline-flex flex-shrink-0 border-2 border-transparent disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none",rounded:"rounded-full",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",active:"bg-{color}-500 dark:bg-{color}-400",inactive:"bg-gray-200 dark:bg-gray-700",size:{"2xs":"h-3 w-5",xs:"h-3.5 w-6",sm:"h-4 w-7",md:"h-5 w-9",lg:"h-6 w-11",xl:"h-7 w-[3.25rem]","2xl":"h-8 w-[3.75rem]"},container:{base:"pointer-events-none relative inline-block rounded-full bg-white dark:bg-gray-900 shadow transform ring-0 transition ease-in-out duration-200",active:{"2xs":"translate-x-2 rtl:-translate-x-2",xs:"translate-x-2.5 rtl:-translate-x-2.5",sm:"translate-x-3 rtl:-translate-x-3",md:"translate-x-4 rtl:-translate-x-4",lg:"translate-x-5 rtl:-translate-x-5",xl:"translate-x-6 rtl:-translate-x-6","2xl":"translate-x-7 rtl:-translate-x-7"},inactive:"translate-x-0 rtl:-translate-x-0",size:{"2xs":"h-2 w-2",xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6","2xl":"h-7 w-7"}},icon:{base:"absolute inset-0 h-full w-full flex items-center justify-center transition-opacity",active:"opacity-100 ease-in duration-200",inactive:"opacity-0 ease-out duration-100",size:{"2xs":"h-2 w-2",xs:"h-2 w-2",sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4",xl:"h-5 w-5","2xl":"h-6 w-6"},on:"text-{color}-500 dark:text-{color}-400",off:"text-gray-400 dark:text-gray-500",loading:"animate-spin text-{color}-500 dark:text-{color}-400"},default:{onIcon:null,offIcon:null,loadingIcon:"i-heroicons-arrow-path-20-solid",color:"primary",size:"md"}},Bn={wrapper:"relative w-full flex items-center",base:"w-full absolute appearance-none cursor-pointer disabled:cursor-not-allowed disabled:bg-opacity-50 focus:outline-none peer group",rounded:"rounded-lg",background:"bg-transparent",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",progress:{base:"absolute pointer-events-none peer-disabled:bg-opacity-50",rounded:"rounded-s-lg",background:"bg-{color}-500 dark:bg-{color}-400",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"}},thumb:{base:"[&::-webkit-slider-thumb]:relative [&::-moz-range-thumb]:relative [&::-webkit-slider-thumb]:z-[1] [&::-moz-range-thumb]:z-[1] [&::-webkit-slider-thumb]:appearance-none [&::-moz-range-thumb]:appearance-none [&::-webkit-slider-thumb]:rounded-full [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:border-0",color:"text-{color}-500 dark:text-{color}-400",background:"[&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:dark:bg-gray-900 [&::-moz-range-thumb]:bg-current",ring:"[&::-webkit-slider-thumb]:ring-2 [&::-webkit-slider-thumb]:ring-current",size:{"2xs":"[&::-webkit-slider-thumb]:h-1.5 [&::-moz-range-thumb]:h-1.5 [&::-webkit-slider-thumb]:w-1.5 [&::-moz-range-thumb]:w-1.5 [&::-webkit-slider-thumb]:mt-[-2.5px] [&::-moz-range-thumb]:mt-[-2.5px]",xs:"[&::-webkit-slider-thumb]:h-2 [&::-moz-range-thumb]:h-2 [&::-webkit-slider-thumb]:w-2 [&::-moz-range-thumb]:w-2 [&::-webkit-slider-thumb]:mt-[-3px] [&::-moz-range-thumb]:mt-[-3px]",sm:"[&::-webkit-slider-thumb]:h-3 [&::-moz-range-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-moz-range-thumb]:w-3 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",md:"[&::-webkit-slider-thumb]:h-4 [&::-moz-range-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-moz-range-thumb]:w-4 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",lg:"[&::-webkit-slider-thumb]:h-5 [&::-moz-range-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-moz-range-thumb]:w-5 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",xl:"[&::-webkit-slider-thumb]:h-6 [&::-moz-range-thumb]:h-6 [&::-webkit-slider-thumb]:w-6 [&::-moz-range-thumb]:w-6 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1","2xl":"[&::-webkit-slider-thumb]:h-7 [&::-moz-range-thumb]:h-7 [&::-webkit-slider-thumb]:w-7 [&::-moz-range-thumb]:w-7 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1"}},track:{base:"[&::-webkit-slider-runnable-track]:group-disabled:bg-opacity-50 [&::-moz-range-track]:group-disabled:bg-opacity-50",background:"[&::-webkit-slider-runnable-track]:bg-gray-200 [&::-moz-range-track]:bg-gray-200 [&::-webkit-slider-runnable-track]:dark:bg-gray-700 [&::-moz-range-track]:dark:bg-gray-700",rounded:"[&::-webkit-slider-runnable-track]:rounded-lg [&::-moz-range-track]:rounded-lg",size:{"2xs":"[&::-webkit-slider-runnable-track]:h-px [&::-moz-range-track]:h-px",xs:"[&::-webkit-slider-runnable-track]:h-0.5 [&::-moz-range-track]:h-0.5",sm:"[&::-webkit-slider-runnable-track]:h-1 [&::-moz-range-track]:h-1",md:"[&::-webkit-slider-runnable-track]:h-2 [&::-moz-range-track]:h-2",lg:"[&::-webkit-slider-runnable-track]:h-3 [&::-moz-range-track]:h-3",xl:"[&::-webkit-slider-runnable-track]:h-4 [&::-moz-range-track]:h-4","2xl":"[&::-webkit-slider-runnable-track]:h-5 [&::-moz-range-track]:h-5"}},size:{"2xs":"h-1.5",xs:"h-2",sm:"h-3",md:"h-4",lg:"h-5",xl:"h-6","2xl":"h-7"},default:{size:"md",color:"primary"}},An={wrapper:"relative z-50",inner:"fixed inset-0 overflow-y-auto",container:"flex min-h-full items-end sm:items-center justify-center text-center",padding:"p-4 sm:p-0",margin:"sm:my-8",base:"relative text-left rtl:text-right flex flex-col",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},background:"bg-white dark:bg-gray-900",ring:"",rounded:"rounded-lg",shadow:"shadow-xl",width:"w-full sm:max-w-lg",height:"",fullscreen:"w-screen h-screen",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}};function ha(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let a=new Set;for(let t of e.value){let l=K(t);l instanceof HTMLElement&&a.add(l)}return a}var ba=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(ba||{});let et=Object.assign(Q({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:C(new Set)}},inheritAttrs:!1,setup(e,{attrs:a,slots:t,expose:l}){let u=C(null);l({el:u,$el:u});let s=S(()=>Xt(u)),o=C(!1);se(()=>o.value=!0),_e(()=>o.value=!1),Un({ownerDocument:s},S(()=>o.value&&!!(e.features&16)));let d=En({ownerDocument:s,container:u,initialFocus:S(()=>e.initialFocus)},S(()=>o.value&&!!(e.features&2)));Rn({ownerDocument:s,container:u,containers:e.containers,previousActiveElement:d},S(()=>o.value&&!!(e.features&8)));let c=Aa();function p($){let h=K(u);h&&(I=>I())(()=>{Ne(c.value,{[lt.Forwards]:()=>{rt(h,ze.First,{skipElements:[$.relatedTarget]})},[lt.Backwards]:()=>{rt(h,ze.Last,{skipElements:[$.relatedTarget]})}})})}let b=C(!1);function w($){$.key==="Tab"&&(b.value=!0,requestAnimationFrame(()=>{b.value=!1}))}function f($){if(!o.value)return;let h=ha(e.containers);K(u)instanceof HTMLElement&&h.add(K(u));let I=$.relatedTarget;I instanceof HTMLElement&&I.dataset.headlessuiFocusGuard!=="true"&&(ya(h,I)||(b.value?rt(K(u),Ne(c.value,{[lt.Forwards]:()=>ze.Next,[lt.Backwards]:()=>ze.Previous})|ze.WrapAround,{relativeTo:$.target}):$.target instanceof HTMLElement&&Ke($.target)))}return()=>{let $={},h={ref:u,onKeydown:w,onFocusout:f},{features:I,initialFocus:y,containers:n,...r}=e;return he(Z,[!!(I&4)&&he(St,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Ct.Focusable}),Fe({ourProps:h,theirProps:{...a,...r},slot:$,attrs:a,slots:t,name:"FocusTrap"}),!!(I&4)&&he(St,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Ct.Focusable})])}}}),{features:ba});function jn(e){let a=C(Wt.slice());return ce([e],([t],[l])=>{l===!0&&t===!1?pa(()=>{a.value.splice(0)}):l===!1&&t===!0&&(a.value=Wt.slice())},{flush:"post"}),()=>{var t;return(t=a.value.find(l=>l!=null&&l.isConnected))!=null?t:null}}function Un({ownerDocument:e},a){let t=jn(a);se(()=>{Re(()=>{var l,u;a.value||((l=e.value)==null?void 0:l.activeElement)===((u=e.value)==null?void 0:u.body)&&Ke(t())},{flush:"post"})}),_e(()=>{a.value&&Ke(t())})}function En({ownerDocument:e,container:a,initialFocus:t},l){let u=C(null),s=C(!1);return se(()=>s.value=!0),_e(()=>s.value=!1),se(()=>{ce([a,t,l],(o,d)=>{if(o.every((p,b)=>(d==null?void 0:d[b])===p)||!l.value)return;let c=K(a);c&&pa(()=>{var p,b;if(!s.value)return;let w=K(t),f=(p=e.value)==null?void 0:p.activeElement;if(w){if(w===f){u.value=f;return}}else if(c.contains(f)){u.value=f;return}w?Ke(w):rt(c,ze.First|ze.NoScroll)===ja.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),u.value=(b=e.value)==null?void 0:b.activeElement})},{immediate:!0,flush:"post"})}),u}function Rn({ownerDocument:e,container:a,containers:t,previousActiveElement:l},u){var s;Zt((s=e.value)==null?void 0:s.defaultView,"focus",o=>{if(!u.value)return;let d=ha(t);K(a)instanceof HTMLElement&&d.add(K(a));let c=l.value;if(!c)return;let p=o.target;p&&p instanceof HTMLElement?ya(d,p)?(l.value=p,Ke(p)):(o.preventDefault(),o.stopPropagation(),Ke(c)):Ke(l.value)},!0)}function ya(e,a){for(let t of e)if(t.contains(a))return!0;return!1}function Nn(e){let a=Ua(e.getSnapshot());return _e(e.subscribe(()=>{a.value=e.getSnapshot()})),a}function Dn(e,a){let t=e(),l=new Set;return{getSnapshot(){return t},subscribe(u){return l.add(u),()=>l.delete(u)},dispatch(u,...s){let o=a[u].call(t,...s);o&&(t=o,l.forEach(d=>d()))}}}function Ln(){let e;return{before({doc:a}){var t;let l=a.documentElement;e=((t=a.defaultView)!=null?t:window).innerWidth-l.clientWidth},after({doc:a,d:t}){let l=a.documentElement,u=l.clientWidth-l.offsetWidth,s=e-u;t.style(l,"paddingRight",`${s}px`)}}}function Vn(){return Ea()?{before({doc:e,d:a,meta:t}){function l(u){return t.containers.flatMap(s=>s()).some(s=>s.contains(u))}a.microTask(()=>{var u;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let d=ft();d.style(e.documentElement,"scrollBehavior","auto"),a.add(()=>a.microTask(()=>d.dispose()))}let s=(u=window.scrollY)!=null?u:window.pageYOffset,o=null;a.addEventListener(e,"click",d=>{if(d.target instanceof HTMLElement)try{let c=d.target.closest("a");if(!c)return;let{hash:p}=new URL(c.href),b=e.querySelector(p);b&&!l(b)&&(o=b)}catch{}},!0),a.addEventListener(e,"touchstart",d=>{if(d.target instanceof HTMLElement)if(l(d.target)){let c=d.target;for(;c.parentElement&&l(c.parentElement);)c=c.parentElement;a.style(c,"overscrollBehavior","contain")}else a.style(d.target,"touchAction","none")}),a.addEventListener(e,"touchmove",d=>{if(d.target instanceof HTMLElement){if(d.target.tagName==="INPUT")return;if(l(d.target)){let c=d.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&d.preventDefault()}else d.preventDefault()}},{passive:!1}),a.add(()=>{var d;let c=(d=window.scrollY)!=null?d:window.pageYOffset;s!==c&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function qn(){return{before({doc:e,d:a}){a.style(e.documentElement,"overflow","hidden")}}}function Hn(e){let a={};for(let t of e)Object.assign(a,t(a));return a}let Ge=Dn(()=>new Map,{PUSH(e,a){var t;let l=(t=this.get(e))!=null?t:{doc:e,count:0,d:ft(),meta:new Set};return l.count++,l.meta.add(a),this.set(e,l),this},POP(e,a){let t=this.get(e);return t&&(t.count--,t.meta.delete(a)),this},SCROLL_PREVENT({doc:e,d:a,meta:t}){let l={doc:e,d:a,meta:Hn(t)},u=[Vn(),Ln(),qn()];u.forEach(({before:s})=>s==null?void 0:s(l)),u.forEach(({after:s})=>s==null?void 0:s(l))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Ge.subscribe(()=>{let e=Ge.getSnapshot(),a=new Map;for(let[t]of e)a.set(t,t.documentElement.style.overflow);for(let t of e.values()){let l=a.get(t.doc)==="hidden",u=t.count!==0;(u&&!l||!u&&l)&&Ge.dispatch(t.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",t),t.count===0&&Ge.dispatch("TEARDOWN",t)}});function Wn(e,a,t){let l=Nn(Ge),u=S(()=>{let s=e.value?l.value.get(e.value):void 0;return s?s.count>0:!1});return ce([e,a],([s,o],[d],c)=>{if(!s||!o)return;Ge.dispatch("PUSH",s,t);let p=!1;c(()=>{p||(Ge.dispatch("POP",d??s,t),p=!0)})},{immediate:!0}),u}let wt=new Map,tt=new Map;function Gt(e,a=C(!0)){Re(t=>{var l;if(!a.value)return;let u=K(e);if(!u)return;t(function(){var o;if(!u)return;let d=(o=tt.get(u))!=null?o:1;if(d===1?tt.delete(u):tt.set(u,d-1),d!==1)return;let c=wt.get(u);c&&(c["aria-hidden"]===null?u.removeAttribute("aria-hidden"):u.setAttribute("aria-hidden",c["aria-hidden"]),u.inert=c.inert,wt.delete(u))});let s=(l=tt.get(u))!=null?l:0;tt.set(u,s+1),s===0&&(wt.set(u,{"aria-hidden":u.getAttribute("aria-hidden"),inert:u.inert}),u.setAttribute("aria-hidden","true"),u.inert=!0)})}let wa=Symbol("StackContext");var Mt=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Mt||{});function Gn(){return De(wa,()=>{})}function Kn({type:e,enabled:a,element:t,onUpdate:l}){let u=Gn();function s(...o){l==null||l(...o),u(...o)}se(()=>{ce(a,(o,d)=>{o?s(0,e,t):d===!0&&s(1,e,t)},{immediate:!0,flush:"sync"})}),_e(()=>{a.value&&s(1,e,t)}),Qe(wa,s)}let Qn=Symbol("DescriptionContext");function Yn({slot:e=C({}),name:a="Description",props:t={}}={}){let l=C([]);function u(s){return l.value.push(s),()=>{let o=l.value.indexOf(s);o!==-1&&l.value.splice(o,1)}}return Qe(Qn,{register:u,slot:e,name:a,props:t}),S(()=>l.value.length>0?l.value.join(" "):void 0)}var Jn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Jn||{});let Pt=Symbol("DialogContext");function ka(e){let a=De(Pt,null);if(a===null){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ka),t}return a}let ot="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Xn=Q({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:ot},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:a,attrs:t,slots:l,expose:u}){var s,o;let d=(s=e.id)!=null?s:`headlessui-dialog-${Ye()}`,c=C(!1);se(()=>{c.value=!0});let p=!1,b=S(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(p||(p=!0,console.warn(`Invalid role [${b}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),w=C(0),f=Ft(),$=S(()=>e.open===ot&&f!==null?(f.value&fe.Open)===fe.Open:e.open),h=C(null),I=S(()=>Xt(h));if(u({el:h,$el:h}),!(e.open!==ot||f!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof $.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${$.value===ot?void 0:e.open}`);let y=S(()=>c.value&&$.value?0:1),n=S(()=>y.value===0),r=S(()=>w.value>1),m=De(Pt,null)!==null,[k,g]=Ra(),{resolveContainers:A,mainTreeNodeRef:N,MainTreeNode:W}=Na({portals:k,defaultContainers:[S(()=>{var V;return(V=ae.panelRef.value)!=null?V:h.value})]}),G=S(()=>r.value?"parent":"leaf"),O=S(()=>f!==null?(f.value&fe.Closing)===fe.Closing:!1),z=S(()=>m||O.value?!1:n.value),J=S(()=>{var V,U,q;return(q=Array.from((U=(V=I.value)==null?void 0:V.querySelectorAll("body > *"))!=null?U:[]).find(ie=>ie.id==="headlessui-portal-root"?!1:ie.contains(K(N))&&ie instanceof HTMLElement))!=null?q:null});Gt(J,z);let ee=S(()=>r.value?!0:n.value),E=S(()=>{var V,U,q;return(q=Array.from((U=(V=I.value)==null?void 0:V.querySelectorAll("[data-headlessui-portal]"))!=null?U:[]).find(ie=>ie.contains(K(N))&&ie instanceof HTMLElement))!=null?q:null});Gt(E,ee),Kn({type:"Dialog",enabled:S(()=>y.value===0),element:h,onUpdate:(V,U)=>{if(U==="Dialog")return Ne(V,{[Mt.Add]:()=>w.value+=1,[Mt.Remove]:()=>w.value-=1})}});let Y=Yn({name:"DialogDescription",slot:S(()=>({open:$.value}))}),X=C(null),ae={titleId:X,panelRef:C(null),dialogState:y,setTitleId(V){X.value!==V&&(X.value=V)},close(){a("close",!1)}};Qe(Pt,ae);let ke=S(()=>!(!n.value||r.value));ea(A,(V,U)=>{V.preventDefault(),ae.close(),Ee(()=>U==null?void 0:U.focus())},ke);let $e=S(()=>!(r.value||y.value!==0));Zt((o=I.value)==null?void 0:o.defaultView,"keydown",V=>{$e.value&&(V.defaultPrevented||V.key===ue.Escape&&(V.preventDefault(),V.stopPropagation(),ae.close()))});let ge=S(()=>!(O.value||y.value!==0||m));return Wn(I,ge,V=>{var U;return{containers:[...(U=V.containers)!=null?U:[],A]}}),Re(V=>{if(y.value!==0)return;let U=K(h);if(!U)return;let q=new ResizeObserver(ie=>{for(let j of ie){let x=j.target.getBoundingClientRect();x.x===0&&x.y===0&&x.width===0&&x.height===0&&ae.close()}});q.observe(U),V(()=>q.disconnect())}),()=>{let{open:V,initialFocus:U,...q}=e,ie={...t,ref:h,id:d,role:b.value,"aria-modal":y.value===0?!0:void 0,"aria-labelledby":X.value,"aria-describedby":Y.value},j={open:y.value===0};return he(Nt,{force:!0},()=>[he(Da,()=>he(La,{target:h.value},()=>he(Nt,{force:!1},()=>he(et,{initialFocus:U,containers:A,features:n.value?Ne(G.value,{parent:et.features.RestoreFocus,leaf:et.features.All&~et.features.FocusLock}):et.features.None},()=>he(g,{},()=>Fe({ourProps:ie,theirProps:{...q,...t},slot:j,attrs:t,slots:l,visible:y.value===0,features:at.RenderStrategy|at.Static,name:"Dialog"})))))),he(W)])}}}),Zn=Q({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:a,slots:t,expose:l}){var u;let s=(u=e.id)!=null?u:`headlessui-dialog-panel-${Ye()}`,o=ka("DialogPanel");l({el:o.panelRef,$el:o.panelRef});function d(c){c.stopPropagation()}return()=>{let{...c}=e,p={id:s,ref:o.panelRef,onClick:d};return Fe({ourProps:p,theirProps:c,slot:{open:o.dialogState.value===0},attrs:a,slots:t,name:"DialogPanel"})}}});var el=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(el||{}),tl=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(tl||{});function al(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let $a=Symbol("MenuContext");function vt(e){let a=De($a,null);if(a===null){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,vt),t}return a}let nl=Q({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:a,attrs:t}){let l=C(1),u=C(null),s=C(null),o=C([]),d=C(""),c=C(null),p=C(1);function b(f=$=>$){let $=c.value!==null?o.value[c.value]:null,h=Wa(f(o.value.slice()),y=>K(y.dataRef.domRef)),I=$?h.indexOf($):null;return I===-1&&(I=null),{items:h,activeItemIndex:I}}let w={menuState:l,buttonRef:u,itemsRef:s,items:o,searchQuery:d,activeItemIndex:c,activationTrigger:p,closeMenu:()=>{l.value=1,c.value=null},openMenu:()=>l.value=0,goToItem(f,$,h){let I=b(),y=xn(f===xe.Specific?{focus:xe.Specific,id:$}:{focus:f},{resolveItems:()=>I.items,resolveActiveIndex:()=>I.activeItemIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.disabled});d.value="",c.value=y,p.value=h??1,o.value=I.items},search(f){let $=d.value!==""?0:1;d.value+=f.toLowerCase();let h=(c.value!==null?o.value.slice(c.value+$).concat(o.value.slice(0,c.value+$)):o.value).find(y=>y.dataRef.textValue.startsWith(d.value)&&!y.dataRef.disabled),I=h?o.value.indexOf(h):-1;I===-1||I===c.value||(c.value=I,p.value=1)},clearSearch(){d.value=""},registerItem(f,$){let h=b(I=>[...I,{id:f,dataRef:$}]);o.value=h.items,c.value=h.activeItemIndex,p.value=1},unregisterItem(f){let $=b(h=>{let I=h.findIndex(y=>y.id===f);return I!==-1&&h.splice(I,1),h});o.value=$.items,c.value=$.activeItemIndex,p.value=1}};return ea([u,s],(f,$)=>{var h;w.closeMenu(),Va($,qa.Loose)||(f.preventDefault(),(h=K(u))==null||h.focus())},S(()=>l.value===0)),Qe($a,w),ta(S(()=>Ne(l.value,{0:fe.Open,1:fe.Closed}))),()=>{let f={open:l.value===0,close:w.closeMenu};return Fe({ourProps:{},theirProps:e,slot:f,slots:a,attrs:t,name:"Menu"})}}}),ll=Q({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:a,slots:t,expose:l}){var u;let s=(u=e.id)!=null?u:`headlessui-menu-button-${Ye()}`,o=vt("MenuButton");l({el:o.buttonRef,$el:o.buttonRef});function d(w){switch(w.key){case ue.Space:case ue.Enter:case ue.ArrowDown:w.preventDefault(),w.stopPropagation(),o.openMenu(),Ee(()=>{var f;(f=K(o.itemsRef))==null||f.focus({preventScroll:!0}),o.goToItem(xe.First)});break;case ue.ArrowUp:w.preventDefault(),w.stopPropagation(),o.openMenu(),Ee(()=>{var f;(f=K(o.itemsRef))==null||f.focus({preventScroll:!0}),o.goToItem(xe.Last)});break}}function c(w){switch(w.key){case ue.Space:w.preventDefault();break}}function p(w){e.disabled||(o.menuState.value===0?(o.closeMenu(),Ee(()=>{var f;return(f=K(o.buttonRef))==null?void 0:f.focus({preventScroll:!0})})):(w.preventDefault(),o.openMenu(),al(()=>{var f;return(f=K(o.itemsRef))==null?void 0:f.focus({preventScroll:!0})})))}let b=aa(S(()=>({as:e.as,type:a.type})),o.buttonRef);return()=>{var w;let f={open:o.menuState.value===0},{...$}=e,h={ref:o.buttonRef,id:s,type:b.value,"aria-haspopup":"menu","aria-controls":(w=K(o.itemsRef))==null?void 0:w.id,"aria-expanded":o.menuState.value===0,onKeydown:d,onKeyup:c,onClick:p};return Fe({ourProps:h,theirProps:$,slot:f,attrs:a,slots:t,name:"MenuButton"})}}}),ol=Q({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:a,slots:t,expose:l}){var u;let s=(u=e.id)!=null?u:`headlessui-menu-items-${Ye()}`,o=vt("MenuItems"),d=C(null);l({el:o.itemsRef,$el:o.itemsRef}),In({container:S(()=>K(o.itemsRef)),enabled:S(()=>o.menuState.value===0),accept(f){return f.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:f.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(f){f.setAttribute("role","none")}});function c(f){var $;switch(d.value&&clearTimeout(d.value),f.key){case ue.Space:if(o.searchQuery.value!=="")return f.preventDefault(),f.stopPropagation(),o.search(f.key);case ue.Enter:if(f.preventDefault(),f.stopPropagation(),o.activeItemIndex.value!==null){let h=o.items.value[o.activeItemIndex.value];($=K(h.dataRef.domRef))==null||$.click()}o.closeMenu(),na(K(o.buttonRef));break;case ue.ArrowDown:return f.preventDefault(),f.stopPropagation(),o.goToItem(xe.Next);case ue.ArrowUp:return f.preventDefault(),f.stopPropagation(),o.goToItem(xe.Previous);case ue.Home:case ue.PageUp:return f.preventDefault(),f.stopPropagation(),o.goToItem(xe.First);case ue.End:case ue.PageDown:return f.preventDefault(),f.stopPropagation(),o.goToItem(xe.Last);case ue.Escape:f.preventDefault(),f.stopPropagation(),o.closeMenu(),Ee(()=>{var h;return(h=K(o.buttonRef))==null?void 0:h.focus({preventScroll:!0})});break;case ue.Tab:f.preventDefault(),f.stopPropagation(),o.closeMenu(),Ee(()=>Ha(K(o.buttonRef),f.shiftKey?ze.Previous:ze.Next));break;default:f.key.length===1&&(o.search(f.key),d.value=setTimeout(()=>o.clearSearch(),350));break}}function p(f){switch(f.key){case ue.Space:f.preventDefault();break}}let b=Ft(),w=S(()=>b!==null?(b.value&fe.Open)===fe.Open:o.menuState.value===0);return()=>{var f,$;let h={open:o.menuState.value===0},{...I}=e,y={"aria-activedescendant":o.activeItemIndex.value===null||(f=o.items.value[o.activeItemIndex.value])==null?void 0:f.id,"aria-labelledby":($=K(o.buttonRef))==null?void 0:$.id,id:s,onKeydown:c,onKeyup:p,role:"menu",tabIndex:0,ref:o.itemsRef};return Fe({ourProps:y,theirProps:I,slot:h,attrs:a,slots:t,features:at.RenderStrategy|at.Static,visible:w.value,name:"MenuItems"})}}}),sl=Q({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:a,attrs:t,expose:l}){var u;let s=(u=e.id)!=null?u:`headlessui-menu-item-${Ye()}`,o=vt("MenuItem"),d=C(null);l({el:d,$el:d});let c=S(()=>o.activeItemIndex.value!==null?o.items.value[o.activeItemIndex.value].id===s:!1),p=Sn(d),b=S(()=>({disabled:e.disabled,get textValue(){return p()},domRef:d}));se(()=>o.registerItem(s,b)),_e(()=>o.unregisterItem(s)),Re(()=>{o.menuState.value===0&&c.value&&o.activationTrigger.value!==0&&Ee(()=>{var n,r;return(r=(n=K(d))==null?void 0:n.scrollIntoView)==null?void 0:r.call(n,{block:"nearest"})})});function w(n){if(e.disabled)return n.preventDefault();o.closeMenu(),na(K(o.buttonRef))}function f(){if(e.disabled)return o.goToItem(xe.Nothing);o.goToItem(xe.Specific,s)}let $=Cn();function h(n){$.update(n)}function I(n){$.wasMoved(n)&&(e.disabled||c.value||o.goToItem(xe.Specific,s,0))}function y(n){$.wasMoved(n)&&(e.disabled||c.value&&o.goToItem(xe.Nothing))}return()=>{let{disabled:n,...r}=e,m={active:c.value,disabled:n,close:o.closeMenu};return Fe({ourProps:{id:s,ref:d,role:"menuitem",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,onClick:w,onFocus:f,onPointerenter:h,onMouseenter:h,onPointermove:I,onMousemove:I,onPointerleave:y,onMouseleave:y},theirProps:{...t,...r},slot:m,attrs:t,slots:a,name:"MenuItem"})}}}),il=Symbol("GroupContext"),rl=Q({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(e,{emit:a,attrs:t,slots:l,expose:u}){var s;let o=(s=e.id)!=null?s:`headlessui-switch-${Ye()}`,d=De(il,null),[c,p]=Mn(S(()=>e.modelValue),r=>a("update:modelValue",r),S(()=>e.defaultChecked));function b(){p(!c.value)}let w=C(null),f=d===null?w:d.switchRef,$=aa(S(()=>({as:e.as,type:t.type})),f);u({el:f,$el:f});function h(r){r.preventDefault(),b()}function I(r){r.key===ue.Space?(r.preventDefault(),b()):r.key===ue.Enter&&Pn(r.currentTarget)}function y(r){r.preventDefault()}let n=S(()=>{var r,m;return(m=(r=K(f))==null?void 0:r.closest)==null?void 0:m.call(r,"form")});return se(()=>{ce([n],()=>{if(!n.value||e.defaultChecked===void 0)return;function r(){p(e.defaultChecked)}return n.value.addEventListener("reset",r),()=>{var m;(m=n.value)==null||m.removeEventListener("reset",r)}},{immediate:!0})}),()=>{let{name:r,value:m,form:k,tabIndex:g,...A}=e,N={checked:c.value},W={id:o,ref:f,role:"switch",type:$.value,tabIndex:g===-1?0:g,"aria-checked":c.value,"aria-labelledby":d==null?void 0:d.labelledby.value,"aria-describedby":d==null?void 0:d.describedby.value,onClick:h,onKeyup:I,onKeypress:y};return he(Z,[r!=null&&c.value!=null?he(St,Ga({features:Ct.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:c.value,form:k,disabled:A.disabled,name:r,value:m})):null,Fe({ourProps:W,theirProps:{...t,...la(A,["modelValue","defaultChecked"])},slot:N,attrs:t,slots:l,name:"Switch"})])}}});function ul(e){let a={called:!1};return(...t)=>{if(!a.called)return a.called=!0,e(...t)}}function kt(e,...a){e&&a.length>0&&e.classList.add(...a)}function st(e,...a){e&&a.length>0&&e.classList.remove(...a)}var _t=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(_t||{});function dl(e,a){let t=ft();if(!e)return t.dispose;let{transitionDuration:l,transitionDelay:u}=getComputedStyle(e),[s,o]=[l,u].map(d=>{let[c=0]=d.split(",").filter(Boolean).map(p=>p.includes("ms")?parseFloat(p):parseFloat(p)*1e3).sort((p,b)=>b-p);return c});return s!==0?t.setTimeout(()=>a("finished"),s+o):a("finished"),t.add(()=>a("cancelled")),t.dispose}function Kt(e,a,t,l,u,s){let o=ft(),d=s!==void 0?ul(s):()=>{};return st(e,...u),kt(e,...a,...t),o.nextFrame(()=>{st(e,...t),kt(e,...l),o.add(dl(e,c=>(st(e,...l,...a),kt(e,...u),d(c))))}),o.add(()=>st(e,...a,...t,...l,...u)),o.add(()=>d("cancelled")),o.dispose}function qe(e=""){return e.split(/\s+/).filter(a=>a.length>1)}let Ut=Symbol("TransitionContext");var cl=(e=>(e.Visible="visible",e.Hidden="hidden",e))(cl||{});function ml(){return De(Ut,null)!==null}function fl(){let e=De(Ut,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function pl(){let e=De(Et,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let Et=Symbol("NestingContext");function gt(e){return"children"in e?gt(e.children):e.value.filter(({state:a})=>a==="visible").length>0}function Ia(e){let a=C([]),t=C(!1);se(()=>t.value=!0),_e(()=>t.value=!1);function l(s,o=We.Hidden){let d=a.value.findIndex(({id:c})=>c===s);d!==-1&&(Ne(o,{[We.Unmount](){a.value.splice(d,1)},[We.Hidden](){a.value[d].state="hidden"}}),!gt(a)&&t.value&&(e==null||e()))}function u(s){let o=a.value.find(({id:d})=>d===s);return o?o.state!=="visible"&&(o.state="visible"):a.value.push({id:s,state:"visible"}),()=>l(s,We.Unmount)}return{children:a,register:u,unregister:l}}let Sa=at.RenderStrategy,Ca=Q({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:a,attrs:t,slots:l,expose:u}){let s=C(0);function o(){s.value|=fe.Opening,a("beforeEnter")}function d(){s.value&=~fe.Opening,a("afterEnter")}function c(){s.value|=fe.Closing,a("beforeLeave")}function p(){s.value&=~fe.Closing,a("afterLeave")}if(!ml()&&Ka())return()=>he(xa,{...e,onBeforeEnter:o,onAfterEnter:d,onBeforeLeave:c,onAfterLeave:p},l);let b=C(null),w=S(()=>e.unmount?We.Unmount:We.Hidden);u({el:b,$el:b});let{show:f,appear:$}=fl(),{register:h,unregister:I}=pl(),y=C(f.value?"visible":"hidden"),n={value:!0},r=Ye(),m={value:!1},k=Ia(()=>{!m.value&&y.value!=="hidden"&&(y.value="hidden",I(r),p())});se(()=>{let ee=h(r);_e(ee)}),Re(()=>{if(w.value===We.Hidden&&r){if(f.value&&y.value!=="visible"){y.value="visible";return}Ne(y.value,{hidden:()=>I(r),visible:()=>h(r)})}});let g=qe(e.enter),A=qe(e.enterFrom),N=qe(e.enterTo),W=qe(e.entered),G=qe(e.leave),O=qe(e.leaveFrom),z=qe(e.leaveTo);se(()=>{Re(()=>{if(y.value==="visible"){let ee=K(b);if(ee instanceof Comment&&ee.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function J(ee){let E=n.value&&!$.value,Y=K(b);!Y||!(Y instanceof HTMLElement)||E||(m.value=!0,f.value&&o(),f.value||c(),ee(f.value?Kt(Y,g,A,N,W,X=>{m.value=!1,X===_t.Finished&&d()}):Kt(Y,G,O,z,W,X=>{m.value=!1,X===_t.Finished&&(gt(k)||(y.value="hidden",I(r),p()))})))}return se(()=>{ce([f],(ee,E,Y)=>{J(Y),n.value=!1},{immediate:!0})}),Qe(Et,k),ta(S(()=>Ne(y.value,{visible:fe.Open,hidden:fe.Closed})|s.value)),()=>{let{appear:ee,show:E,enter:Y,enterFrom:X,enterTo:ae,entered:ke,leave:$e,leaveFrom:ge,leaveTo:V,...U}=e,q={ref:b},ie={...U,...$.value&&f.value&&Qa.isServer?{class:R([t.class,U.class,...g,...A])}:{}};return Fe({theirProps:ie,ourProps:q,slot:{},slots:l,attrs:t,features:Sa,visible:y.value==="visible",name:"TransitionChild"})}}}),vl=Ca,xa=Q({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:a,attrs:t,slots:l}){let u=Ft(),s=S(()=>e.show===null&&u!==null?(u.value&fe.Open)===fe.Open:e.show);Re(()=>{if(![!0,!1].includes(s.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let o=C(s.value?"visible":"hidden"),d=Ia(()=>{o.value="hidden"}),c=C(!0),p={show:s,appear:S(()=>e.appear||!c.value)};return se(()=>{Re(()=>{c.value=!1,s.value?o.value="visible":gt(d)||(o.value="hidden")})}),Qe(Et,d),Qe(Ut,p),()=>{let b=la(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),w={unmount:e.unmount};return Fe({ourProps:{...w,as:"template"},theirProps:{},slot:{},slots:{...l,default:()=>[he(vl,{onBeforeEnter:()=>a("beforeEnter"),onAfterEnter:()=>a("afterEnter"),onBeforeLeave:()=>a("beforeLeave"),onAfterLeave:()=>a("afterLeave"),...t,...w,...b},l.default)]},attrs:{},features:Sa,visible:o.value==="visible",name:"Transition"})}}});const $t=Le(te.ui.strategy,te.ui.dropdown,Ya),gl=Q({components:{HMenu:nl,HMenuButton:ll,HMenuItems:ol,HMenuItem:sl,UIcon:ve,UAvatar:ut,UKbd:ma},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},openDelay:{type:Number,default:()=>$t.default.openDelay},closeDelay:{type:Number,default:()=>$t.default.closeDelay},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(e,{emit:a}){const{ui:t,attrs:l}=Ve("dropdown",Se(e,"ui"),$t,Se(e,"class")),u=S(()=>dt(e.mode==="hover"?{offsetDistance:0}:{},e.popper,t.value.popper)),[s,o]=Ja(u.value),d=C(null);let c=null,p=null;se(()=>{var r,m;const y=(r=s.value)==null?void 0:r.$.provides;if(!y)return;const n=Object.getOwnPropertySymbols(y);d.value=n.length&&y[n[0]],e.open&&((m=d.value)==null||m.openMenu())});const b=S(()=>{var m,k,g;if(e.mode!=="hover")return{};const y=((m=e.popper)==null?void 0:m.offsetDistance)||((k=t.value.popper)==null?void 0:k.offsetDistance)||8,n=(g=u.value.placement)==null?void 0:g.split("-")[0],r=`${y}px`;return n==="top"||n==="bottom"?{paddingTop:r,paddingBottom:r}:n==="left"||n==="right"?{paddingLeft:r,paddingRight:r}:{paddingTop:r,paddingBottom:r,paddingLeft:r,paddingRight:r}});function w(y){!y.cancelable||!d.value||(d.value.menuState===0?d.value.closeMenu():d.value.openMenu())}function f(){e.mode!=="hover"||!d.value||(p&&(clearTimeout(p),p=null),d.value.menuState!==0&&(c=c||setTimeout(()=>{d.value.openMenu&&d.value.openMenu(),c=null},e.openDelay)))}function $(){e.mode!=="hover"||!d.value||(c&&(clearTimeout(c),c=null),d.value.menuState!==1&&(p=p||setTimeout(()=>{d.value.closeMenu&&d.value.closeMenu(),p=null},e.closeDelay)))}function h(y,n,{href:r,navigate:m,close:k,isExternal:g}){n.click&&n.click(y),r&&!g&&(m(y),k())}ce(()=>e.open,(y,n)=>{d.value&&(n===void 0||y===n||(y?d.value.openMenu():d.value.closeMenu()))}),ce(()=>{var y;return(y=d.value)==null?void 0:y.menuState},(y,n)=>{n===void 0||y===n||a("update:open",y===0)});const I=sa;return zt(()=>Tt()),{ui:t,attrs:l,popper:u,trigger:s,container:o,containerStyle:b,onTouchStart:w,onMouseEnter:f,onMouseLeave:$,onClick:h,getNuxtLinkProps:Xa,twMerge:Te,twJoin:de,NuxtLink:I}}}),hl=["disabled"];function bl(e,a,t,l,u,s){const o=be("HMenuButton"),d=ve,c=ut,p=ma,b=be("HMenuItem"),w=sa,f=be("HMenuItems"),$=be("HMenu");return v(),T($,re({as:"div",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:B(({open:h})=>[M(o,{ref:"trigger",as:"div",disabled:e.disabled,class:R(e.ui.trigger),role:"button",onMouseenter:e.onMouseEnter,onTouchstartPassive:e.onTouchStart},{default:B(()=>[pe(e.$slots,"default",{open:h,disabled:e.disabled},()=>[P("button",{disabled:e.disabled}," Open ",8,hl)])]),_:2},1032,["disabled","class","onMouseenter","onTouchstartPassive"]),h&&e.items.length?(v(),F("div",{key:0,ref:"container",class:R([e.ui.container,e.ui.width]),style:oa(e.containerStyle),onMouseenter:a[0]||(a[0]=(...I)=>e.onMouseEnter&&e.onMouseEnter(...I))},[M(Za,re({appear:""},e.ui.transition),{default:B(()=>[P("div",null,[e.popper.arrow?(v(),F("div",{key:0,"data-popper-arrow":"",class:R(Object.values(e.ui.arrow))},null,2)):_("",!0),M(f,{class:R([e.ui.base,e.ui.divide,e.ui.ring,e.ui.rounded,e.ui.shadow,e.ui.background,e.ui.height]),static:""},{default:B(()=>[(v(!0),F(Z,null,me(e.items,(I,y)=>(v(),F("div",{key:y,class:R(e.ui.padding)},[(v(!0),F(Z,null,me(I,(n,r)=>(v(),T(w,re({key:r,ref_for:!0},e.getNuxtLinkProps(n),{custom:""}),{default:B(({href:m,target:k,rel:g,navigate:A,isExternal:N,isActive:W})=>[M(b,{disabled:n.disabled},{default:B(({active:G,disabled:O,close:z})=>[(v(),T(en(m?"a":"button"),{href:O?void 0:m,rel:g,target:k,class:R(e.twMerge(e.twJoin(e.ui.item.base,e.ui.item.padding,e.ui.item.size,e.ui.item.rounded,G||W?e.ui.item.active:e.ui.item.inactive,O&&e.ui.item.disabled),n.class)),onClick:J=>e.onClick(J,n,{href:m,navigate:A,close:z,isExternal:N})},{default:B(()=>[pe(e.$slots,n.slot||"item",{item:n},()=>{var J;return[n.icon?(v(),T(d,{key:0,name:n.icon,class:R(e.twMerge(e.twJoin(e.ui.item.icon.base,G||W?e.ui.item.icon.active:e.ui.item.icon.inactive),n.iconClass))},null,8,["name","class"])):n.avatar?(v(),T(c,re({key:1,ref_for:!0},{size:e.ui.item.avatar.size,...n.avatar},{class:e.ui.item.avatar.base}),null,16,["class"])):_("",!0),P("span",{class:R(e.twMerge(e.ui.item.label,n.labelClass))},H(n.label),3),(J=n.shortcuts)!=null&&J.length?(v(),F("span",{key:2,class:R(e.ui.item.shortcuts)},[(v(!0),F(Z,null,me(n.shortcuts,ee=>(v(),T(p,{key:ee},{default:B(()=>[L(H(ee),1)]),_:2},1024))),128))],2)):_("",!0)]})]),_:2},1032,["href","rel","target","class","onClick"]))]),_:2},1032,["disabled"])]),_:2},1040))),128))],2))),128))]),_:3},8,["class"])])]),_:3},16)],38)):_("",!0)]),_:3},16,["class","onMouseleave"])}const ht=Oe(gl,[["render",bl]]),je=Le(te.ui.strategy,te.ui.textarea,tn),yl=Q({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(je.size).includes(e)}},color:{type:String,default:()=>je.default.color,validator(e){return[...te.ui.colors,...Object.keys(je.color)].includes(e)}},variant:{type:String,default:()=>je.default.variant,validator(e){return[...Object.keys(je.variant),...Object.values(je.color).flatMap(a=>Object.keys(a))].includes(e)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:a}){const{ui:t,attrs:l}=Ve("textarea",Se(e,"ui"),je,Se(e,"class")),{emitFormBlur:u,emitFormInput:s,inputId:o,color:d,size:c,name:p}=pt(e,je),b=C(dt({},e.modelModifiers,{trim:!1,lazy:!1,number:!1})),w=C(null),f=()=>{var m;e.autofocus&&((m=w.value)==null||m.focus())},$=()=>{if(e.autoresize){if(!w.value)return;w.value.rows=e.rows;const m=window.getComputedStyle(w.value),k=parseInt(m.paddingTop),g=parseInt(m.paddingBottom),A=k+g,N=parseInt(m.lineHeight),{scrollHeight:W}=w.value,G=(W-A)/N;G>e.rows&&(w.value.rows=e.maxrows?Math.min(G,e.maxrows):G)}},h=m=>{b.value.trim&&(m=m.trim()),b.value.number&&(m=an(m)),a("update:modelValue",m),s()},I=m=>{$(),b.value.lazy||h(m.target.value)},y=m=>{const k=m.target.value;a("change",k),b.value.lazy&&h(k),b.value.trim&&(m.target.value=k.trim())},n=m=>{a("blur",m),u()};se(()=>{setTimeout(()=>{f()},e.autofocusDelay)}),ce(()=>e.modelValue,()=>{Ee($)}),se(()=>{setTimeout(()=>{f(),$()},100)});const r=S(()=>{var k,g;const m=((g=(k=t.value.color)==null?void 0:k[d.value])==null?void 0:g[e.variant])||t.value.variant[e.variant];return Te(de(t.value.base,t.value.form,t.value.rounded,t.value.placeholder,t.value.size[c.value],e.padded?t.value.padding[c.value]:"p-0",m==null?void 0:m.replaceAll("{color}",d.value),!e.resize&&"resize-none"),e.textareaClass)});return{ui:t,attrs:l,name:p,inputId:o,textarea:w,textareaClass:r,onInput:I,onChange:y,onBlur:n}}}),wl=["id","value","name","rows","required","disabled","placeholder"];function kl(e,a,t,l,u,s){return v(),F("div",{class:R(e.ui.wrapper)},[P("textarea",re({id:e.inputId,ref:"textarea",value:e.modelValue,name:e.name,rows:e.rows,required:e.required,disabled:e.disabled,placeholder:e.placeholder,class:e.textareaClass},e.attrs,{onInput:a[0]||(a[0]=(...o)=>e.onInput&&e.onInput(...o)),onBlur:a[1]||(a[1]=(...o)=>e.onBlur&&e.onBlur(...o)),onChange:a[2]||(a[2]=(...o)=>e.onChange&&e.onChange(...o))}),null,16,wl),pe(e.$slots,"default")],2)}const $l=Oe(yl,[["render",kl]]);async function Il(e,a){return await Sl(a).catch(l=>(console.error("Failed to get image meta for "+a,l+""),{width:0,height:0,ratio:0}))}async function Sl(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((a,t)=>{const l=new Image;l.onload=()=>{const u={width:l.width,height:l.height,ratio:l.width/l.height};a(u)},l.onerror=u=>t(u),l.src=e})}function Qt(e){return a=>a?e[a]||a:e.missingValue}function Cl({formatter:e,keyMap:a,joinWith:t="/",valueMap:l}={}){e||(e=(s,o)=>`${s}=${o}`),a&&typeof a!="function"&&(a=Qt(a));const u=l||{};return Object.keys(u).forEach(s=>{typeof u[s]!="function"&&(u[s]=Qt(u[s]))}),(s={})=>Object.entries(s).filter(([d,c])=>typeof c<"u").map(([d,c])=>{const p=u[d];return typeof p=="function"&&(c=p(s[d])),d=typeof a=="function"?a(d):d,e(d,c)}).join(t)}function Pe(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function xl(e=""){if(e===void 0||!e.length)return[];const a=new Set;for(const t of e.split(" ")){const l=Number.parseInt(t.replace("x",""));l&&a.add(l)}return Array.from(a)}function Ml(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function Pl(e){const a={};if(typeof e=="string")for(const t of e.split(/[\s,]+/).filter(l=>l)){const l=t.split(":");l.length!==2?a["1px"]=l[0].trim():a[l[0].trim()]=l[1].trim()}else Object.assign(a,e);return a}function _l(e){const a={options:e},t=(u,s={})=>Ma(a,u,s),l=(u,s={},o={})=>t(u,{...o,modifiers:dt(s,o.modifiers||{})}).url;for(const u in e.presets)l[u]=(s,o,d)=>l(s,o,{...e.presets[u],...d});return l.options=e,l.getImage=t,l.getMeta=(u,s)=>Fl(a,u,s),l.getSizes=(u,s)=>Ol(a,u,s),a.$img=l,l}async function Fl(e,a,t){const l=Ma(e,a,{...t});return typeof l.getMeta=="function"?await l.getMeta():await Il(e,l.url)}function Ma(e,a,t){var p,b;if(a&&typeof a!="string")throw new TypeError(`input must be a string (received ${typeof a}: ${JSON.stringify(a)})`);if(!a||a.startsWith("data:"))return{url:a};const{provider:l,defaults:u}=zl(e,t.provider||e.options.provider),s=Tl(e,t.preset);if(a=Dt(a)?a:nn(a),!l.supportsAlias){for(const w in e.options.alias)if(a.startsWith(w)){const f=e.options.alias[w];f&&(a=xt(f,a.slice(w.length)))}}if(l.validateDomains&&Dt(a)){const w=ln(a).host;if(!e.options.domains.find(f=>f===w))return{url:a}}const o=dt(t,s,u);o.modifiers={...o.modifiers};const d=o.modifiers.format;(p=o.modifiers)!=null&&p.width&&(o.modifiers.width=Pe(o.modifiers.width)),(b=o.modifiers)!=null&&b.height&&(o.modifiers.height=Pe(o.modifiers.height));const c=l.getImage(a,o,e);return c.format=c.format||d||"",c}function zl(e,a){const t=e.options.providers[a];if(!t)throw new Error("Unknown provider: "+a);return t}function Tl(e,a){if(!a)return{};if(!e.options.presets[a])throw new Error("Unknown preset: "+a);return e.options.presets[a]}function Ol(e,a,t){var h,I,y,n,r;const l=Pe((h=t.modifiers)==null?void 0:h.width),u=Pe((I=t.modifiers)==null?void 0:I.height),s=Pl(t.sizes),o=(y=t.densities)!=null&&y.trim()?xl(t.densities.trim()):e.options.densities;Ml(o);const d=l&&u?u/l:0,c=[],p=[];if(Object.keys(s).length>=1){for(const m in s){const k=Yt(m,String(s[m]),u,d,e);if(k!==void 0){c.push({size:k.size,screenMaxWidth:k.screenMaxWidth,media:`(max-width: ${k.screenMaxWidth}px)`});for(const g of o)p.push({width:k._cWidth*g,src:Jt(e,a,t,k,g)})}}Bl(c)}else for(const m of o){const k=Object.keys(s)[0];let g=k?Yt(k,String(s[k]),u,d,e):void 0;g===void 0&&(g={size:"",screenMaxWidth:0,_cWidth:(n=t.modifiers)==null?void 0:n.width,_cHeight:(r=t.modifiers)==null?void 0:r.height}),p.push({width:m,src:Jt(e,a,t,g,m)})}Al(p);const b=p[p.length-1],w=c.length?c.map(m=>`${m.media?m.media+" ":""}${m.size}`).join(", "):void 0,f=w?"w":"x",$=p.map(m=>`${m.src} ${m.width}${f}`).join(", ");return{sizes:w,srcset:$,src:b==null?void 0:b.src}}function Yt(e,a,t,l,u){const s=u.options.screens&&u.options.screens[e]||Number.parseInt(e),o=a.endsWith("vw");if(!o&&/^\d+$/.test(a)&&(a=a+"px"),!o&&!a.endsWith("px"))return;let d=Number.parseInt(a);if(!s||!d)return;o&&(d=Math.round(d/100*s));const c=l?Math.round(d*l):t;return{size:a,screenMaxWidth:s,_cWidth:d,_cHeight:c}}function Jt(e,a,t,l,u){return e.$img(a,{...t.modifiers,width:l._cWidth?l._cWidth*u:void 0,height:l._cHeight?l._cHeight*u:void 0},t)}function Bl(e){var t;e.sort((l,u)=>l.screenMaxWidth-u.screenMaxWidth);let a=null;for(let l=e.length-1;l>=0;l--){const u=e[l];u.media===a&&e.splice(l,1),a=u.media}for(let l=0;l<e.length;l++)e[l].media=((t=e[l+1])==null?void 0:t.media)||""}function Al(e){e.sort((t,l)=>t.width-l.width);let a=null;for(let t=e.length-1;t>=0;t--){const l=e[t];l.width===a&&e.splice(t,1),a=l.width}}const jl=Cl({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,a)=>Lt(e)+"_"+Lt(a)}),Ul=(e,{modifiers:a={},baseURL:t}={},l)=>{a.width&&a.height&&(a.resize=`${a.width}x${a.height}`,delete a.width,delete a.height);const u=jl(a)||"_";return t||(t=xt(l.options.nuxt.baseURL,"/_ipx")),{url:xt(t,u,on(e))}},El=!0,Rl=!0,Nl=Object.freeze(Object.defineProperty({__proto__:null,getImage:Ul,supportsAlias:Rl,validateDomains:El},Symbol.toStringTag,{value:"Module"})),Pa={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"]};Pa.providers={ipxStatic:{provider:Nl,defaults:{}}};const Rt=()=>{const e=sn(),a=ia();return a.$img||a._img||(a._img=_l({...Pa,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};function Dl(e){var a;(a=performance==null?void 0:performance.mark)==null||a.call(performance,"mark_feature_usage",{detail:{feature:e}})}const Ll={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},Vl=e=>{const a=S(()=>({provider:e.provider,preset:e.preset})),t=S(()=>({width:Pe(e.width),height:Pe(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),l=Rt(),u=S(()=>({...e.modifiers,width:Pe(e.width),height:Pe(e.height),format:e.format,quality:e.quality||l.options.quality,background:e.background,fit:e.fit}));return{options:a,attrs:t,modifiers:u}},ql={...Ll,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1}},Hl=["src"],Xe=Q({__name:"NuxtImg",props:ql,emits:["load","error"],setup(e,{emit:a}){const t=e,l=rn(),u=a,s=!1,o=Rt(),d=Vl(t),c=C(!1),p=C(),b=S(()=>o.getSizes(t.src,{...d.options.value,sizes:t.sizes,densities:t.densities,modifiers:{...d.modifiers.value,width:Pe(t.width),height:Pe(t.height)}})),w=S(()=>{const n={...d.attrs.value,"data-nuxt-img":""};return(!t.placeholder||c.value)&&(n.sizes=b.value.sizes,n.srcset=b.value.srcset),n}),f=S(()=>{let n=t.placeholder;if(n===""&&(n=!0),!n||c.value)return!1;if(typeof n=="string")return n;const r=Array.isArray(n)?n:typeof n=="number"?[n,n]:[10,10];return o(t.src,{...d.modifiers.value,width:r[0],height:r[1],quality:r[2]||50,blur:r[3]||3},d.options.value)}),$=S(()=>t.sizes?b.value.src:o(t.src,d.modifiers.value,d.options.value)),h=S(()=>f.value?f.value:$.value),y=ia().isHydrating;return se(()=>{if(f.value){const n=new Image;$.value&&(n.src=$.value),t.sizes&&(n.sizes=b.value.sizes||"",n.srcset=b.value.srcset),n.onload=r=>{c.value=!0,u("load",r)},Dl("nuxt-image");return}p.value&&(p.value.complete&&y&&(p.value.getAttribute("data-error")?u("error",new Event("error")):u("load",new Event("load"))),p.value.onload=n=>{u("load",n)},p.value.onerror=n=>{u("error",n)})}),(n,r)=>(v(),F("img",re({ref_key:"imgEl",ref:p,class:t.placeholder&&!c.value?t.placeholderClass:void 0},{...i(s)?{onerror:"this.setAttribute('data-error', 1)"}:{},...w.value,...i(l)},{src:h.value}),null,16,Hl))}}),it=Le(te.ui.strategy,te.ui.range,Bn),Wl=Q({inheritAttrs:!1,props:{modelValue:{type:Number,default:0},id:{type:String,default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},size:{type:String,default:null,validator(e){return Object.keys(it.size).includes(e)}},color:{type:String,default:()=>it.default.color,validator(e){return te.ui.colors.includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a}){const{ui:t,attrs:l}=Ve("range",Se(e,"ui"),it),{emitFormChange:u,inputId:s,color:o,size:d,name:c}=pt(e,it),p=S({get(){return e.modelValue},set(n){a("update:modelValue",n)}}),b=n=>{a("change",n.target.value),u()},w=S(()=>Te(de(t.value.wrapper,t.value.size[d.value]),e.class)),f=S(()=>Te(de(t.value.base,t.value.background,t.value.rounded,o.value&&t.value.ring.replaceAll("{color}",o.value),t.value.size[d.value]),e.inputClass)),$=S(()=>de(t.value.thumb.base,o.value&&t.value.thumb.color.replaceAll("{color}",o.value),t.value.thumb.ring,t.value.thumb.background,t.value.thumb.size[d.value])),h=S(()=>de(t.value.track.base,t.value.track.background,t.value.track.rounded,t.value.track.size[d.value])),I=S(()=>de(t.value.progress.base,t.value.progress.rounded,o.value&&t.value.progress.background.replaceAll("{color}",o.value),t.value.progress.size[d.value])),y=S(()=>{const{modelValue:n,min:r,max:m}=e;return{width:`${(Math.max(r,Math.min(n,m))-r)/(m-r)*100}%`}});return{ui:t,attrs:l,name:c,inputId:s,value:p,wrapperClass:w,inputClass:f,thumbClass:$,trackClass:h,progressClass:I,progressStyle:y,onChange:b}}}),Gl=["id","name","min","max","disabled","step"];function Kl(e,a,t,l,u,s){return v(),F("div",{class:R(e.wrapperClass)},[ct(P("input",re({id:e.inputId,ref:"input","onUpdate:modelValue":a[0]||(a[0]=o=>e.value=o),name:e.name,min:e.min,max:e.max,disabled:e.disabled,step:e.step,type:"range",class:[e.inputClass,e.thumbClass,e.trackClass]},e.attrs,{onChange:a[1]||(a[1]=(...o)=>e.onChange&&e.onChange(...o))}),null,16,Gl),[[un,e.value,void 0,{number:!0}]]),P("span",{class:R(e.progressClass),style:oa(e.progressStyle)},null,6)],2)}const _a=Oe(Wl,[["render",Kl]]),Ql={class:"image-mask flex flex-col w-full"},Yl={class:"canvas flex flex-col items-center justify-center mb-3 w-full"},Jl={class:"preview-over-original relative"},Xl={class:"actions flex items-center justify-center mb-3 mx-auto"},Zl={class:"options w-full max-w-[320px]"},eo=Q({__name:"ImageInpaint",props:dn({imageSrc:{type:String,required:!0}},{imageInpaintMask:{default:"",type:String},imageInpaintMaskModifiers:{},imageInpaintMaskData:{default:{},type:Object},imageInpaintMaskDataModifiers:{}}),emits:["update:imageInpaintMask","update:imageInpaintMaskData"],setup(e){const a=e,t=Vt(e,"imageInpaintMask"),l=Vt(e,"imageInpaintMaskData"),u=Be(),s=C(null),o=C(null),d=C(null),c=C(null),p=C(30),b=C([]),w=C({width:u.$state.outputMaxSize,height:u.$state.outputMaxSize}),f=C(null),$=C({x:0,y:0}),h=C({x:0,y:0,radius:p.value,fill:"rgba(255, 255, 255, 0.5)",stroke:null,strokeWidth:0,visible:!1}),I=C(5),y=C(!1),n=C([]),r=C([]);function m(){if(!s.value||!d.value){console.error("Could not get stage, image layer, or mask layer");return}const j=s.value.getNode(),x=c.value?c.value.width:j.width(),D=c.value?c.value.height:j.height(),ne=document.createElement("canvas");ne.width=x,ne.height=D;const le=ne.getContext("2d");if(!le){console.error("Could not get 2d context for mask canvas");return}le.fillStyle="black",le.fillRect(0,0,x,D);const Ie=x/j.width(),oe=D/j.height();le.fillStyle="white",b.value.forEach(Ze=>{le.beginPath(),le.arc(Ze.x*Ie,Ze.y*oe,Ze.radius*Math.max(Ie,oe),0,Math.PI*2,!0),le.closePath(),le.fill()});const Ae=ne.toDataURL("image/png",1);Ae?(O(),t.value=Ae,h.value.visible=!1,y.value=!1):console.error("Could not get data URI for masked image")}function k(j){const x=s.value.getNode();if(j.type.startsWith("touch")){const D=j.evt.touches[0]||j.evt.changedTouches[0];return{x:D.clientX-x.getContainer().offsetLeft,y:D.clientY-x.getContainer().offsetTop}}return x.getPointerPosition()}function g(j){j.type==="mousedown"&&j.evt.button!==0||(y.value=!0,$.value=k(j),G(),A($.value))}function A(j){const x={x:j.x,y:j.y,radius:p.value,fill:"rgba(255, 255, 255, 1)"};b.value=b.value.filter(D=>!(N({x:D.x,y:D.y},j)+D.radius<=x.radius)),b.value.push(x)}function N(j,x){return Math.sqrt(Math.pow(x.x-j.x,2)+Math.pow(x.y-j.y,2))}function W(j){if(j.type.startsWith("touch")&&j.evt.preventDefault(),$e(j),!y.value)return;const x=k(j);N($.value,k(j))>=I.value&&(A(x),$.value=x)}function G(){n.value.push([...b.value]),r.value=[]}function O(){l.value={circles:[...b.value],brushRadius:p.value,undoStack:n.value,redoStack:r.value}}function z(){l.value!==null&&(b.value=l.value.circles||[],p.value=l.value.brushRadius||30,n.value=l.value.undoStack||[],r.value=l.value.redoStack||[])}function J(){n.value.length!==0&&(r.value.push([...b.value]),b.value=n.value.pop()||[])}function ee(){r.value.length!==0&&(n.value.push([...b.value]),b.value=r.value.pop()||[])}function E(){y.value=!1}function Y(){t.value=""}function X(){G(),b.value=[],t.value=""}const ae=S(()=>n.value.length>0),ke=S(()=>r.value.length>0);function $e(j){const x=k(j);h.value.x=x.x,h.value.y=x.y}function ge(){h.value.visible=!1,y.value=!1}function V(){h.value.visible=!0,h.value.radius=p.value}function U(){const j=new Image;j.src=a.imageSrc,j.onload=()=>{c.value=j,q(),ie()}}function q(){if(!c.value)return;const j=window.innerWidth,x=window.innerHeight,D=c.value.width/c.value.height;let ne,le;const Ie=Math.min(j*.9,1200),oe=Math.min(x*.8,u.outputMaxSize);D>Ie/oe?(ne=Ie,le=ne/D):(le=oe,ne=le*D),w.value={width:Math.floor(ne),height:Math.floor(le)},ie()}function ie(){const j=w.value.width,x=w.value.height,D=c.value.width,ne=c.value.height,le=j/D,Ie=x/ne,oe=Math.min(le,Ie);f.value={x:0,y:0,width:D*oe,height:ne*oe}}return ra(()=>{U(),z()}),se(()=>{if(s.value){const j=s.value.getNode();j.on("touchstart",g),j.on("touchmove",W),j.on("touchend",E),j.on("touchcancel",ge)}}),ua(()=>{if(s.value){const j=s.value.getNode();j.off("touchstart"),j.off("touchmove"),j.off("touchend"),j.off("touchcancel")}O()}),(j,x)=>{const D=Xe,ne=be("v-image"),le=be("v-layer"),Ie=be("v-circle"),oe=be("v-stage"),Ae=we,Ze=_a,Oa=jt;return v(),F("div",Ql,[P("div",Yl,[x[3]||(x[3]=P("p",{class:"text-sm my-2 text-slate-500"},"Select the target area for image inpaint",-1)),P("div",Jl,[e.imageSrc&&e.imageSrc!==""&&t.value!==""?(v(),T(D,{key:0,src:e.imageSrc,fit:"inside",width:i(w).width,height:i(w).height,draggable:"false",class:R({absolute:t.value!==""}),onClick:x[0]||(x[0]=()=>{j.imagePreviewModalOpen=!0})},null,8,["src","width","height","class"])):_("",!0),t.value?(v(),T(D,{key:1,src:t.value,fit:"inside",width:i(w).width,height:i(w).height,draggable:"false",class:"opacity-50",onClick:x[1]||(x[1]=()=>{j.imagePreviewModalOpen=!0})},null,8,["src","width","height"])):_("",!0)]),t.value===""?(v(),T(oe,{key:0,ref_key:"stageRef",ref:s,config:i(w),onMousedown:g,onMousemove:W,onMouseup:E,onMouseleave:ge,onMouseenter:V},{default:B(()=>[M(le,{ref_key:"imageLayerRef",ref:o},{default:B(()=>[M(ne,{image:i(c),config:i(w)},null,8,["image","config"])]),_:1},512),M(le,{ref_key:"maskLayerRef",ref:d},{default:B(()=>[(v(!0),F(Z,null,me(i(b),(bt,Ba)=>(v(),T(Ie,{key:Ba,config:bt},null,8,["config"]))),128)),i(h).visible?(v(),T(Ie,{key:0,config:i(h)},null,8,["config"])):_("",!0)]),_:1},512)]),_:1},8,["config"])):_("",!0)]),P("div",Xl,[M(Ae,{class:"mr-2",size:"xs",icon:"i-heroicons-clipboard-document-check-16-solid",variant:"soft",disabled:i(b).length===0||t.value!=="",onClick:m},{default:B(()=>x[4]||(x[4]=[L(" Apply ")])),_:1},8,["disabled"]),M(Ae,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-uturn-left-16-solid",variant:"soft",color:"cyan",disabled:!i(ae)||t.value!=="",onClick:J},null,8,["disabled"]),M(Ae,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-uturn-right-16-solid",variant:"soft",color:"cyan",disabled:!i(ke)||t.value!=="",onClick:ee},null,8,["disabled"]),M(Ae,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-turn-up-left-20-solid",variant:"soft",disabled:i(b).length===0&&t.value==="",color:"red",onClick:X},{default:B(()=>x[5]||(x[5]=[L(" Reset ")])),_:1},8,["disabled"]),M(Ae,{size:"xs",icon:"i-heroicons-pencil-solid",variant:"soft",disabled:t.value==="",color:"orange",onClick:Y},{default:B(()=>x[6]||(x[6]=[L(" Edit ")])),_:1},8,["disabled"])]),P("div",Zl,[M(Oa,{class:"mb-3 text-sm",hint:`value: ${i(p)}`,label:"Brush radius"},{default:B(()=>[M(Ze,{modelValue:i(p),"onUpdate:modelValue":x[2]||(x[2]=bt=>ye(p)?p.value=bt:null),min:1,max:100,size:"sm",class:"my-2",disabled:t.value!==""},null,8,["modelValue","disabled"])]),_:1},8,["hint"])])])}}}),to=Le(te.ui.strategy,te.ui.modal,An),ao=Q({components:{HDialog:Xn,HDialogPanel:Zn,TransitionRoot:xa,TransitionChild:Ca},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close","close-prevented","after-leave"],setup(e,{emit:a}){const{ui:t,attrs:l}=Ve("modal",Se(e,"ui"),to,Se(e,"class")),u=S({get(){return e.modelValue},set(c){a("update:modelValue",c)}}),s=S(()=>e.transition?{...t.value.transition}:{});function o(c){if(e.preventClose){a("close-prevented");return}u.value=c,a("close")}const d=()=>{a("after-leave")};return zt(()=>Tt()),{ui:t,attrs:l,isOpen:u,transitionClass:s,onAfterLeave:d,close:o}}});function no(e,a,t,l,u,s){const o=be("TransitionChild"),d=be("HDialogPanel"),c=be("HDialog"),p=be("TransitionRoot");return v(),T(p,{appear:e.appear,show:e.isOpen,as:"template",onAfterLeave:e.onAfterLeave},{default:B(()=>[M(c,re({class:e.ui.wrapper},e.attrs,{onClose:e.close}),{default:B(()=>[e.overlay?(v(),T(o,re({key:0,as:"template",appear:e.appear},e.ui.overlay.transition),{default:B(()=>[P("div",{class:R([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear"])):_("",!0),P("div",{class:R(e.ui.inner)},[P("div",{class:R([e.ui.container,!e.fullscreen&&e.ui.padding])},[M(o,re({as:"template",appear:e.appear},e.transitionClass),{default:B(()=>[M(d,{class:R([e.ui.base,e.ui.background,e.ui.ring,e.ui.shadow,e.fullscreen?e.ui.fullscreen:[e.ui.width,e.ui.height,e.ui.rounded,e.ui.margin]])},{default:B(()=>[pe(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear"])],2)],2)]),_:3},16,["class","onClose"])]),_:3},8,["appear","show","onAfterLeave"])}const nt=Oe(ao,[["render",no]]),lo="0.05";function oo(e,a){const t=parseFloat(e);if(isNaN(t))return e;const l=t+a;return l<0?"0":String(Number(l.toFixed(10)))}function so(e,a){let t=a,l=a,u=0,s=0;for(;t>=0&&(t--,!(e[t]==="("&&u===s));)e[t]==="("&&u++,e[t]===")"&&s++;if(t<0)return!1;for(u=0,s=0;l<e.length&&!(e[l]===")"&&u===s);)e[l]==="("&&u++,e[l]===")"&&s++,l++;return l===e.length?!1:{start:t+1,end:l}}function io(e){const a=/^\((.*)\)$/,t=e.match(a),l=/:([+-]?(\d*\.)?\d+([eE][+-]?\d+)?)/,u=e.match(l);return t&&!u?`(${t[1]}:1.0)`:e}function ro(e){const a=e.composedPath()[0],t=parseFloat(lo);if(a.tagName!=="TEXTAREA"||!(e.key==="ArrowUp"||e.key==="ArrowDown")||!e.ctrlKey&&!e.metaKey)return;e.preventDefault();let l=a.selectionStart,u=a.selectionEnd,s=a.value.substring(l,u);if(!s){const c=so(a.value,l);if(c)l=c.start,u=c.end,s=a.value.substring(l,u);else{const p=" .,\\/!?%^*;:{}=-_`~()\r\n	";for(;!p.includes(a.value[l-1])&&l>0;)l--;for(;!p.includes(a.value[u])&&u<a.value.length;)u++;if(s=a.value.substring(l,u),!s)return}}s[s.length-1]===" "&&(s=s.substring(0,s.length-1),u-=1),a.value[l-1]==="("&&a.value[u]===")"&&(l-=1,u+=1,s=a.value.substring(l,u)),(s[0]!=="("||s[s.length-1]!==")")&&(s=`(${s})`),s=io(s);const o=e.key==="ArrowUp"?t:-t,d=s.replace(/\((.*):(\d+(?:\.\d+)?)\)/,(c,p,b)=>(b=oo(b,o),Number(b)==1?p:`(${p}:${b})`));return a.setRangeText(d,l,u,"select"),a.value}const uo={key:0,class:"text-red-300"},co={key:0,class:"flex items-center"},mo={key:2,class:"flex flex-row flex-grow items-center justify-between"},fo={key:3,class:"flex flex-row flex-grow items-center"},po={class:"sm:inline"},vo={class:"preview-over-original relative"},go={key:1,class:"text-red-300 text-sm"},ho=Q({__name:"InputParam",props:{inputParam:{type:Object,required:!0},index:{type:Number,required:!0},inputParamsMap:{type:Array,required:!0},advanced:{type:Boolean,default:!1}},setup(e){const a=e,t=C(!1),l=C(null),u=C(""),s=C({width:0,height:0}),o=C(""),d=C({}),c=C(null),p=a.inputParamsMap[a.index][a.inputParam.name].source_input_name,b=a.inputParamsMap.findIndex(k=>{if(Object.keys(k)[0]===a.inputParamsMap[a.index][a.inputParam.name].source_input_name)return!0});function w(){try{const k=a.inputParamsMap.find(g=>{const A=Object.keys(g)[0];if(A===p)return g[A]});y(k[p].value)}catch{s.value.width=0,s.value.height=0}}se(()=>{a.inputParam.type==="range_scale"&&w(),a.inputParam.type==="image-mask"&&ce(o,k=>{const g=new File([o.value],`image-mask-${a.inputParam.name}.png`,{type:"image/png"});a.inputParamsMap[a.index][a.inputParam.name].value=g,a.inputParamsMap[a.index][a.inputParam.name].mask_applied=k!==""})}),a.inputParam.type==="range_scale"&&ce(a.inputParamsMap,()=>{w()});function f(k){return k?URL.createObjectURL(k):""}function $(){URL.revokeObjectURL(u.value),u.value="",l&&(l.value.$refs.input.value=""),a.inputParamsMap[a.index][a.inputParam.name].value=null,a.inputParamsMap[a.index][a.inputParam.name].image_preview_url=""}function h(){URL.revokeObjectURL(o.value),o.value="",d.value={},a.inputParamsMap[a.index][a.inputParam.name].value=null,a.inputParamsMap[a.index][a.inputParam.name].mask_applied=!1}const I=S(()=>a.inputParam.type!=="bool"?a.inputParam.display_name:"");function y(k){if(!(k instanceof File)){s.value.width=0,s.value.height=0;return}const g=URL.createObjectURL(k),A=new Image;A.onload=function(){s.value.width=A.naturalWidth,s.value.height=A.naturalHeight,URL.revokeObjectURL(A.src)},A.src=g}const n=S(()=>{if(a.inputParam.type==="range_scale"){const k=a.inputParamsMap[a.index][a.inputParam.name].value;return`value: ${k}x (${s.value.width}x${s.value.height} -> ${(s.value.width*k).toFixed(0)}x${(s.value.height*k).toFixed(0)})`}return["range","range_scale"].includes(a.inputParam.type)?`value: ${a.inputParamsMap[a.index][a.inputParam.name].value}`:""}),r=C(null);function m(k){const g=ro(k);g&&(a.inputParamsMap[a.index][a.inputParam.name].value=g)}return se(()=>{a.inputParam.type==="text"&&r.value&&r.value.$refs.textarea.addEventListener("keydown",m),a.inputParam.type==="image-mask"&&(c.value=a.inputParamsMap[b][p],ce(a.inputParamsMap[b][p],k=>{o.value="",d.value={},c.value=k}))}),ua(()=>{URL.revokeObjectURL(u.value),URL.revokeObjectURL(o.value),a.inputParam.type==="text"&&r.value&&r.value.$refs.textarea.removeEventListener("keydown",m)}),(k,g)=>{var X;const A=$l,N=At,W=we,G=Xe,O=eo,z=nt,J=va,ee=ga,E=_a,Y=jt;return(((X=e.inputParam)==null?void 0:X.advanced)||!1)===e.advanced?(v(),T(Y,{key:0,label:i(I),class:"mb-3",help:i(n)},{hint:B(()=>[e.inputParam.optional?_("",!0):(v(),F("span",uo,"required"))]),default:B(()=>{var ae,ke,$e,ge,V;return[e.inputParam.type==="text"?(v(),T(A,{key:0,ref_key:"textareaInput",ref:r,size:"md",placeholder:e.inputParam.display_name,required:!e.inputParam.optional,resize:!0,label:e.inputParam.display_name,value:e.inputParamsMap[e.index][e.inputParam.name].value,autoresize:"",variant:"outline",onInput:g[0]||(g[0]=U=>{const q=U.target;e.inputParamsMap[e.index][e.inputParam.name].value=q.value})},null,8,["placeholder","required","label","value"])):_("",!0),e.inputParam.type==="number"?(v(),F(Z,{key:1},[e.inputParam.name==="seed"?(v(),F("div",co,[e.inputParam.type==="number"?(v(),T(N,{key:0,type:"number",label:e.inputParam.display_name,required:!e.inputParam.optional,value:e.inputParamsMap[e.index][e.inputParam.name].value,max:e.inputParam.max||100,min:e.inputParam.min||0,variant:"outline",onInput:g[1]||(g[1]=U=>{const q=U.target;e.inputParamsMap[e.index][e.inputParam.name].value=q.value})},null,8,["label","required","value","max","min"])):_("",!0),M(W,{icon:"i-heroicons-arrow-path",color:"violet",variant:"outline",size:"xs",class:"ml-2",onClick:g[2]||(g[2]=()=>{e.inputParamsMap[e.index][e.inputParam.name].value=Math.floor(Math.random()*1e7)})})])):(v(),T(N,{key:1,type:"number",label:e.inputParam.display_name,required:!e.inputParam.optional,value:e.inputParamsMap[e.index][e.inputParam.name].value,max:e.inputParam.max||100,min:e.inputParam.min||0,variant:"outline",onInput:g[3]||(g[3]=U=>{const q=U.target;e.inputParamsMap[e.index][e.inputParam.name].value=q.value})},null,8,["label","required","value","max","min"]))],64)):_("",!0),e.inputParam.type==="image"?(v(),F("div",mo,[M(N,{ref_key:"imageInput",ref:l,type:"file",accept:"image/*",class:"w-full",variant:"outline",color:"gray",label:e.inputParam.display_name,onChange:g[4]||(g[4]=U=>{console.debug("files",U);const q=U==null?void 0:U[0];e.inputParamsMap[e.index][e.inputParam.name].value=q,u.value=f(q),e.inputParamsMap[e.index][e.inputParam.name].image_preview_url=i(u),console.debug("inputParamsMap",e.inputParamsMap)})},null,8,["label"]),i(u)!==""?(v(),T(G,{key:0,src:i(o)?i(o):i(u),class:"h-10 rounded-lg cursor-pointer ml-2",onClick:g[5]||(g[5]=()=>{t.value=!0})},null,8,["src"])):_("",!0),i(u)!==""?(v(),T(W,{key:1,icon:"i-heroicons-x-mark",variant:"outline",class:"ml-2",onClick:$})):_("",!0)])):_("",!0),e.inputParam.type==="image-mask"?(v(),F("div",fo,[i(c)?(v(),T(W,{key:0,icon:"i-heroicons-paint-brush-16-solid",class:"mr-2",color:"violet",variant:"outline",size:"xs",disabled:!((ae=i(c))!=null&&ae.value),onClick:g[6]||(g[6]=()=>{t.value=!0})},{default:B(()=>[P("span",po,H(i(o)!==""?"Edit mask":"Draw mask"),1)]),_:1},8,["disabled"])):_("",!0),P("div",vo,[i(c)&&((ke=i(c))!=null&&ke.value)?(v(),T(G,{key:0,src:($e=i(c))==null?void 0:$e.image_preview_url,class:R(["h-10 rounded-lg cursor-pointer",{absolute:i(o)!==""}]),onClick:g[7]||(g[7]=()=>{t.value=!0})},null,8,["src","class"])):_("",!0),i(o)?(v(),T(G,{key:1,src:i(o),class:"h-10 rounded-lg cursor-pointer opacity-50",onClick:g[8]||(g[8]=()=>{t.value=!0})},null,8,["src"])):_("",!0)]),!i(c)||i(c)&&!((ge=i(c))!=null&&ge.value)?(v(),F("span",go," Select source image ")):_("",!0),i(o)?(v(),T(W,{key:2,icon:"i-heroicons-x-mark",variant:"outline",color:"violet",class:"ml-2",onClick:h})):_("",!0)])):_("",!0),e.inputParam.type==="image"||e.inputParam.type==="image-mask"?(v(),T(z,{key:4,modelValue:i(t),"onUpdate:modelValue":g[13]||(g[13]=U=>ye(t)?t.value=U:null),class:"z-[90] overflow-y-auto",transition:!1,fullscreen:""},{default:B(()=>{var U;return[M(W,{class:"absolute top-4 right-4 z-[100]",icon:"i-heroicons-x-mark",variant:"ghost",onClick:g[9]||(g[9]=()=>t.value=!1)}),e.inputParam.type==="image"?(v(),F("div",{key:0,class:"flex items-center justify-center w-full h-full p-4",onClick:g[10]||(g[10]=Je(()=>t.value=!1,["left"]))},[M(G,{class:"lg:h-full",fit:"inside",src:i(u)},null,8,["src"])])):(v(),T(O,{key:1,ref:"imageInpaint","image-inpaint-mask":i(o),"onUpdate:imageInpaintMask":g[11]||(g[11]=q=>ye(o)?o.value=q:null),"image-inpaint-mask-data":i(d),"onUpdate:imageInpaintMaskData":g[12]||(g[12]=q=>ye(d)?d.value=q:null),class:"flex items-center justify-center w-full h-full p-4","image-src":(U=i(c))==null?void 0:U.image_preview_url},null,8,["image-inpaint-mask","image-inpaint-mask-data","image-src"]))]}),_:1},8,["modelValue"])):_("",!0),e.inputParam.type==="list"?(v(),T(J,{key:5,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":g[14]||(g[14]=U=>e.inputParamsMap[e.index][e.inputParam.name].value=U),placeholder:e.inputParam.display_name,options:Object.keys(e.inputParam.options)},null,8,["modelValue","placeholder","options"])):_("",!0),e.inputParam.type==="bool"?(v(),T(ee,{key:6,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":g[15]||(g[15]=U=>e.inputParamsMap[e.index][e.inputParam.name].value=U),label:(V=e.inputParam)==null?void 0:V.display_name},null,8,["modelValue","label"])):_("",!0),["range","range_scale"].includes(e.inputParam.type)?(v(),T(E,{key:7,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":g[16]||(g[16]=U=>e.inputParamsMap[e.index][e.inputParam.name].value=U),label:e.inputParam.display_name,size:"sm",min:e.inputParam.min,max:e.inputParam.max,step:e.inputParam.step},null,8,["modelValue","label","min","max","step"])):_("",!0)]}),_:1},8,["label","help"])):_("",!0)}}}),bo={key:0,class:"heading"},yo={key:1},wo=Q({__name:"InputParams",props:{inputParamsMap:{type:Array,required:!0},additionalInputParamsMap:{type:Array,required:!1,default:[]},advanced:{type:Boolean,default:!1}},setup(e){const a=e,t=Be(),l=C(!a.advanced);return(u,s)=>{const o=ve,d=ho;return v(),F(Z,null,[e.advanced?(v(),F("div",bo,[P("h4",{class:"text-md font-bold cursor-pointer select-none flex items-center mb-3",onClick:s[0]||(s[0]=()=>{l.value=!i(l)})},[M(o,{name:i(l)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"mr-2"},null,8,["name"]),s[1]||(s[1]=L(" Advanced options "))])])):_("",!0),i(l)?(v(),F("div",yo,[(v(!0),F(Z,null,me(i(t).currentFlow.input_params,(c,p)=>(v(),T(d,{key:p,"input-params-map":e.inputParamsMap,index:p,"input-param":c,advanced:e.advanced},null,8,["input-params-map","index","input-param","advanced"]))),128)),(v(!0),F(Z,null,me(e.additionalInputParamsMap,(c,p)=>(v(),T(d,{key:Object.keys(c)[0],"input-params-map":e.additionalInputParamsMap,index:p,"input-param":c[Object.keys(c)[0]],advanced:e.advanced},null,8,["input-params-map","index","input-param","advanced"]))),128))])):_("",!0)],64)}}}),ko={key:0,id:"prompt",class:"w-full my-10 lg:my-0 p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg"},$o=Q({__name:"Prompt",setup(e,{expose:a}){var $,h,I,y;const t=Be();let l=localStorage.getItem(`input_params_map_${($=t.currentFlow)==null?void 0:$.name}`);if(l){const n=JSON.parse(l);"flow_version"in n&&n.flow_version.split(".")[0]===((h=t.currentFlow)==null?void 0:h.version.split(".")[0])?l=n:(l=null,localStorage.removeItem(`input_params_map_${(I=t.currentFlow)==null?void 0:I.name}`))}const u=C(((y=t.currentFlow)==null?void 0:y.input_params.map(n=>{var r;if(n.type==="text")return{[n.name]:{value:l!==null?l[n.name]:n.default||"",type:n.type,optional:n.optional,advanced:n.advanced||!1,default:n.default||""}};if(n.type==="number")return{[n.name]:{value:l!==null?l[n.name]:n.default||0,type:n.type,optional:n.optional,advanced:n.advanced||!1,default:n.default||0}};if(n.type==="image")return{[n.name]:{value:null,type:n.type,optional:n.optional,advanced:n.advanced||!1}};if(n.type==="image-mask")return{[n.name]:{value:null,type:n.type,optional:n.optional,advanced:n.advanced||!1,source_input_name:n.source_input_name||null}};if(n.type==="list")return{[n.name]:{value:l!==null?l[n.name]:n.default||Object.keys(n.options)[0]||"",type:n.type,optional:n.optional,options:n.options,advanced:n.advanced||!1,default:Object.keys(n.options)[0]||""}};if(n.type==="bool")return{[n.name]:{value:l!==null?l[n.name]:n.default||!1,type:n.type,optional:n.optional,advanced:n.advanced||!1,default:n.default||!1}};if(["range","range_scale"].includes(n.type)){const m={value:l!==null?l[n.name]:n.default||0,type:n.type,optional:n.optional,advanced:n.advanced||!1,min:n.min||0,max:n.max||100,step:n.step||1,default:n.default||0};if(n.type==="range_scale"&&(m.source_input_name=n.source_input_name||null,m.source_input_name===null||m.source_input_name==="")){const k=(r=t.currentFlow)==null?void 0:r.input_params.find(g=>g.type==="image"&&!g.optional);k&&(m.source_input_name=k.name)}return{[n.name]:m}}}))||[]),s=C(t.currentFlow.is_seed_supported?[{seed:{name:"seed",display_name:"Random seed",value:Math.floor(Math.random()*1e7),type:"number",optional:!0,advanced:!0,min:0,max:1e7}}]:[]);function o(n){console.debug("Copy prompt inputs",n),Object.keys(n).forEach(m=>{const k=u.value.findIndex(g=>Object.keys(g)[0]===m);k!==-1&&(u.value[k][m].value=n[m].value)});const r=document.getElementById("prompt");r&&r.scrollIntoView({behavior:"smooth"})}a({copyPromptInputs:o}),u.value.forEach(n=>{const r=Object.keys(n)[0];["image","image-mask"].includes(n[r].type)||ce(()=>n[r].value,()=>{var k,g;const m={};u.value.forEach(A=>{const N=Object.keys(A)[0];m[N]=A[N].value}),localStorage.setItem(`input_params_map_${(k=t.currentFlow)==null?void 0:k.name}`,JSON.stringify({...m,flow_version:(g=t.currentFlow)==null?void 0:g.version}))})});const d=S(()=>u.value.filter(n=>{const r=Object.keys(n)[0];return!["image","image-mask"].includes(n[r].type)}).some(n=>{const r=Object.keys(n)[0];return n[r].value!==n[r].default}));function c(){u.value.forEach(n=>{const r=Object.keys(n)[0];n[r].type==="text"?n[r].value=n[r].default||"":n[r].type==="number"?n[r].value=n[r].default||n[r].min||0:n[r].type==="list"?n[r].value=Object.keys(n[r].options)[0]||"":n[r].type==="bool"?n[r].value=n[r].default||!1:["range","range_scale"].includes(n[r].type)&&(n[r].value=n[r].default||n[r].min||0)})}const p=C(!1),b=C(1),w=C(!1),f=S(()=>u.value.every(n=>{var k;const r=Object.keys(n)[0];if(n[r].optional)return!0;const m=n[r].value;if(n[r].type==="text")return m!=="";if(n[r].type==="number")return m>=n[r].min&&m<=n[r].max;if(n[r].type==="list")return m!==""&&Object.keys(n[r].options).includes(m);if(n[r].type==="bool")return!0;if(n[r].type==="range")return m>=n[r].min&&m<=n[r].max;if(n[r].type==="range_scale")return m>=n[r].min&&m<=n[r].max;if(n[r].type==="image")return m instanceof File&&m.size>0;if(n[r].type==="image-mask")return m instanceof File&&m.size>0&&(((k=n[r])==null?void 0:k.mask_applied)||!1)}));return(n,r)=>{const m=ve,k=wo,g=At,A=jt,N=we,W=Bt;return i(t).currentFlow?(v(),F("div",ko,[P("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center mb-3",onClick:r[0]||(r[0]=()=>{w.value=!i(w)})},[M(m,{name:i(w)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),r[3]||(r[3]=L(" Prompt "))]),ct(P("div",null,[M(k,{"input-params-map":i(u),"additional-input-params-map":i(s),advanced:!1},null,8,["input-params-map","additional-input-params-map"]),i(s).length>0?(v(),T(k,{key:0,"input-params-map":i(u),"additional-input-params-map":i(s),advanced:!0},null,8,["input-params-map","additional-input-params-map"])):_("",!0),i(t).currentFlow.is_count_supported?(v(),T(A,{key:1,label:"Number of images"},{default:B(()=>[M(g,{modelValue:i(b),"onUpdate:modelValue":r[1]||(r[1]=G=>ye(b)?b.value=G:null),type:"number",min:"1",max:"50",label:"Batch size",class:"mb-3 max-w-fit flex justify-end"},null,8,["modelValue"])]),_:1})):_("",!0),P("div",{class:R(["flex",{"justify-between":i(d),"justify-end":!i(d)}])},[i(d)?(v(),T(W,{key:0,text:"Reset input params values to defaults"},{default:B(()=>[M(N,{icon:"i-heroicons-arrow-path-rounded-square",variant:"ghost",color:"amber",onClick:c},{default:B(()=>r[4]||(r[4]=[L(" Reset params ")])),_:1})]),_:1})):_("",!0),M(N,{icon:"i-heroicons-sparkles-16-solid",variant:"outline",loading:i(p),disabled:!i(f),onClick:r[2]||(r[2]=()=>{p.value=!0,i(t).runFlow(i(t).currentFlow,[...i(u),...i(s)],i(b)).finally(()=>{p.value=!1;const G=i(s).find(O=>Object.keys(O)[0]==="seed");G.seed.value=Number(G.seed.value)+i(b)+1})})},{default:B(()=>r[5]||(r[5]=[L(" Run prompt ")])),_:1},8,["loading","disabled"])],2)],512),[[Ot,!i(w)]])])):_("",!0)}}}),Io=e=>{const a=C(0);function t(s){e.value.style.scrollSnapType="none",e.value.style.scrollBehavior="auto",a.value=s.pageX,window.addEventListener("mousemove",u),window.addEventListener("mouseup",l)}function l(){e.value.style.removeProperty("scroll-behavior"),e.value.style.removeProperty("scroll-snap-type"),e.value.style.removeProperty("pointer-events"),window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",l)}function u(s){s.preventDefault(),e.value.style.pointerEvents="none";const o=s.pageX-a.value;a.value=s.pageX,e.value.scrollBy(-o,0)}se(()=>{e.value&&e.value.addEventListener("mousedown",t)}),_e(()=>{e.value&&e.value.removeEventListener("mousedown",t)})},It=Le(te.ui.strategy,te.ui.carousel,Tn),So=Q({components:{UButton:we},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},arrows:{type:Boolean,default:!1},indicators:{type:Boolean,default:!1},prevButton:{type:Object,default:()=>It.default.prevButton},nextButton:{type:Object,default:()=>It.default.nextButton},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:void 0}},setup(e,{expose:a}){const{ui:t,attrs:l}=Ve("carousel",Se(e,"ui"),It,Se(e,"class")),u=C(),s=C(0),{x:o}=cn(u,{behavior:"smooth"}),{width:d}=mn(u);Io(u),fn(u,I=>{var n,r;const[y]=I;s.value=((r=(n=y==null?void 0:y.target)==null?void 0:n.firstElementChild)==null?void 0:r.clientWidth)||0});const c=S(()=>s.value?Math.round(o.value/s.value)+1:0),p=S(()=>s.value?e.items.length-Math.round(d.value/s.value)+1:0),b=S(()=>c.value<=1),w=S(()=>c.value===p.value);function f(){o.value+=s.value}function $(){o.value-=s.value}function h(I){o.value=(I-1)*s.value}return a({pages:p,page:c,prev:$,next:f,select:h}),{ui:t,attrs:l,isFirst:b,isLast:w,carouselRef:u,pages:p,currentPage:c,onClickNext:f,onClickPrev:$,onClick:h,twMerge:Te}}}),Co=["role"],xo=["aria-selected","aria-label","onClick"];function Mo(e,a,t,l,u,s){const o=we;return v(),F("div",re({class:e.ui.wrapper},e.attrs),[P("div",{ref:"carouselRef",class:R([e.ui.container,"no-scrollbar"])},[(v(!0),F(Z,null,me(e.items,(d,c)=>(v(),F("div",{key:c,class:R(e.ui.item),role:e.indicators?"tabpanel":null},[pe(e.$slots,"default",{item:d,index:c},void 0,!0)],10,Co))),128))],2),e.arrows?(v(),F("div",{key:0,class:R(e.ui.arrows.wrapper)},[pe(e.$slots,"prev",{onClick:e.onClickPrev,disabled:e.isFirst},()=>{var d;return[e.prevButton?(v(),T(o,re({key:0,disabled:e.isFirst},{...e.ui.default.prevButton,...e.prevButton},{class:e.twMerge(e.ui.default.prevButton.class,(d=e.prevButton)==null?void 0:d.class),"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["disabled","class","onClick"])):_("",!0)]},!0),pe(e.$slots,"next",{onClick:e.onClickNext,disabled:e.isLast},()=>{var d;return[e.nextButton?(v(),T(o,re({key:0,disabled:e.isLast},{...e.ui.default.nextButton,...e.nextButton},{class:e.twMerge(e.ui.default.nextButton.class,(d=e.nextButton)==null?void 0:d.class),"aria-label":"Next",onClick:e.onClickNext}),null,16,["disabled","class","onClick"])):_("",!0)]},!0)],2)):_("",!0),e.indicators?(v(),F("div",{key:1,role:"tablist",class:R(e.ui.indicators.wrapper)},[(v(!0),F(Z,null,me(e.pages,d=>pe(e.$slots,"indicator",{key:d,onClick:e.onClick,active:d===e.currentPage,page:d},()=>[P("button",{type:"button",role:"tab","aria-selected":d===e.currentPage,class:R([e.ui.indicators.base,d===e.currentPage?e.ui.indicators.active:e.ui.indicators.inactive]),"aria-label":`set slide ${d}`,onClick:c=>e.onClick(d)},null,10,xo)],!0)),128))],2)):_("",!0)],16)}const Fa=Oe(So,[["render",Mo],["__scopeId","data-v-ea54307d"]]),Po={class:"flex flex-col basis-full"},_o=Q({__name:"QueueInputFiles",props:{running:{type:Object,required:!0}},setup(e){const a=Rt(),t=function(d,c){return`${yt()}/tasks/inputs?task_id=${d}&input_index=${c}`},l=C(!1),u=C(""),s=C(0),o=C(!0);return(d,c)=>{var h,I,y,n,r;const p=ve,b=Xe,w=Fa,f=we,$=nt;return d.$props.running&&d.$props.running.input_files&&((h=Object.keys(d.$props.running.input_files))==null?void 0:h.length)>0?(v(),F("div",{key:0,class:R(["ml-2 mt-2 mb-5",{"mb-10":((I=Object.keys(d.$props.running.input_files))==null?void 0:I.length)>1&&!i(o)}])},[P("h4",{class:"mb-3 font-bold cursor-pointer select-none flex items-center text-sm",onClick:c[0]||(c[0]=()=>o.value=!i(o))},[M(p,{name:i(o)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),P("span",null," Input files ("+H((y=Object.keys(d.$props.running.input_files))==null?void 0:y.length)+") ",1)]),i(o)?_("",!0):(v(),F(Z,{key:0},[((n=Object.keys(d.$props.running.input_files))==null?void 0:n.length)===1?(v(),T(b,{key:0,class:"mb-5 rounded-lg cursor-pointer",fit:"outside",loading:"lazy",placeholder:i(a)(`${("buildBackendApiUrl"in d?d.buildBackendApiUrl:i(yt))()}/vix_logo.png`,{f:"png",blur:3,q:50}),src:t(d.$props.running.task_id,0),onClick:c[1]||(c[1]=()=>{u.value=t(d.$props.running.task_id,0),s.value=0,l.value=!0})},null,8,["placeholder","src"])):_("",!0),((r=Object.keys(d.$props.running.input_files))==null?void 0:r.length)>1?(v(),T(w,{key:1,items:Object.keys(d.$props.running.input_files).map(m=>({task_id:e.running.task_id,index:m})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4"}},page:1,indicators:""},{default:B(({item:m})=>[P("div",Po,[M(b,{class:"rounded-lg cursor-pointer",fit:"outside",loading:"lazy",placeholder:i(a)(`${("buildBackendApiUrl"in d?d.buildBackendApiUrl:i(yt))()}/vix_logo.png`,{f:"png",blur:3,q:50}),src:t(m.task_id,m.index),onClick:()=>{u.value=t(d.$props.running.task_id,m.index),s.value=m.index,l.value=!0}},null,8,["placeholder","src","onClick"])])]),_:1},8,["items"])):_("",!0),M($,{modelValue:i(l),"onUpdate:modelValue":c[4]||(c[4]=m=>ye(l)?l.value=m:null),class:"z-[90]",transition:!1,fullscreen:""},{default:B(()=>[M(f,{class:"absolute top-4 right-4",icon:"i-heroicons-x-mark",variant:"ghost",onClick:c[2]||(c[2]=()=>l.value=!1)}),P("div",{class:"flex items-center justify-center w-full h-full p-4",onClick:c[3]||(c[3]=Je(()=>l.value=!1,["left"]))},[i(u)?(v(),T(b,{key:0,class:"lg:h-full",fit:"inside",loading:"lazy",placeholder:"/vix_logo.png",src:i(u)},null,8,["src"])):_("",!0)])]),_:1},8,["modelValue"])],64))],2)):_("",!0)}}}),Ue=Le(te.ui.strategy,te.ui.alert,zn),Fo=Q({components:{UIcon:ve,UAvatar:ut,UButton:we},inheritAttrs:!1,props:{title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:()=>Ue.default.icon},avatar:{type:Object,default:null},closeButton:{type:Object,default:()=>Ue.default.closeButton},actions:{type:Array,default:()=>[]},color:{type:String,default:()=>Ue.default.color,validator(e){return[...te.ui.colors,...Object.keys(Ue.color)].includes(e)}},variant:{type:String,default:()=>Ue.default.variant,validator(e){return[...Object.keys(Ue.variant),...Object.values(Ue.color).flatMap(a=>Object.keys(a))].includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["close"],setup(e){const{ui:a,attrs:t}=Ve("alert",Se(e,"ui"),Ue),l=S(()=>{var o,d;const s=((d=(o=a.value.color)==null?void 0:o[e.color])==null?void 0:d[e.variant])||a.value.variant[e.variant];return Te(de(a.value.wrapper,a.value.rounded,a.value.shadow,a.value.padding,s==null?void 0:s.replaceAll("{color}",e.color)),e.class)});function u(s){s.click&&s.click()}return{ui:a,attrs:t,alertClass:l,onAction:u,twMerge:Te}}});function zo(e,a,t,l,u,s){const o=ve,d=ut,c=we;return v(),F("div",re({class:e.alertClass},e.attrs),[P("div",{class:R(["flex",[e.ui.gap,{"items-start":e.description||e.$slots.description,"items-center":!e.description&&!e.$slots.description}]])},[pe(e.$slots,"icon",{icon:e.icon},()=>[e.icon?(v(),T(o,{key:0,name:e.icon,class:R(e.ui.icon.base)},null,8,["name","class"])):_("",!0)]),pe(e.$slots,"avatar",{avatar:e.avatar},()=>[e.avatar?(v(),T(d,re({key:0},{size:e.ui.avatar.size,...e.avatar},{class:e.ui.avatar.base}),null,16,["class"])):_("",!0)]),P("div",{class:R(e.ui.inner)},[e.title||e.$slots.title?(v(),F("p",{key:0,class:R(e.ui.title)},[pe(e.$slots,"title",{title:e.title},()=>[L(H(e.title),1)])],2)):_("",!0),e.description||e.$slots.description?(v(),F("div",{key:1,class:R(e.twMerge(e.ui.description,!e.title&&!e.$slots.title&&"mt-0 leading-5"))},[pe(e.$slots,"description",{description:e.description},()=>[L(H(e.description),1)])],2)):_("",!0),(e.description||e.$slots.description)&&(e.actions.length||e.$slots.actions)?(v(),F("div",{key:2,class:R(e.ui.actions)},[pe(e.$slots,"actions",{},()=>[(v(!0),F(Z,null,me(e.actions,(p,b)=>(v(),T(c,re({key:b,ref_for:!0},{...e.ui.default.actionButton||{},...p},{onClick:Je(w=>e.onAction(p),["stop"])}),null,16,["onClick"]))),128))])],2)):_("",!0)],2),e.closeButton||!e.description&&!e.$slots.description&&e.actions.length?(v(),F("div",{key:0,class:R(e.twMerge(e.ui.actions,"mt-0"))},[!e.description&&!e.$slots.description&&(e.actions.length||e.$slots.actions)?pe(e.$slots,"actions",{key:0},()=>[(v(!0),F(Z,null,me(e.actions,(p,b)=>(v(),T(c,re({key:b,ref_for:!0},{...e.ui.default.actionButton||{},...p},{onClick:Je(w=>e.onAction(p),["stop"])}),null,16,["onClick"]))),128))]):_("",!0),e.closeButton?(v(),T(c,re({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{onClick:a[0]||(a[0]=Je(p=>e.$emit("close"),["stop"]))}),null,16)):_("",!0)],2)):_("",!0)],2)],16)}const za=Oe(Fo,[["render",zo]]),To=Q({__name:"QueueErrorAlert",props:{running:{type:Object,required:!0}},setup(e){const a=Be(),t=C(!1);return(l,u)=>{const s=za;return v(),T(s,{class:"mb-5",icon:"i-heroicons-exclamation-circle-16-solid",color:"red",variant:"soft",title:"Task failed",description:e.running.error,actions:[{variant:"outline",color:"yellow",label:"Restart",loading:i(t),icon:"i-heroicons-arrow-path",click:()=>{t.value=!0,i(a).restartFlow(l.$props.running).finally(()=>{t.value=!1})}}]},null,8,["description","actions"])}}}),Oo={class:"w-full p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg shadow-md mt-5 mb-10"},Bo={class:"flex items-center justify-between mb-2"},Ao={key:0},jo={key:1,class:"text-red-400"},Uo={class:"text-sm mb-5 text-slate-500"},Eo={class:"flex justify-between"},Ro=Q({__name:"Queue",setup(e){const a=Be(),t=C(!1),l=C(!0);return(u,s)=>{var f,$,h,I,y,n,r,m,k;const o=ve,d=we,c=fa,p=_o,b=To,w=ht;return v(),F("div",Oo,[P("div",Bo,[P("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center",onClick:s[0]||(s[0]=()=>{l.value=!i(l)})},[M(o,{name:i(l)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),P("span",null," Queue ("+H(i(a).flowsRunningByName((f=i(a).currentFlow)==null?void 0:f.name).length)+") ",1),i(a).flowsRunningByName(($=i(a).currentFlow)==null?void 0:$.name).length>0?(v(),F("span",Ao,"  - "+H(`${((I=i(a).flowsRunningByName((h=i(a).currentFlow)==null?void 0:h.name).filter(g=>g.progress>0)[0])==null?void 0:I.progress.toFixed(0))??0}%`),1)):_("",!0),i(a).flowsRunningByNameWithErrors((y=i(a))==null?void 0:y.currentFlow.name).length>0?(v(),F("span",jo,"  ("+H(i(a).flowsRunningByNameWithErrors((n=i(a).currentFlow)==null?void 0:n.name).length)+") ",1)):_("",!0)]),(r=i(a).currentFlow)!=null&&r.name&&i(a).flowsRunningByName((m=i(a).currentFlow)==null?void 0:m.name).length>0?(v(),T(d,{key:0,icon:"i-heroicons-stop",color:"orange",variant:"outline",loading:i(t),onClick:s[1]||(s[1]=()=>{var g;t.value=!0,i(a).cancelRunningFlows((g=i(a).currentFlow)==null?void 0:g.name).finally(()=>{t.value=!1})})},{default:B(()=>s[2]||(s[2]=[L(" Cancel all ")])),_:1},8,["loading"])):_("",!0)]),i(l)?_("",!0):(v(!0),F(Z,{key:0},me(i(a).flowsRunningByName((k=i(a).currentFlow)==null?void 0:k.name).filter(g=>g.parent_task_id===null),g=>(v(),F("div",{key:g.task_id,class:"mb-5"},[M(c,{class:"mb-3",value:g==null?void 0:g.progress,indicator:"",color:g.error?"red":"green"},null,8,["value","color"]),P("p",Uo,H(["#"+g.task_id,...Object.keys(g.input_params_mapped).filter(A=>g.input_params_mapped[A].value&&g.input_params_mapped[A].value!=="").map(A=>`${g.input_params_mapped[A].display_name}: ${g.input_params_mapped[A].value}`)].join(" | ")+`${g.execution_time?" | execution_time: "+g.execution_time.toFixed(2)+"s":""}`),1),M(p,{running:g},null,8,["running"]),g.error?(v(),T(b,{key:0,running:g},null,8,["running"])):_("",!0),P("div",Eo,[M(d,{icon:g.progress>=0&&g.progress<100?"i-heroicons-stop":"i-heroicons-minus-circle",color:g.error?"red":"orange",variant:"outline",loading:i(t),onClick:()=>{t.value=!0,i(a).cancelRunningFlow(g).finally(()=>{t.value=!1})}},{default:B(()=>[L(H(g.progress>=0&&g.progress<100?"Cancel":"Remove"),1)]),_:2},1032,["icon","color","loading","onClick"]),M(w,{items:[[{label:"Comfy flow",labelClass:"text-blue-500",icon:"i-heroicons-arrow-down-tray",iconClass:"bg-blue-500",click:()=>{var A;return i(a).downloadFlowComfy((A=i(a).currentFlow)==null?void 0:A.name,g.task_id)}}]],mode:"click",popper:{placement:"bottom-end"}},{default:B(()=>[M(d,{color:"blue",variant:"outline",icon:"i-heroicons-ellipsis-vertical-16-solid"})]),_:2},1032,["items"])])]))),128))])}}}),No=Oe(Ro,[["__scopeId","data-v-60f5befb"]]),Do=Q({__name:"ScrollToTop",props:{show:{type:Boolean,required:!0},target:{type:String,required:!0}},setup(e){const a=e;function t(){const l=document.getElementById(a.target);l&&l.scrollIntoView({behavior:"smooth"})}return(l,u)=>{const s=we;return ct((v(),T(s,{icon:"i-heroicons-arrow-small-up",color:"black",variant:"outline",onClick:t},null,512)),[[Ot,e.show]])}}}),Me=Le(te.ui.strategy,te.ui.select,pn),Lo=Q({components:{UIcon:ve},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>Me.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>Me.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},size:{type:String,default:null,validator(e){return Object.keys(Me.size).includes(e)}},color:{type:String,default:()=>Me.default.color,validator(e){return[...te.ui.colors,...Object.keys(Me.color)].includes(e)}},variant:{type:String,default:()=>Me.default.variant,validator(e){return[...Object.keys(Me.variant),...Object.values(Me.color).flatMap(a=>Object.keys(a))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a,slots:t}){const{ui:l,attrs:u}=Ve("select",Se(e,"ui"),Me,Se(e,"class")),{size:s,rounded:o}=vn({ui:l,props:e}),{emitFormChange:d,inputId:c,color:p,size:b,name:w}=pt(e,Me),f=S(()=>s.value??b.value),$=E=>{a("update:modelValue",E.target.value)},h=E=>{a("change",E.target.value),d()},I=E=>qt(E,e.valueAttribute,""),y=E=>qt(E,e.optionAttribute,""),n=E=>["string","number","boolean"].includes(typeof E)?{[e.valueAttribute]:E,[e.optionAttribute]:E}:{...E,[e.valueAttribute]:I(E),[e.optionAttribute]:y(E)},r=S(()=>e.options.map(E=>n(E))),m=S(()=>e.placeholder?[{[e.valueAttribute]:"",[e.optionAttribute]:e.placeholder,disabled:!0},...r.value]:r.value),k=S(()=>{const E=n(e.modelValue),Y=m.value.find(X=>X[e.valueAttribute]===E[e.valueAttribute]);return Y?Y[e.valueAttribute]:""}),g=S(()=>{var Y,X;const E=((X=(Y=l.value.color)==null?void 0:Y[p.value])==null?void 0:X[e.variant])||l.value.variant[e.variant];return Te(de(l.value.base,l.value.form,o.value,l.value.size[f.value],e.padded?l.value.padding[f.value]:"p-0",E==null?void 0:E.replaceAll("{color}",p.value),(A.value||t.leading)&&l.value.leading.padding[f.value],(N.value||t.trailing)&&l.value.trailing.padding[f.value]),e.placeholder&&!e.modelValue&&l.value.placeholder,e.selectClass)}),A=S(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),N=S(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),W=S(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),G=S(()=>e.loading&&!A.value?e.loadingIcon:e.trailingIcon||e.icon),O=S(()=>de(l.value.icon.leading.wrapper,l.value.icon.leading.pointer,l.value.icon.leading.padding[f.value])),z=S(()=>de(l.value.icon.base,p.value&&te.ui.colors.includes(p.value)&&l.value.icon.color.replaceAll("{color}",p.value),l.value.icon.size[f.value],e.loading&&l.value.icon.loading)),J=S(()=>de(l.value.icon.trailing.wrapper,l.value.icon.trailing.pointer,l.value.icon.trailing.padding[f.value])),ee=S(()=>de(l.value.icon.base,p.value&&te.ui.colors.includes(p.value)&&l.value.icon.color.replaceAll("{color}",p.value),l.value.icon.size[f.value],e.loading&&!A.value&&l.value.icon.loading));return{ui:l,attrs:u,name:w,inputId:c,normalizedOptionsWithPlaceholder:m,normalizedValue:k,isLeading:A,isTrailing:N,selectClass:g,leadingIconName:W,leadingIconClass:z,leadingWrapperIconClass:O,trailingIconName:G,trailingIconClass:ee,trailingWrapperIconClass:J,onInput:$,onChange:h}}}),Vo=["id","name","value","required","disabled"],qo=["value","label"],Ho=["value","selected","disabled","textContent"],Wo=["value","selected","disabled","textContent"];function Go(e,a,t,l,u,s){const o=ve;return v(),F("div",{class:R(e.ui.wrapper)},[P("select",re({id:e.inputId,name:e.name,value:e.modelValue,required:e.required,disabled:e.disabled,class:e.selectClass},e.attrs,{onInput:a[0]||(a[0]=(...d)=>e.onInput&&e.onInput(...d)),onChange:a[1]||(a[1]=(...d)=>e.onChange&&e.onChange(...d))}),[(v(!0),F(Z,null,me(e.normalizedOptionsWithPlaceholder,(d,c)=>(v(),F(Z,null,[d.children?(v(),F("optgroup",{key:`${d[e.valueAttribute]}-optgroup-${c}`,value:d[e.valueAttribute],label:d[e.optionAttribute]},[(v(!0),F(Z,null,me(d.children,(p,b)=>(v(),F("option",{key:`${p[e.valueAttribute]}-${c}-${b}`,value:p[e.valueAttribute],selected:p[e.valueAttribute]===e.normalizedValue,disabled:p.disabled,textContent:H(p[e.optionAttribute])},null,8,Ho))),128))],8,qo)):(v(),F("option",{key:`${d[e.valueAttribute]}-${c}`,value:d[e.valueAttribute],selected:d[e.valueAttribute]===e.normalizedValue,disabled:d.disabled,textContent:H(d[e.optionAttribute])},null,8,Wo))],64))),256))],16,Vo),e.isLeading&&e.leadingIconName||e.$slots.leading?(v(),F("span",{key:0,class:R(e.leadingWrapperIconClass)},[pe(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[M(o,{name:e.leadingIconName,class:R(e.leadingIconClass)},null,8,["name","class"])],!0)],2)):_("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(v(),F("span",{key:1,class:R(e.trailingWrapperIconClass)},[pe(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[M(o,{name:e.trailingIconName,class:R(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])],!0)],2)):_("",!0)],2)}const Ko=Oe(Lo,[["render",Go],["__scopeId","data-v-9f80dc9e"]]),He=Le(te.ui.strategy,te.ui.toggle,On),Qo=Q({components:{HSwitch:rl,UIcon:ve},inheritAttrs:!1,props:{id:{type:String,default:null},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},onIcon:{type:String,default:()=>He.default.onIcon},offIcon:{type:String,default:()=>He.default.offIcon},loadingIcon:{type:String,default:()=>He.default.loadingIcon},color:{type:String,default:()=>He.default.color,validator(e){return te.ui.colors.includes(e)}},size:{type:String,default:()=>He.default.size,validator(e){return Object.keys(He.size).includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a}){const{ui:t,attrs:l}=Ve("toggle",Se(e,"ui"),He),{emitFormChange:u,color:s,inputId:o,name:d}=pt(e),c=S({get(){return e.modelValue},set(h){a("update:modelValue",h),a("change",h),u()}}),p=S(()=>Te(de(t.value.base,t.value.size[e.size],t.value.rounded,s.value&&t.value.ring.replaceAll("{color}",s.value),s.value&&(c.value?t.value.active:t.value.inactive).replaceAll("{color}",s.value)),e.class)),b=S(()=>de(t.value.container.base,t.value.container.size[e.size],c.value?t.value.container.active[e.size]:t.value.container.inactive)),w=S(()=>de(t.value.icon.size[e.size],s.value&&t.value.icon.on.replaceAll("{color}",s.value))),f=S(()=>de(t.value.icon.size[e.size],s.value&&t.value.icon.off.replaceAll("{color}",s.value))),$=S(()=>de(t.value.icon.size[e.size],s.value&&t.value.icon.loading.replaceAll("{color}",s.value)));return zt(()=>Tt()),{ui:t,attrs:l,name:d,inputId:o,active:c,switchClass:p,containerClass:b,onIconClass:w,offIconClass:f,loadingIconClass:$}}});function Yo(e,a,t,l,u,s){const o=ve,d=be("HSwitch");return v(),T(d,re({id:e.inputId,modelValue:e.active,"onUpdate:modelValue":a[0]||(a[0]=c=>e.active=c),name:e.name,disabled:e.disabled||e.loading,class:e.switchClass},e.attrs),{default:B(()=>[P("span",{class:R(e.containerClass)},[e.loading?(v(),F("span",{key:0,class:R([e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[M(o,{name:e.loadingIcon,class:R(e.loadingIconClass)},null,8,["name","class"])],2)):_("",!0),!e.loading&&e.onIcon?(v(),F("span",{key:1,class:R([e.active?e.ui.icon.active:e.ui.icon.inactive,e.ui.icon.base]),"aria-hidden":"true"},[M(o,{name:e.onIcon,class:R(e.onIconClass)},null,8,["name","class"])],2)):_("",!0),!e.loading&&e.offIcon?(v(),F("span",{key:2,class:R([e.active?e.ui.icon.inactive:e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[M(o,{name:e.offIcon,class:R(e.offIconClass)},null,8,["name","class"])],2)):_("",!0)],2)]),_:1},16,["id","modelValue","name","disabled","class"])}const Jo=Oe(Qo,[["render",Yo]]);function Ta(e={}){const{copy:a,isSupported:t}=gn(),l=mt();function u(s,o={},d={}){t&&a(s).then(()=>{!o.title&&!o.description||l.add({...o,...e})},function(c){l.add({...d,description:d.description||c.message,...e})})}return{copy:u}}const Xo={class:"flex flex-col items-center mb-2 max-w-fit mx-auto z-0"},Zo={class:"text-slate-500 text-center text-sm w-full mx-auto flex flex-wrap items-center justify-center md:justify-between"},es={class:"toggles py-2"},ts={class:"mr-2 inline-flex items-center text-sm"},as=["for"],ns={class:"mr-2 inline-flex items-center text-sm"},ls=["for"],os={key:0,class:"flex items-center"},ss=["title"],is=Q({__name:"ChildOutput",props:{flowResult:{type:Object,required:!0},outputsIndex:{type:Number,required:!1,default:()=>0},openImageModal:{type:Function,required:!0}},setup(e){const a=e,t=Be(),l=(r,m=null,k=!1)=>{if(r.child_tasks.length===0)return r;const g=r.child_tasks.findIndex(A=>A.parent_task_node_id===m);return g!==-1?(k||(s.value=r),l(r.child_tasks[g],r.child_tasks[g].outputs[0].comfy_node_id,k)):r};function u(r,m,k=null){if(k!==null&&r.parent_task_node_id===k||Number(r.task_id)===m)return r;for(let g=0;g<r.child_tasks.length;g++)for(let A=0;A<r.child_tasks[g].outputs.length;A++){const N=u(r.child_tasks[g],m,r.child_tasks[g].outputs[A].comfy_node_id);if(N!==null)return N}return null}const s=C(a.flowResult),o=C(l(a.flowResult,a.flowResult.outputs[a.outputsIndex].comfy_node_id,!1));function d(r){var m;return[[{label:`${(m=t.flowByName((r==null?void 0:r.flow_name)??(r==null?void 0:r.name)))==null?void 0:m.display_name}#${r.task_id}`,disabled:!0}],[{label:"View image",icon:"i-heroicons-eye",click:()=>{a.openImageModal(Ce({task_id:r.task_id,node_id:r.outputs.length>1?r.outputs[a.outputsIndex].comfy_node_id:r.outputs[0].comfy_node_id}))}}]]}function c(r){var k;const m=[[{label:`${(k=t.flowByName((r==null?void 0:r.flow_name)??(r==null?void 0:r.name)))==null?void 0:k.display_name}#${r.task_id}`,disabled:!0}],[{label:"View image",icon:"i-heroicons-eye",disabled:r.progress<100||r.error!=="",click:()=>{a.openImageModal(Ce({task_id:r.task_id,node_id:r.outputs.length>1?r.outputs[a.outputsIndex].comfy_node_id:r.outputs[0].comfy_node_id}))}},{label:r.progress<100?"Cancel":"Delete",labelClass:r.progress<100?"text-orange-500":"text-red-500",icon:r.progress<100?"i-heroicons-stop":"i-heroicons-trash",iconClass:r.progress<100?"bg-orange-500":"bg-red-500",click:()=>{t.deleteFlowHistory(r.task_id).then(()=>{const g=u(a.flowResult,r.parent_task_id,r.parent_task_node_id);g&&(g.child_tasks=g.child_tasks.filter(A=>Number(A.task_id)!==Number(r.task_id))),h(!1,a.flowResult)})}}]];return r.progress<100&&(m[0][1]={label:`Progress: ${Math.ceil(r.progress)}% (${r.execution_time.toFixed(2)}s)`,labelClass:"text-blue-500",disabled:!0}),r.error!==""&&m[0].push({label:`Error: ${r.error}`,labelClass:"text-red-500",slot:"error",click:()=>{Ta().copy(r.error),mt().add({title:"Clipboard",description:`Task #${r.task_id} error copied to clipboard`,timeout:2e3})}}),m}function p(){const r=s.value.parent_task_id;if(!r)return;const m=u(a.flowResult,r,s.value.parent_task_node_id);m&&(s.value=m)}function b(){if(s.value.child_tasks.length===0)return;const r=s.value.outputs.length>1?s.value.outputs[a.outputsIndex].comfy_node_id:s.value.outputs[0].comfy_node_id,m=s.value.child_tasks.find(k=>k.parent_task_node_id===r);m&&(s.value=m)}const w=S(()=>{if(s.value.child_tasks.length===0)return;const r=s.value.outputs.length>1?s.value.outputs[a.outputsIndex].comfy_node_id:s.value.outputs[0].comfy_node_id;return s.value.child_tasks.find(k=>k.parent_task_node_id===r).task_id!==o.value.task_id});function f(){const r=o.value.parent_task_id;if(!r)return;const m=u(a.flowResult,r,o.value.parent_task_node_id);m&&(o.value=m)}function $(){if(o.value.child_tasks.length===0)return;const r=Number(o.value.outputs[0].comfy_node_id),m=o.value.child_tasks.find(k=>Number(k.parent_task_node_id)===r);m&&(o.value=m)}function h(r=!1,m=null){r||(s.value=m),o.value=l(m,m==null?void 0:m.outputs[a.outputsIndex].comfy_node_id,r),I.value=!1}ce(a.flowResult,r=>{h(!0,r)});const I=C(!1),y=C(!0),n=C(null);return ce(I,r=>{r?(n.value=s.value,s.value=a.flowResult):n.value&&(s.value=n.value,o.value=da(n.value,a.outputsIndex,s.value.outputs.length>1?s.value.outputs[a.outputsIndex].comfy_node_id:s.value.outputs[0].comfy_node_id))}),(r,m)=>{const k=Xe,g=be("ImgComparisonSlider"),A=Jo,N=we,W=ht,G=ve,O=Bt;return v(),F("div",Xo,[ct(M(k,{class:"mb-2 rounded-lg cursor-pointer",height:i(t).outputMaxSize,width:i(t).outputMaxSize,draggable:"false",fit:"cover",loading:"lazy",src:("outputImgSrc"in r?r.outputImgSrc:i(Ce))({task_id:i(o).progress===100?i(o).task_id:e.flowResult.task_id,node_id:i(o).progress===100?i(o).outputs[0].comfy_node_id:e.flowResult.outputs[e.outputsIndex].comfy_node_id}),onClick:m[0]||(m[0]=z=>e.openImageModal(("outputImgSrc"in r?r.outputImgSrc:i(Ce))({task_id:i(o).task_id??e.flowResult.task_id,node_id:i(o).outputs[0].comfy_node_id??e.flowResult.outputs[e.outputsIndex].comfy_node_id})))},null,8,["height","width","src"]),[[Ot,!i(y)]]),i(y)?(v(),T(g,{key:0,class:"mb-2 mx-auto outline-none w-fit rounded-lg"},{default:B(()=>{var z,J,ee;return[M(k,{slot:"first",height:i(t).outputMaxSize,width:i(t).outputMaxSize,fit:"cover",draggable:"false",src:("outputImgSrc"in r?r.outputImgSrc:i(Ce))({task_id:i(I)?e.flowResult.task_id:i(s).task_id,node_id:i(I)?e.flowResult.outputs[e.outputsIndex].comfy_node_id:i(s).parent_task_node_id!==null?(z=i(s))==null?void 0:z.outputs[0].comfy_node_id:((J=i(s))==null?void 0:J.outputs[e.outputsIndex].comfy_node_id)??((ee=i(s))==null?void 0:ee.outputs[0].comfy_node_id)})},null,8,["height","width","src"]),i(o)&&i(o).progress===100?(v(),T(k,{key:0,slot:"second",height:i(t).outputMaxSize,width:i(t).outputMaxSize,fit:"cover",draggable:"false",src:("outputImgSrc"in r?r.outputImgSrc:i(Ce))({task_id:i(o).task_id,node_id:i(o).outputs[0].comfy_node_id})},null,8,["height","width","src"])):(v(),T(k,{key:1,slot:"second",height:i(t).outputMaxSize,width:i(t).outputMaxSize,fit:"cover",draggable:"false",src:`${("buildBackendUrl"in r?r.buildBackendUrl:i(hn))()}/vix_logo.png`},null,8,["height","width","src"]))]}),_:1})):_("",!0),P("div",Zo,[P("div",es,[P("div",ts,[M(A,{id:`toggle-compare-${e.flowResult.task_id}-${e.outputsIndex}`,modelValue:i(y),"onUpdate:modelValue":m[1]||(m[1]=z=>ye(y)?y.value=z:null),size:"xs",class:"mr-2"},null,8,["id","modelValue"]),P("label",{class:"cursor-pointer select-none",for:`toggle-compare-${e.flowResult.task_id}-${e.outputsIndex}`}," Comparison ",8,as)]),P("div",ns,[M(A,{id:`toggle-original-${e.flowResult.task_id}-${e.outputsIndex}`,modelValue:i(I),"onUpdate:modelValue":m[2]||(m[2]=z=>ye(I)?I.value=z:null),disabled:!i(y),size:"xs",class:"mr-2"},null,8,["id","modelValue","disabled"]),P("label",{class:"cursor-pointer select-none",for:`toggle-original-${e.flowResult.task_id}-${e.outputsIndex}`}," Original ",8,ls)])]),i(y)?(v(),F("div",os,[M(N,{icon:"i-heroicons-arrow-small-left-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:i(I)||i(s).parent_task_id===null,onClick:p},null,8,["disabled"]),M(W,{items:d(i(s)),mode:"click",popper:{placement:"top"}},{default:B(()=>[M(N,{variant:"link",color:"white",size:"xs"},{default:B(()=>[L(" #"+H(i(I)?e.flowResult.task_id:i(s).task_id),1)]),_:1})]),_:1},8,["items"]),M(N,{icon:"i-heroicons-arrow-small-right-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:i(I)||!i(w),onClick:b},null,8,["disabled"]),M(G,{class:"mx-3",name:"i-heroicons-arrows-right-left-16-solid"}),M(N,{icon:"i-heroicons-arrow-small-left-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:!u(a.flowResult,i(o).parent_task_id,i(o).parent_task_node_id)||i(o).parent_task_id===Number(i(s).task_id)||i(o).parent_task_id===null,onClick:f},null,8,["disabled"]),M(W,{items:c(i(o)),mode:"click",popper:{placement:"top"}},{error:B(({item:z})=>[P("div",{class:"text-red-500 truncate",title:z.label},H(z.label),9,ss)]),default:B(()=>[M(N,{class:R({"text-blue-500":i(o).progress!==100&&i(o).error==="","text-red-500":i(o).error!==""}),variant:"link",color:"white",size:"xs"},{default:B(()=>[L(H(i(o).progress===100?"#"+i(o).task_id:Math.ceil(i(o).progress)+"%"),1)]),_:1},8,["class"])]),_:1},8,["items"]),M(N,{icon:"i-heroicons-arrow-small-right-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:i(o).child_tasks.length===0,onClick:$},null,8,["disabled"]),M(O,{class:"ml-3",text:"Reset comparison",popper:{placement:"top"}},{default:B(()=>[M(N,{icon:"i-heroicons-arrow-path-rounded-square-solid",size:"2xs",variant:"outline",color:"white",onClick:m[3]||(m[3]=()=>h(!1,e.flowResult))})]),_:1})])):_("",!0)])])}}}),rs={class:"p-4"},us={class:"flex justify-center mb-4"},ds={key:0,class:"text-sm text-slate-500 text-center mb-4"},cs={class:"text-md text-center text-red-500 mb-4"},ms={key:1},fs={class:"flex items-center justify-between"},ps=Q({__name:"SendToFlowModal",props:{show:{type:Boolean,required:!1},flowResult:{type:Object,required:!1,default:()=>null},outputImgSrc:{type:String,required:!0},outputParamIndex:{type:Number,required:!0},inputParamsMapped:{type:Object,required:!0},isChildTask:{type:Boolean,required:!1,default:!1}},emits:["update:show"],setup(e,{emit:a}){const t=e,l=Be(),u=S(()=>l.sub_flows.map(w=>({value:w.name,label:`${w.display_name} - ${w.description}`}))),s=C(u.value[0]||""),o=C(!1),d=a;function c(){console.debug("[Send to flow]: ",s.value);const w=l.sub_flows.find($=>$.name===s.value.value&&$.display_name===s.value.label.split(" - ")[0]);if(console.debug("[Send to flow]: targetFlow",w),!w){mt().add({title:`Target sub-flow "${s.value.value}" not found`,description:"Please, verify the target sub-flow is installed and available and try again",timeout:5e3});return}const f=w.input_params.reduce(($,h)=>{const I={};return h.type==="text"?I[h.name]={value:h.default||"",type:h.type}:h.type==="number"?I[h.name]={value:h.default||0,type:h.type}:h.type==="image"?I[h.name]={value:JSON.stringify({task_id:t.flowResult.task_id,node_id:t.flowResult.outputs.length>1?t.flowResult.outputs[t.outputParamIndex].comfy_node_id:t.flowResult.outputs[0].comfy_node_id})||"",type:h.type}:h.type==="list"?I[h.name]={value:h.default||Object.keys(h.options)[0]||"",type:h.type,options:h.options}:h.type==="bool"?I[h.name]={value:h.default||!1,type:h.type}:["range","range_scale"].includes(h.type)&&(I[h.name]={value:h.default||0,type:h.type}),$.push(I),$},[]);console.debug("[Send to flow]: input_params_map",f),o.value=!0,l.runFlow(w,f,1,p.value,p.value?Number(t.flowResult.task_id):null).finally(()=>{o.value=!1,d("update:show",!1)})}const p=C(!1),b=S(()=>{var w;return t.flowResult.progress===100&&((w=t.flowResult)==null?void 0:w.error)===""});return ra(()=>{l.fetchSubFlows("image").then(()=>{s.value=u.value[0]||""}),p.value=!1}),(w,f)=>{const $=Xe,h=za,I=va,y=ga,n=we,r=nt;return v(),T(r,{modelValue:w.$props.show,"onUpdate:modelValue":f[2]||(f[2]=m=>w.$props.show=m),class:"z-[90]",transition:!1},{default:B(()=>[P("div",rs,[f[4]||(f[4]=P("h2",{class:"text-lg text-center mb-4"},"Send to flow",-1)),P("div",us,[i(b)?(v(),T($,{key:0,src:e.outputImgSrc,class:"w-1/2 rounded-lg",draggable:!1},null,8,["src"])):(v(),T(h,{key:1,color:"orange",icon:"i-heroicons-exclamation-circle-solid",title:`Task is still running (${Math.ceil(e.flowResult.progress)}%, ${e.flowResult.execution_time.toFixed(2)}s)`,description:e.flowResult.error!==""?e.flowResult.error:""},null,8,["title","description"]))]),e.inputParamsMapped?(v(),F("p",ds,H(["#"+e.flowResult.task_id,...Object.keys(e.inputParamsMapped).filter(m=>e.inputParamsMapped[m].value!=="").map(m=>`${e.inputParamsMapped[m].display_name}: ${e.inputParamsMapped[m].value}`)].join(" | ")),1)):_("",!0),P("p",cs,[i(u).length>0?(v(),T(I,{key:0,modelValue:i(s),"onUpdate:modelValue":f[0]||(f[0]=m=>ye(s)?s.value=m:null),class:"w-full",size:"lg",options:i(u)},null,8,["modelValue","options"])):(v(),F("span",ms,"No sub-flows available"))]),e.isChildTask?(v(),T(h,{key:1,class:"mb-4",icon:"i-heroicons-exclamation-circle-solid",title:"Child task",description:"The latest child task is always used as input for sub-flow"})):_("",!0),P("div",fs,[M(y,{modelValue:i(p),"onUpdate:modelValue":f[1]||(f[1]=m=>ye(p)?p.value=m:null),label:"Bind as child task"},null,8,["modelValue"]),M(n,{icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",variant:"outline",loading:i(o),disabled:i(u).length===0||e.isChildTask&&!i(b),onClick:c},{default:B(()=>f[3]||(f[3]=[L(" Send ")])),_:1},8,["loading","disabled"])])])]),_:1},8,["modelValue"])}}}),vs={class:"flex flex-col md:flex-row items-center justify-center mb-5 sticky top-1 z-[10]"},gs={class:"flex items-center justify-center"},hs={class:"p-4"},bs={class:"text-md text-center text-red-500 mb-4"},ys={class:"flex justify-center"},ws={key:0,class:"results overflow-auto"},ks=["id"],$s={class:"flex flex-col basis-full justify-between mx-2"},Is={class:"text-sm text-slate-500 text-center mb-1"},Ss={class:"w-5/6 mx-auto"},Cs={class:"w-full flex justify-center items-center"},xs={key:1,class:"text-center text-slate-500"},Ms=Q({__name:"Output",emits:["copy-prompt-inputs"],setup(e,{emit:a}){const t=Be(),l=S(()=>{var O;return t.flowResultsByName((O=t.currentFlow)==null?void 0:O.name).length>0||!1}),u=S(()=>{var O;return t.flowResultsByName((O=t.currentFlow)==null?void 0:O.name).reverse()||[]}),s=S(()=>t.$state.resultsPageSize);ce(u,()=>{u.value.length<=t.$state.resultsPageSize?t.$state.resultsPage=1:t.$state.resultsPage>Math.ceil(u.value.length/t.$state.resultsPageSize)&&(t.$state.resultsPage=Math.ceil(u.value.length/t.$state.resultsPageSize))}),ce(s,()=>{u.value.length<=t.$state.resultsPageSize?t.$state.resultsPage=1:t.$state.resultsPage>Math.ceil(u.value.length/t.$state.resultsPageSize)&&(t.$state.resultsPage=Math.ceil(u.value.length/t.$state.resultsPageSize)),t.saveUserOptions()}),_e(()=>{t.$state.flow_results_filter="",t.$state.resultsPage=1});const o=a;function d(O){o("copy-prompt-inputs",O.input_params_mapped)}function c(O){h.value=O,$.value=!0}const p=C(null),b=C(!1);window.addEventListener("scroll",()=>{var O;b.value=window.scrollY>(((O=p.value)==null?void 0:O.offsetTop)+window.screen.height||0)});const w=S(()=>t.$state.resultsPage);ce(w,()=>{const O=document.getElementById("output-container");O&&O.scrollIntoView({behavior:"smooth"})});const f=C(!1),$=C(!1),h=C(""),I=C(!1),y=C(!1),n=C(!1),r=C(""),m=C(null),k=C({}),g=C(0),A=C(!1);function N(O,z=0){if(O.child_tasks.length===0||!Ht(O,z,O.outputs[z].comfy_node_id))m.value=O,r.value=Ce({task_id:O.task_id,node_id:O.outputs[z].comfy_node_id}),k.value=O.input_params_mapped,A.value=!1;else{const J=da(O,z,O.outputs[z].comfy_node_id);m.value=J,k.value=O.input_params_mapped,r.value=Ce({task_id:J.task_id,node_id:J.outputs[0].comfy_node_id}),A.value=!0}g.value=z,n.value=!0}function W(O){return["#"+O.task_id,...Object.keys(O.input_params_mapped).filter(z=>O.input_params_mapped[z].value&&O.input_params_mapped[z].value!=="").map(z=>`${O.input_params_mapped[z].display_name}: ${O.input_params_mapped[z].value}`)].join(" | ")+`${O.execution_time?" | execution_time: "+O.execution_time.toFixed(2)+"s":""}`}function G(O){const z=[[{label:"Use params",labelClass:"text-cyan-500 text-sm",icon:"i-heroicons-document-duplicate-16-solid",iconClass:"bg-cyan-500 h-4 w-4",click:()=>d(O)}],[{label:"Comfy flow",labelClass:"text-blue-500 text-sm",icon:"i-heroicons-arrow-down-tray",iconClass:"bg-blue-500 h-4 w-4",click:()=>{var J;return t.downloadFlowComfy((J=t.currentFlow)==null?void 0:J.name,O.task_id)}}]];return O.outputs.length===1&&z.splice(1,0,[{label:"Send to flow",labelClass:"text-violet-500 text-sm",icon:"i-heroicons-arrow-uturn-up-solid",iconClass:"bg-violet-500 h-4 w-4",click:()=>{N(O)}}]),z}return(O,z)=>{var j;const J=Do,ee=ve,E=At,Y=_n,X=Ko,ae=we,ke=ht,$e=ca,ge=nt,V=is,U=Xe,q=Fa,ie=ps;return v(),F("div",{id:"output-container",ref_key:"outputContainer",ref:p,class:"w-full p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg shadow-md my-10"},[M(J,{show:i(b),class:"fixed bottom-5 right-5",target:"output-container"},null,8,["show"]),P("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center mb-3",onClick:z[0]||(z[0]=()=>{f.value=!i(f)})},[M(ee,{name:i(f)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),L(" Output ("+H(i(u).filter(x=>x.parent_task_id===null).length)+") ",1)]),i(f)?_("",!0):(v(),F(Z,{key:0},[P("div",vs,[M(E,{modelValue:i(t).$state.flow_results_filter,"onUpdate:modelValue":z[1]||(z[1]=x=>i(t).$state.flow_results_filter=x),icon:"i-heroicons-magnifying-glass-20-solid",color:"white",class:"md:mr-3",label:"Filter by prompt",trailing:!0,placeholder:"Filter results by prompt"},null,8,["modelValue"]),i(u).filter(x=>x.parent_task_id===null).length>i(t).$state.resultsPageSize?(v(),T(Y,{key:0,modelValue:i(t).$state.resultsPage,"onUpdate:modelValue":z[2]||(z[2]=x=>i(t).$state.resultsPage=x),class:"my-1 md:my-0","page-count":i(t).$state.resultsPageSize,total:i(u).filter(x=>x.parent_task_id===null).length,"show-first":"","show-last":""},null,8,["modelValue","page-count","total"])):_("",!0),P("div",gs,[M(X,{modelValue:i(t).resultsPageSize,"onUpdate:modelValue":z[3]||(z[3]=x=>i(t).resultsPageSize=x),class:"md:mx-3 w-fit mr-3",options:[5,10,20,50,100],label:"Results per page"},null,8,["modelValue"]),M(ke,{items:[[{label:"Delete all results",labelClass:"text-red-500",icon:"i-heroicons-trash",iconClass:"dark:text-red-500 text-red-500",click:()=>I.value=!0}]],mode:"click",label:"Options",popper:{placement:"bottom-end"}},{default:B(()=>[M(ae,{color:"white",icon:"i-heroicons-ellipsis-vertical-16-solid"})]),_:1},8,["items"])]),M(ge,{modelValue:i(I),"onUpdate:modelValue":z[6]||(z[6]=x=>ye(I)?I.value=x:null),class:"z-[90]",transition:!1},{default:B(()=>[P("div",hs,[z[16]||(z[16]=P("p",{class:"text-lg text-center mb-4"},"Are you sure you want to delete all results?",-1)),P("p",bs,[z[12]||(z[12]=L(" All history and images of ")),M($e,{class:"mx-1",color:"orange",variant:"outline"},{default:B(()=>[L(H(i(t).currentFlow.display_name),1)]),_:1}),z[13]||(z[13]=L(" will be deleted. "))]),P("div",ys,[M(ae,{class:"mr-2",color:"red",variant:"outline",loading:i(y),onClick:z[4]||(z[4]=()=>{var x;y.value=!0,i(t).deleteFlowResults((x=i(t).currentFlow)==null?void 0:x.name).then(()=>{y.value=!1,I.value=!1})})},{default:B(()=>z[14]||(z[14]=[L(" Yes ")])),_:1},8,["loading"]),M(ae,{variant:"outline",onClick:z[5]||(z[5]=()=>I.value=!1)},{default:B(()=>z[15]||(z[15]=[L("No")])),_:1})])])]),_:1},8,["modelValue"])]),i(l)?(v(),F("div",ws,[(v(!0),F(Z,null,me(i(t).flowResultsByNamePaginated((j=i(t).currentFlow)==null?void 0:j.name),x=>(v(),F("div",{id:"task_id_"+x.task_id,key:x.task_id,class:"flex flex-col justify-center mx-auto mb-5"},[x.outputs.length===1?(v(),F(Z,{key:0},[x!=null&&x.child_tasks&&(x==null?void 0:x.child_tasks.length)>0?(v(),T(V,{key:0,"flow-result":x,"open-image-modal":c},null,8,["flow-result"])):x.outputs.length===1?(v(),T(U,{key:1,class:"mb-2 mx-auto rounded-lg cursor-pointer",height:i(t).$state.outputMaxSize,width:i(t).$state.outputMaxSize,draggable:"false",fit:"cover",loading:"lazy",src:("outputImgSrc"in O?O.outputImgSrc:i(Ce))({task_id:x.task_id,node_id:x.outputs[0].comfy_node_id}),onClick:D=>c(("outputImgSrc"in O?O.outputImgSrc:i(Ce))({task_id:x.task_id,node_id:x.outputs[0].comfy_node_id}))},null,8,["height","width","src","onClick"])):_("",!0)],64)):x.outputs.length>1?(v(),T(q,{key:1,class:"mb-3 rounded-lg overflow-hidden",items:x.outputs.map((D,ne)=>({task_id:x.task_id,node_id:D.comfy_node_id,index:ne})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4 md:hidden"}},page:1,indicators:""},{default:B(({item:D})=>[P("div",$s,[x!=null&&x.child_tasks&&("hasChildTaskByParentTaskNodeId"in O?O.hasChildTaskByParentTaskNodeId:i(Ht))(x,D.index,D.node_id)?(v(),T(V,{key:0,"flow-result":x,"outputs-index":D.index,"open-image-modal":c},null,8,["flow-result","outputs-index"])):(v(),T(U,{key:1,class:R(`mb-2 h-100 max-h-[${i(t).$state.outputMaxSize}px] mx-auto rounded-lg cursor-pointer`),draggable:"false",height:i(t).$state.outputMaxSize,width:i(t).$state.outputMaxSize,fit:"cover",loading:"lazy",src:("outputImgSrc"in O?O.outputImgSrc:i(Ce))(D),onClick:ne=>c(("outputImgSrc"in O?O.outputImgSrc:i(Ce))(D))},null,8,["class","height","width","src","onClick"])),M(ae,{class:"mt-2 w-fit mx-auto",icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",size:"xs",variant:"outline",onClick:()=>{N(x,D.index)}},{default:B(()=>z[17]||(z[17]=[L(" Send to flow ")])),_:2},1032,["onClick"])])]),_:2},1032,["items"])):_("",!0),P("div",Is,[P("div",Ss,[(v(!0),F(Z,null,me(W(x).split("|"),D=>(v(),T($e,{key:D,class:"mr-2 mb-2 last:mr-0 hover:cursor-pointer",variant:"soft",color:"gray",onClick:()=>{("useCopyToClipboard"in O?O.useCopyToClipboard:i(Ta))().copy(D),("useToast"in O?O.useToast:i(mt))().add({title:"Clipboard",description:`${D.split(":")[0].trim()} copied to clipboard`,timeout:2e3})}},{default:B(()=>[L(H(D),1)]),_:2},1032,["onClick"]))),128))])]),P("div",Cs,[M(ae,{class:"mr-3",color:"red",icon:"i-heroicons-trash",variant:"outline",size:"xs",onClick:()=>i(t).deleteFlowHistory(x.task_id)},{default:B(()=>z[18]||(z[18]=[L(" Delete ")])),_:2},1032,["onClick"]),M(ke,{items:G(x),mode:"click",popper:{placement:"bottom-start"}},{default:B(()=>[M(ae,{color:"white",icon:"i-heroicons-ellipsis-vertical-16-solid",size:"xs"})]),_:2},1032,["items"])])],8,ks))),128)),M(ie,{modelValue:i(n),"onUpdate:modelValue":z[7]||(z[7]=x=>ye(n)?n.value=x:null),"flow-result":i(m),"output-img-src":i(r),"output-param-index":i(g),"input-params-mapped":i(k),"is-child-task":i(A),"onUpdate:show":z[8]||(z[8]=x=>n.value=x)},null,8,["modelValue","flow-result","output-img-src","output-param-index","input-params-mapped","is-child-task"])])):(v(),F("p",xs," No output results available "))],64)),M(ge,{modelValue:i($),"onUpdate:modelValue":z[11]||(z[11]=x=>ye($)?$.value=x:null),class:"z-[90]",transition:!1,fullscreen:""},{default:B(()=>[M(ae,{class:"absolute top-4 right-4",icon:"i-heroicons-x-mark",variant:"ghost",onClick:z[9]||(z[9]=()=>$.value=!1)}),P("div",{class:"flex items-center justify-center w-full h-full p-4",onClick:z[10]||(z[10]=Je(()=>$.value=!1,["left"]))},[i(h)?(v(),T(U,{key:0,class:"lg:h-full",fit:"inside",loading:"lazy",src:i(h)},null,8,["src"])):_("",!0)])]),_:1},8,["modelValue"])],512)}}}),Ps={class:"flex flex-col lg:flex-row flex-grow items-start w-full"},_s={class:"card-wrapper w-full lg:pr-5"},Fs={key:0,class:"p-0 text-sm"},zs={class:"flex flex-row items-center text-slate-400 mb-2"},Ts={class:"flex flex-row flex-wrap items-center text-md mb-2"},Os=["href"],Bs={class:"flex flex-row items-center text-md mb-2"},As=["href"],js={key:1},Us={class:"flex flex-row items-center text-md mb-2"},Es={key:0},Rs={class:"flex flex-row items-center text-md mb-2"},Ns={key:0,class:"flex flex-row flex-wrap items-center text-md mb-2"},Ds=["href"],Ls={key:1,class:"flex flex-row flex-wrap items-center text-md"},Vs={key:0,class:"flex justify-end"},qs={class:"flex flex-row items-center justify-center text-sm mr-2"},Hs={key:1},Ws={class:"text-sm flex justify-end"},Gs={class:"flex flex-row items-center justify-center text-sm mr-3"},Ks={key:0,class:"text-right"},Qs={class:"prompt-wrapper w-full"},Ys={class:"flex items-center justify-between"},Js={class:"pb-2"},Xs={class:"flex justify-end items-center"},oi=Q({__name:"[name]",setup(e){const a=bn(),t=Be();t.setCurrentFlow(a.params.name);const l=S(()=>t.flowInstallingByName(a.params.name)),u=S(()=>{var y;return l.value&&((y=l.value)==null?void 0:y.progress)<100||!1}),s=C(!1),o=S(()=>{var y;return l.value?"error"in l.value&&((y=l.value)==null?void 0:y.error)!==""?`${l.value.progress.toFixed(0)}% Error setting up`:`${l.value.progress.toFixed(0)}% Setting up`:"Setup flow"}),d=C(!1),c=C(!1),p=S(()=>{var n;const y=[[{label:"Delete flow",icon:"i-heroicons-trash",click:w}]];return((n=t==null?void 0:t.currentFlow)==null?void 0:n.new_version_available)!==""&&y[0].unshift({label:`Update to ${t.currentFlow.new_version_available}`,icon:"i-heroicons-arrow-path",click:()=>{t.updateFlow(t.currentFlow)}}),y});function b(y,n=!1){d.value=!0,t.deleteFlow(y).then(()=>{n&&$n().push("/")}).finally(()=>{d.value=!1,c.value=!1})}function w(){var n;const y=((n=t.currentFlow)==null?void 0:n.private)||!1;if(y){c.value=!0;return}b(t.currentFlow,y)}const f=C(!1),$=C(null),h=function(y){var n;(n=$.value)==null||n.copyPromptInputs(y)},I=yn();return(y,n)=>{const r=ve,m=Bt,k=ca,g=we,A=ht,N=Fn,W=$o,G=No,O=Ms,z=fa,J=nt,ee=wn;return v(),T(ee,null,{default:B(()=>[!i(t).loading.flows_available&&!i(t).loading.flows_installed&&i(t).currentFlow&&!i(t).$state.loading.tasks_history?(v(),F(Z,{key:0},[P("div",Ps,[P("div",_s,[M(N,{as:"div",class:"w-full mb-5"},kn({header:B(()=>{var E,Y;return[P("h2",{class:"text-xl font-bold cursor-pointer select-none flex items-center",onClick:n[0]||(n[0]=()=>{f.value=!i(f)})},[(E=i(t).currentFlow)!=null&&E.private?(v(),T(m,{key:0,text:"This flow is local, manually added"},{default:B(()=>[M(r,{name:"i-heroicons-lock-closed",class:"mr-2"})]),_:1})):_("",!0),M(r,{name:i(f)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),L(" "+H((Y=i(t).currentFlow)==null?void 0:Y.display_name),1)])]}),default:B(()=>{var E,Y,X,ae,ke,$e,ge,V,U,q,ie,j,x,D,ne,le,Ie;return[i(f)?_("",!0):(v(),F("div",Fs,[P("p",zs,H((E=i(t).currentFlow)==null?void 0:E.description),1),P("p",Ts,[M(r,{name:"i-heroicons-user-16-solid",class:"mr-1"}),n[8]||(n[8]=P("b",null,"Author:",-1)),n[9]||(n[9]=L("  ")),P("a",{class:"hover:underline text-md",href:(Y=i(t).currentFlow)==null?void 0:Y.homepage,rel:"noopener",target:"_blank"},H((X=i(t).currentFlow)==null?void 0:X.author),9,Os)]),P("p",Bs,[M(r,{name:"i-heroicons-document-text",class:"mr-1"}),(ae=i(t).currentFlow)!=null&&ae.documentation?(v(),F("a",{key:0,class:"hover:underline",href:(ke=i(t).currentFlow)==null?void 0:ke.documentation,rel:"noopener",target:"_blank"}," Documentation ",8,As)):(v(),F("span",js,"No documentation"))]),P("p",Us,[M(r,{name:"i-heroicons-clock",class:"mr-1"}),n[10]||(n[10]=P("b",null,"Version:",-1)),n[11]||(n[11]=L("  ")),P("span",null,H(($e=i(t).currentFlow)==null?void 0:$e.version),1),((ge=i(t).currentFlow)==null?void 0:ge.new_version_available)!==""?(v(),F("span",Es,"  (new version available: "+H((V=i(t).currentFlow)==null?void 0:V.new_version_available)+") ",1)):_("",!0)]),P("p",Rs,[M(r,{name:"i-heroicons-tag",class:"mr-1"}),n[12]||(n[12]=P("b",null,"Tags:",-1)),n[13]||(n[13]=L("  ")),((U=i(t).currentFlow)==null?void 0:U.tags.length)>0?(v(!0),F(Z,{key:0},me((q=i(t).currentFlow)==null?void 0:q.tags,oe=>(v(),T(k,{key:oe,label:oe,color:"white",variant:"solid",class:"m-1"},null,8,["label"]))),128)):(v(),T(k,{key:1,label:"No tags",color:"white",variant:"solid",class:"m-1"}))]),((j=(ie=i(t).currentFlow)==null?void 0:ie.models)==null?void 0:j.length)>0?(v(),F("p",Ns,[M(r,{name:"i-heroicons-arrow-down-on-square-stack",class:"mr-1"}),P("b",null,"Models ("+H((x=i(t).currentFlow)==null?void 0:x.models.length)+"):",1),n[14]||(n[14]=L("  ")),(v(!0),F(Z,null,me((D=i(t).currentFlow)==null?void 0:D.models,oe=>(v(),T(k,{key:oe.name,class:"m-1",color:"white",variant:"solid"},{default:B(()=>[oe.gated?(v(),T(m,{key:0,text:"Gated model, requires auth token for download",popper:{placement:"top"}},{default:B(()=>[M(r,{name:"i-heroicons-key",class:"mr-1"})]),_:1})):_("",!0),P("a",{class:"hover:underline underline-offset-4",href:oe.homepage,rel:"noopener",target:"_blank"},H(oe.name),9,Ds)]),_:2},1024))),128))])):_("",!0),((le=(ne=i(t).currentFlow)==null?void 0:ne.requires)==null?void 0:le.length)>0?(v(),F("p",Ls,[n[15]||(n[15]=P("b",null,"Requires:",-1)),n[16]||(n[16]=L("  ")),(v(!0),F(Z,null,me((Ie=i(t).currentFlow)==null?void 0:Ie.requires,oe=>(v(),T(k,{key:oe,class:"m-1",color:"yellow",variant:"outline"},{default:B(()=>[L(H(oe),1)]),_:2},1024))),128))])):_("",!0)]))]}),_:2},[i(f)?void 0:{name:"footer",fn:B(()=>[i(I).isAdmin?(v(),F("div",Vs,[P("div",qs,[M(r,{name:i(t).isFlowInstalled(i(a).params.name)?"i-heroicons-check-badge":"i-heroicons-x-mark",class:"mx-1"},null,8,["name"]),P("span",{class:R({"text-green-500":i(t).isFlowInstalled(i(a).params.name),"text-red-500":!i(t).isFlowInstalled(i(a).params.name)})},H(i(t).isFlowInstalled(i(a).params.name)?"Installed":"Not installed"),3)]),i(t).isFlowInstalled(i(a).params.name)?_("",!0):(v(),T(m,{key:0,text:"Setup flow dependencies and configure it in ComfyUI",popper:{placement:"top"},"open-delay":500},{default:B(()=>[M(g,{icon:"i-heroicons-arrow-down-tray",class:"mx-3",color:"primary",variant:"outline",loading:i(u),onClick:n[1]||(n[1]=()=>i(t).setupFlow(i(t).currentFlow))},{default:B(()=>[L(H(i(o)),1)]),_:1},8,["loading"])]),_:1})),!i(t).isFlowInstalled(i(a).params.name)&&i(u)?(v(),T(m,{key:1,text:"Cancel flow installation",popper:{placement:"top"},"open-delay":500},{default:B(()=>[M(g,{icon:"i-heroicons-stop",variant:"outline",color:"orange",loading:i(s),onClick:n[2]||(n[2]=()=>{s.value=!0,i(t).cancelFlowSetup(i(t).currentFlow).then(()=>{s.value=!1})})},{default:B(()=>n[17]||(n[17]=[L(" Cancel ")])),_:1},8,["loading"])]),_:1})):_("",!0),i(t).isFlowInstalled(i(a).params.name)?(v(),T(A,{key:2,items:i(p),mode:"click",label:"Actions",popper:{placement:"bottom-end"}},{default:B(()=>[M(g,{color:"white",label:"Actions","trailing-icon":"i-heroicons-chevron-down-20-solid"})]),_:1},8,["items"])):_("",!0)])):(v(),F("div",Hs,[P("div",Ws,[P("div",Gs,[M(r,{name:i(t).isFlowInstalled(i(a).params.name)?"i-heroicons-check-badge":"i-heroicons-x-mark",class:"mx-1"},null,8,["name"]),P("span",{class:R({"text-green-500":i(t).isFlowInstalled(i(a).params.name),"text-red-500":!i(t).isFlowInstalled(i(a).params.name)})},H(i(t).isFlowInstalled(i(a).params.name)?"Installed":"Not installed"),3)]),i(t).isFlowInstalled(i(a).params.name)?_("",!0):(v(),F("div",Ks,n[18]||(n[18]=[P("p",{class:"text-orange-500"},"Only admin can manage workflows.",-1),P("span",{class:"text-slate-500"},"Ask your admin to setup this workflow",-1)])))])]))]),key:"0"}]),1024)]),P("div",Qs,[!i(d)&&i(t).isFlowInstalled(i(a).params.name)?(v(),T(W,{key:0,ref_key:"workflowPrompt",ref:$},null,512)):_("",!0)])]),!i(d)&&i(t).isFlowInstalled(i(a).params.name)?(v(),T(G,{key:0})):_("",!0),!i(d)&&i(t).isFlowInstalled(i(a).params.name)||i(t).flowResultsByName(i(a).params.name).length>0?(v(),T(O,{key:1,onCopyPromptInputs:n[3]||(n[3]=E=>h(E))})):_("",!0)],64)):(v(),T(z,{key:1,class:"mb-3"})),M(J,{modelValue:i(c),"onUpdate:modelValue":n[7]||(n[7]=E=>ye(c)?c.value=E:null),"prevent-close":""},{default:B(()=>[M(N,{ui:{ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:B(()=>[P("div",Ys,[n[19]||(n[19]=P("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Confirm workflow deletion ",-1)),M(g,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:n[4]||(n[4]=E=>c.value=!1)})])]),default:B(()=>{var E;return[P("p",Js,[n[20]||(n[20]=L(" Are you sure you want to delete the ")),n[21]||(n[21]=P("b",null,"private",-1)),n[22]||(n[22]=L(" workflow ")),P("b",null,H((E=i(t).currentFlow)==null?void 0:E.display_name),1),n[23]||(n[23]=L("? "))]),P("div",Xs,[M(g,{icon:"i-heroicons-x-mark-16-solid",variant:"outline",color:"green",class:"mr-2",onClick:n[5]||(n[5]=Y=>c.value=!1)},{default:B(()=>n[24]||(n[24]=[L(" Cancel ")])),_:1}),M(g,{icon:"i-heroicons-trash",variant:"outline",color:"red",onClick:n[6]||(n[6]=Y=>{var X;return b(i(t).currentFlow,((X=i(t).currentFlow)==null?void 0:X.private)||!1)})},{default:B(()=>n[25]||(n[25]=[L(" Delete ")])),_:1})])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{oi as default};
