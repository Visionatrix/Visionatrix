import{_ as q,a as I}from"./DEZzGQPm.js";import{_ as T}from"./B23bJk9k.js";import{_ as L,a as W,b as A}from"./CK51q2uK.js";import{_ as D}from"./0WB7VeWV.js";import{f as z,g as j,o as l,c,b as n,w as i,a,t as p,h as P,d as h,F as S,r as M,i as _,j as E,k as G,l as $,m as O,n as B,p as t,u as R,q as H,s as N,v as J}from"./DBZEk4gD.js";const K={class:"p-4 w-full md:w-6/12 lg:w-4/12 z-[10]"},Q={class:"flex flex-grow justify-between"},X=["title"],Y={class:"flex flex-col items-between text-sm"},Z=["title"],ee={class:"flex flex-row flex-wrap items-center mb-2"},te={class:"flex flex-row items-center"},oe=["href"],se={class:"flex flex-row items-center mb-2"},le=["href"],ne={key:1},ae={class:"flex flex-row items-center mb-2"},ie={class:"flex flex-row items-center"},re=z({__name:"ListItem",props:{flow:{type:Object,required:!0}},setup(o){const e=j();return(F,s)=>{const m=P,u=G,r=O,b=E,U=L;return l(),c("div",K,[n(U,{as:"div",class:"hover:shadow-md"},{header:i(()=>{var d,x,g;return[a("div",Q,[a("h2",{class:"text-xl font-bold truncate flex items-center",title:(d=o.flow)==null?void 0:d.display_name},[(x=o.flow)!=null&&x.private?(l(),_(u,{key:0,text:"This flow is local, manually added"},{default:i(()=>[n(m,{name:"i-heroicons-lock-closed",class:B(["mr-2",{"text-stone-500":!o.flow.is_supported_by_workers}])},null,8,["class"])]),_:1})):$("",!0),n(u,{text:o.flow.is_supported_by_workers?"":"No workers capable of running this flow",popper:{placement:"top"}},{default:i(()=>{var w;return[a("span",{class:B({"text-stone-500":!o.flow.is_supported_by_workers})},p((w=o.flow)==null?void 0:w.display_name),3)]}),_:1},8,["text"])],8,X),t(e).isFlowInstalled((g=o.flow)==null?void 0:g.name)?(l(),_(u,{key:0,text:"Mark flow as favorite",class:"ml-3",popper:{placement:"top"},"open-delay":500},{default:i(()=>[n(r,{icon:t(e).isFlowFavorite(o.flow.name)?"i-heroicons-star-16-solid":"i-heroicons-star",variant:"outline",color:"yellow",onClick:s[0]||(s[0]=w=>t(e).markFlowFavorite(o.flow))},null,8,["icon"])]),_:1})):$("",!0)])]}),footer:i(()=>{var d;return[n(r,{to:`/workflows/${(d=o.flow)==null?void 0:d.name}`,icon:"i-heroicons-arrow-up-right-16-solid",class:"flex justify-center dark:bg-slate-500 bg-slate-500 dark:hover:bg-slate-700 hover:bg-slate-700 dark:text-white"},{default:i(()=>s[9]||(s[9]=[h(" Open ")])),_:1},8,["to"])]}),default:i(()=>{var d,x,g,w,y,v,V,f,C;return[a("div",Y,[a("p",{class:"text-md text-slate-400 truncate text-ellipsis mb-2",title:(d=o.flow)==null?void 0:d.description},p((x=o.flow)==null?void 0:x.description),9,Z),a("p",ee,[a("span",te,[n(m,{name:"i-heroicons-user-16-solid",class:"mr-1"}),s[1]||(s[1]=a("b",null,"Author:",-1)),s[2]||(s[2]=h("  "))]),a("a",{class:"hover:underline flex flex-row items-center",href:(g=o.flow)==null?void 0:g.homepage,rel:"noopener",target:"_blank"},p((w=o.flow)==null?void 0:w.author),9,oe)]),a("p",se,[n(m,{name:"i-heroicons-document-text",class:"mr-1"}),(y=o.flow)!=null&&y.documentation?(l(),c("a",{key:0,class:"hover:underline",href:(v=o.flow)==null?void 0:v.documentation,rel:"noopener",target:"_blank"},"Documentation",8,le)):(l(),c("span",ne,"No documentation"))]),a("p",ae,[n(m,{name:"i-heroicons-tag",class:"mr-1"}),s[3]||(s[3]=a("b",null,"Tags:",-1)),s[4]||(s[4]=h("  ")),((V=o.flow)==null?void 0:V.tags.length)>0?(l(!0),c(S,{key:0},M((f=o.flow)==null?void 0:f.tags,k=>(l(),_(b,{key:k,label:k,color:"white",variant:"solid",class:"m-1"},null,8,["label"]))),128)):(l(),_(b,{key:1,label:"No tags",color:"white",variant:"solid",class:"m-1"}))]),a("p",ie,[n(m,{name:"i-mdi-help-network-outline",class:"mr-1"}),s[7]||(s[7]=a("b",null,"Platforms:",-1)),s[8]||(s[8]=h("  ")),n(u,{text:"Linux"},{default:i(()=>[n(m,{name:"i-mdi-linux",class:"mr-1"})]),_:1}),n(u,{text:"Microsoft Windows"},{default:i(()=>[n(m,{name:"i-mdi-microsoft-windows",class:"mr-1"})]),_:1}),o.flow.is_macos_supported?(l(),_(u,{key:0,text:"macOS"},{default:i(()=>[n(m,{name:"i-mdi-apple",class:"mr-1"})]),_:1})):$("",!0),(C=o.flow)!=null&&C.required_memory_gb?(l(),_(u,{key:1,class:"flex flex-row items-center",text:"Required VRAM memory (GB)"},{default:i(()=>{var k;return[s[5]||(s[5]=h(" (")),n(m,{name:"i-mdi-memory",class:"mr-1"}),a("span",null,p((k=o.flow)==null?void 0:k.required_memory_gb)+" GB",1),s[6]||(s[6]=h(") "))]}),_:1})):$("",!0)])])]}),_:1})])}}}),fe={class:"w-full sticky z-[100] top-1 flex flex-col md:flex-row justify-center items-center my-1"},me={class:"flex"},ce={key:0,class:"truncate"},de={key:1},_e={key:0},ue={key:0,class:"flex flex-wrap justify-center items-center mb-10"},we={key:1,class:"text-center text-slate-500 my-5"},ke=z({__name:"index",setup(o){R({title:"Workflows - Visionatrix",meta:[{name:"description",content:"Workflows - Visionatrix"}]});const e=j();H(()=>e.paginatedFlows,()=>{e.flows.length<=e.$state.pageSize?e.$state.page=1:e.$state.page>Math.ceil(e.flows.length/e.$state.pageSize)&&(e.$state.page=Math.ceil(e.flows.length/e.$state.pageSize))});function F(){return[[{label:"Show unsupported flows",icon:e.$state.show_unsupported_flows?"i-mdi-filter-check":"i-mdi-filter-minus",slot:"show_unsupported_flows",click:()=>{e.$state.show_unsupported_flows=!e.$state.show_unsupported_flows,e.saveUserOptions()}}],[{label:"Clear filters",icon:"i-mdi-filter-off",click:()=>{e.$state.flows_search_filter="",e.$state.flows_tags_filter=[],e.$state.show_unsupported_flows=!1}}]]}const s=N(()=>e.$state.flows_search_filter||e.$state.flows_tags_filter.length>0||e.$state.show_unsupported_flows),m=N(()=>(e.$state.flows_search_filter?1:0)+e.$state.flows_tags_filter.length+(e.$state.show_unsupported_flows?1:0));return(u,r)=>{const b=q,U=T,d=W,x=D,g=O,w=I,y=A,v=re,V=J;return l(),_(V,{class:"lg:h-dvh"},{default:i(()=>[t(e).$state.loading.flows_available||t(e).loading.flows_installed||t(e).$state.loading.tasks_history?(l(),_(b,{key:0})):(l(),c(S,{key:1},[a("div",fe,[n(U,{modelValue:t(e).$state.flows_search_filter,"onUpdate:modelValue":r[0]||(r[0]=f=>t(e).$state.flows_search_filter=f),icon:"i-heroicons-magnifying-glass-20-solid",color:"white",class:"mb-1 md:mr-3 md:mb-0",label:"Filter by prompt",trailing:!0,placeholder:"Search flows"},null,8,["modelValue"]),t(e).flows.length>t(e).$state.pageSize?(l(),_(d,{key:0,modelValue:t(e).$state.page,"onUpdate:modelValue":r[1]||(r[1]=f=>t(e).$state.page=f),class:"mb-1 md:mr-3 md:mb-0","page-count":t(e).$state.pageSize,total:t(e).flows.length},null,8,["modelValue","page-count","total"])):$("",!0),a("div",me,[n(x,{modelValue:t(e).$state.flows_tags_filter,"onUpdate:modelValue":r[2]||(r[2]=f=>t(e).$state.flows_tags_filter=f),options:t(e).flowsTags,multiple:"",searchable:""},{label:i(()=>[t(e).$state.flows_tags_filter.length>0?(l(),c("span",ce,p(t(e).$state.flows_tags_filter.join(",")),1)):(l(),c("span",de,"Select tags to filter"))]),_:1},8,["modelValue","options"]),n(y,{class:"ml-2",items:F(),mode:"click",label:"Options"},{show_unsupported_flows:i(()=>[n(w,{modelValue:t(e).$state.show_unsupported_flows,"onUpdate:modelValue":r[3]||(r[3]=f=>t(e).$state.show_unsupported_flows=f)},null,8,["modelValue"]),r[4]||(r[4]=a("span",{class:"ml-2"},"Show unsupported flows",-1))]),default:i(()=>[n(g,{color:"white",icon:"i-heroicons-ellipsis-vertical-16-solid"},{default:i(()=>[a("span",null,p(t(e).flows.length),1),t(s)?(l(),c("span",_e,"("+p(t(m))+")",1)):$("",!0)]),_:1})]),_:1},8,["items"])])]),t(e).flows.length>0?(l(),c("div",ue,[(l(!0),c(S,null,M(t(e).paginatedFlows,f=>(l(),_(v,{key:f.name,flow:f},null,8,["flow"]))),128))])):(l(),c("p",we,p(t(e).$state.flows_search_filter||t(e).$state.flows_tags_filter?"No flows found":"No flows available"),1))],64))]),_:1})}}});export{ke as default};
