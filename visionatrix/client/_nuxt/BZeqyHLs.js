import{_ as M}from"./Cdvf8zsD.js";import{_ as q}from"./DOs2DJj1.js";import{_ as I,a as T}from"./BUrUJsYe.js";import{_ as L}from"./C3aN936R.js";import{f as z,g as B,o as l,c,b as n,w as r,a,t as p,h as W,d as w,F as $,r as j,i as d,j as A,k as O,l as h,m as P,n as N,p as o,u as D,q as G,s as R}from"./BkmaeSbd.js";const E={class:"p-4 w-full md:w-6/12 lg:w-4/12 z-[10]"},H={class:"flex flex-grow justify-between"},J=["title"],K={class:"flex flex-col items-between text-sm"},Q=["title"],X={class:"flex flex-row flex-wrap items-center mb-2"},Y={class:"flex flex-row items-center"},Z=["href"],ee={class:"flex flex-row items-center mb-2"},te=["href"],oe={key:1},se={class:"flex flex-row items-center mb-2"},le={class:"flex flex-row items-center"},ne=z({__name:"ListItem",props:{flow:{type:Object,required:!0}},setup(s){const e=B();return(C,t)=>{const m=W,u=O,k=P,y=A,b=I;return l(),c("div",E,[n(b,{as:"div",class:"hover:shadow-md"},{header:r(()=>{var f,i,x;return[a("div",H,[a("h2",{class:"text-xl font-bold truncate flex items-center",title:(f=s.flow)==null?void 0:f.display_name},[(i=s.flow)!=null&&i.private?(l(),d(u,{key:0,text:"This flow is local, manually added"},{default:r(()=>[n(m,{name:"i-heroicons-lock-closed",class:N(["mr-2",{"text-stone-500":!s.flow.is_supported_by_workers}])},null,8,["class"])]),_:1})):h("",!0),n(u,{text:s.flow.is_supported_by_workers?"":"No workers capable of running this flow",popper:{placement:"top"}},{default:r(()=>{var _;return[a("span",{class:N({"text-stone-500":!s.flow.is_supported_by_workers})},p((_=s.flow)==null?void 0:_.display_name),3)]}),_:1},8,["text"])],8,J),o(e).isFlowInstalled((x=s.flow)==null?void 0:x.name)?(l(),d(u,{key:0,text:"Mark flow as favorite",class:"ml-3",popper:{placement:"top"},"open-delay":500},{default:r(()=>[n(k,{icon:o(e).isFlowFavorite(s.flow.name)?"i-heroicons-star-16-solid":"i-heroicons-star",variant:"outline",color:"yellow",onClick:t[0]||(t[0]=_=>o(e).markFlowFavorite(s.flow))},null,8,["icon"])]),_:1})):h("",!0)])]}),footer:r(()=>{var f;return[n(k,{to:`/workflows/${(f=s.flow)==null?void 0:f.name}`,icon:"i-heroicons-arrow-up-right-16-solid",class:"flex justify-center dark:bg-slate-500 bg-slate-500 dark:hover:bg-slate-700 hover:bg-slate-700 dark:text-white"},{default:r(()=>t[9]||(t[9]=[w(" Open ")])),_:1},8,["to"])]}),default:r(()=>{var f,i,x,_,v,V,S,U,F;return[a("div",K,[a("p",{class:"text-md text-slate-400 truncate text-ellipsis mb-2",title:(f=s.flow)==null?void 0:f.description},p((i=s.flow)==null?void 0:i.description),9,Q),a("p",X,[a("span",Y,[n(m,{name:"i-heroicons-user-16-solid",class:"mr-1"}),t[1]||(t[1]=a("b",null,"Author:",-1)),t[2]||(t[2]=w("  "))]),a("a",{class:"hover:underline flex flex-row items-center",href:(x=s.flow)==null?void 0:x.homepage,rel:"noopener",target:"_blank"},p((_=s.flow)==null?void 0:_.author),9,Z)]),a("p",ee,[n(m,{name:"i-heroicons-document-text",class:"mr-1"}),(v=s.flow)!=null&&v.documentation?(l(),c("a",{key:0,class:"hover:underline",href:(V=s.flow)==null?void 0:V.documentation,rel:"noopener",target:"_blank"},"Documentation",8,te)):(l(),c("span",oe,"No documentation"))]),a("p",se,[n(m,{name:"i-heroicons-tag",class:"mr-1"}),t[3]||(t[3]=a("b",null,"Tags:",-1)),t[4]||(t[4]=w("  ")),((S=s.flow)==null?void 0:S.tags.length)>0?(l(!0),c($,{key:0},j((U=s.flow)==null?void 0:U.tags,g=>(l(),d(y,{key:g,label:g,color:"white",variant:"solid",class:"m-1"},null,8,["label"]))),128)):(l(),d(y,{key:1,label:"No tags",color:"white",variant:"solid",class:"m-1"}))]),a("p",le,[n(m,{name:"i-mdi-help-network-outline",class:"mr-1"}),t[7]||(t[7]=a("b",null,"Platforms:",-1)),t[8]||(t[8]=w("  ")),n(u,{text:"Linux"},{default:r(()=>[n(m,{name:"i-mdi-linux",class:"mr-1"})]),_:1}),n(u,{text:"Microsoft Windows"},{default:r(()=>[n(m,{name:"i-mdi-microsoft-windows",class:"mr-1"})]),_:1}),s.flow.is_macos_supported?(l(),d(u,{key:0,text:"macOS"},{default:r(()=>[n(m,{name:"i-mdi-apple",class:"mr-1"})]),_:1})):h("",!0),(F=s.flow)!=null&&F.required_memory_gb?(l(),d(u,{key:1,class:"flex flex-row items-center",text:"Required VRAM memory (GB)"},{default:r(()=>{var g;return[t[5]||(t[5]=w(" (")),n(m,{name:"i-mdi-memory",class:"mr-1"}),a("span",null,p((g=s.flow)==null?void 0:g.required_memory_gb)+" GB",1),t[6]||(t[6]=w(") "))]}),_:1})):h("",!0)])])]}),_:1})])}}}),ae={class:"w-full sticky z-[100] top-1 flex flex-col md:flex-row justify-center items-center my-1"},ie={key:0,class:"truncate"},re={key:1},me={key:0,class:"flex flex-wrap justify-center items-center mb-10"},fe={key:1,class:"text-center text-slate-500 my-5"},pe=z({__name:"index",setup(s){D({title:"Workflows - Visionatrix",meta:[{name:"description",content:"Workflows - Visionatrix"}]});const e=B();return G(()=>e.paginatedFlows,()=>{e.flows.length<=e.$state.pageSize?e.$state.page=1:e.$state.page>Math.ceil(e.flows.length/e.$state.pageSize)&&(e.$state.page=Math.ceil(e.flows.length/e.$state.pageSize))}),(C,t)=>{const m=M,u=q,k=T,y=L,b=ne,f=R;return l(),d(f,{class:"lg:h-dvh"},{default:r(()=>[o(e).$state.loading.flows_available||o(e).loading.flows_installed||o(e).$state.loading.tasks_history?(l(),d(m,{key:0})):(l(),c($,{key:1},[a("div",ae,[n(u,{modelValue:o(e).$state.flows_search_filter,"onUpdate:modelValue":t[0]||(t[0]=i=>o(e).$state.flows_search_filter=i),icon:"i-heroicons-magnifying-glass-20-solid",color:"white",class:"mb-1 md:mr-3 md:mb-0",label:"Filter by prompt",trailing:!0,placeholder:"Search flows"},null,8,["modelValue"]),o(e).flows.length>o(e).$state.pageSize?(l(),d(k,{key:0,modelValue:o(e).$state.page,"onUpdate:modelValue":t[1]||(t[1]=i=>o(e).$state.page=i),class:"mb-1 md:mr-3 md:mb-0","page-count":o(e).$state.pageSize,total:o(e).flows.length},null,8,["modelValue","page-count","total"])):h("",!0),n(y,{modelValue:o(e).$state.flows_tags_filter,"onUpdate:modelValue":t[2]||(t[2]=i=>o(e).$state.flows_tags_filter=i),options:o(e).flowsTags,multiple:"",searchable:""},{label:r(()=>[o(e).$state.flows_tags_filter.length>0?(l(),c("span",ie,p(o(e).$state.flows_tags_filter.join(",")),1)):(l(),c("span",re,"Select tags to filter"))]),_:1},8,["modelValue","options"])]),o(e).flows.length>0?(l(),c("div",me,[(l(!0),c($,null,j(o(e).paginatedFlows,i=>(l(),d(b,{key:i.name,flow:i},null,8,["flow"]))),128))])):(l(),c("p",fe,p(o(e).$state.flows_search_filter||o(e).$state.flows_tags_filter?"No flows found":"No flows available"),1))],64))]),_:1})}}});export{pe as default};
