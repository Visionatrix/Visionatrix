import{_ as Le,o as c,c as R,a as h,y as Ce,x as Me,n as Q,f as X,A as Ee,B as ze,C as He,a1 as xt,D as we,K as x,W as Ge,S as _e,q as ce,a2 as _t,s as T,G as Fe,E as $e,a3 as $t,a4 as nt,a5 as Ct,a6 as qe,a7 as It,a8 as lt,a9 as St,aa as it,ab as Mt,ac as Pt,p as n,ad as Qe,ae as zt,af as Rt,ag as Ae,g as re,J as Je,T as rt,ah as Pe,i as k,l as b,w as $,b as g,F as Z,r as me,d as V,m as te,O as Y,ai as We,t as W,U as Ue,h as ye,I as Ft,aj as ut,k as je,ak as Xe,al as Ut,am as jt,an as Bt,ao as dt,Q as De,ap as Ot,M as Be,aq as ct,ar as le,as as mt,j as Ye,at as Tt,au as Nt,P as Vt,L as Se,av as qt,v as At}from"./DBZEk4gD.js";import{b as Oe,a as Wt,_ as Dt}from"./CK51q2uK.js";import{u as ft,_ as Ke}from"./B23bJk9k.js";import{_ as Ze}from"./DjPXTgs2.js";import{_ as Ie,a as Lt}from"./jkIjonRW.js";import{_ as pt}from"./0WB7VeWV.js";import{a as et,_ as gt}from"./DEZzGQPm.js";import{_ as vt,a as Et}from"./BEoiJBs3.js";const Ht={wrapper:"relative",container:"relative w-full flex overflow-x-auto snap-x snap-mandatory scroll-smooth",item:"flex flex-none snap-center",arrows:{wrapper:"flex items-center justify-between"},indicators:{wrapper:"absolute flex items-center justify-center gap-3 bottom-4 inset-x-0",base:"rounded-full h-3 w-3",active:"bg-primary-500 dark:bg-primary-400",inactive:"bg-gray-100 dark:bg-gray-800"},default:{prevButton:{color:"black",class:"rtl:[&_span:first-child]:rotate-180 absolute start-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"black",class:"rtl:[&_span:last-child]:rotate-180 absolute end-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-right-20-solid"}}},Gt={wrapper:"relative w-full flex items-center",base:"w-full absolute appearance-none cursor-pointer disabled:cursor-not-allowed disabled:bg-opacity-50 focus:outline-none peer group",rounded:"rounded-lg",background:"bg-transparent",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",progress:{base:"absolute pointer-events-none peer-disabled:bg-opacity-50",rounded:"rounded-s-lg",background:"bg-{color}-500 dark:bg-{color}-400",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"}},thumb:{base:"[&::-webkit-slider-thumb]:relative [&::-moz-range-thumb]:relative [&::-webkit-slider-thumb]:z-[1] [&::-moz-range-thumb]:z-[1] [&::-webkit-slider-thumb]:appearance-none [&::-moz-range-thumb]:appearance-none [&::-webkit-slider-thumb]:rounded-full [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:border-0",color:"text-{color}-500 dark:text-{color}-400",background:"[&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:dark:bg-gray-900 [&::-moz-range-thumb]:bg-current",ring:"[&::-webkit-slider-thumb]:ring-2 [&::-webkit-slider-thumb]:ring-current",size:{"2xs":"[&::-webkit-slider-thumb]:h-1.5 [&::-moz-range-thumb]:h-1.5 [&::-webkit-slider-thumb]:w-1.5 [&::-moz-range-thumb]:w-1.5 [&::-webkit-slider-thumb]:mt-[-2.5px] [&::-moz-range-thumb]:mt-[-2.5px]",xs:"[&::-webkit-slider-thumb]:h-2 [&::-moz-range-thumb]:h-2 [&::-webkit-slider-thumb]:w-2 [&::-moz-range-thumb]:w-2 [&::-webkit-slider-thumb]:mt-[-3px] [&::-moz-range-thumb]:mt-[-3px]",sm:"[&::-webkit-slider-thumb]:h-3 [&::-moz-range-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-moz-range-thumb]:w-3 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",md:"[&::-webkit-slider-thumb]:h-4 [&::-moz-range-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-moz-range-thumb]:w-4 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",lg:"[&::-webkit-slider-thumb]:h-5 [&::-moz-range-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-moz-range-thumb]:w-5 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",xl:"[&::-webkit-slider-thumb]:h-6 [&::-moz-range-thumb]:h-6 [&::-webkit-slider-thumb]:w-6 [&::-moz-range-thumb]:w-6 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1","2xl":"[&::-webkit-slider-thumb]:h-7 [&::-moz-range-thumb]:h-7 [&::-webkit-slider-thumb]:w-7 [&::-moz-range-thumb]:w-7 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1"}},track:{base:"[&::-webkit-slider-runnable-track]:group-disabled:bg-opacity-50 [&::-moz-range-track]:group-disabled:bg-opacity-50",background:"[&::-webkit-slider-runnable-track]:bg-gray-200 [&::-moz-range-track]:bg-gray-200 [&::-webkit-slider-runnable-track]:dark:bg-gray-700 [&::-moz-range-track]:dark:bg-gray-700",rounded:"[&::-webkit-slider-runnable-track]:rounded-lg [&::-moz-range-track]:rounded-lg",size:{"2xs":"[&::-webkit-slider-runnable-track]:h-px [&::-moz-range-track]:h-px",xs:"[&::-webkit-slider-runnable-track]:h-0.5 [&::-moz-range-track]:h-0.5",sm:"[&::-webkit-slider-runnable-track]:h-1 [&::-moz-range-track]:h-1",md:"[&::-webkit-slider-runnable-track]:h-2 [&::-moz-range-track]:h-2",lg:"[&::-webkit-slider-runnable-track]:h-3 [&::-moz-range-track]:h-3",xl:"[&::-webkit-slider-runnable-track]:h-4 [&::-moz-range-track]:h-4","2xl":"[&::-webkit-slider-runnable-track]:h-5 [&::-moz-range-track]:h-5"}},size:{"2xs":"h-1.5",xs:"h-2",sm:"h-3",md:"h-4",lg:"h-5",xl:"h-6","2xl":"h-7"},default:{size:"md",color:"primary"}},he=He(we.ui.strategy,we.ui.textarea,xt),Qt=X({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(he.size).includes(e)}},color:{type:String,default:()=>he.default.color,validator(e){return[...we.ui.colors,...Object.keys(he.color)].includes(e)}},variant:{type:String,default:()=>he.default.variant,validator(e){return[...Object.keys(he.variant),...Object.values(he.color).flatMap(l=>Object.keys(l))].includes(e)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:l}){const{ui:t,attrs:s}=Ee("textarea",ze(e,"ui"),he,ze(e,"class")),{emitFormBlur:r,emitFormInput:o,inputId:u,color:p,size:f,name:w}=ft(e,he),v=x(Ge({},e.modelModifiers,{trim:!1,lazy:!1,number:!1,nullify:!1})),P=x(null),M=()=>{var m;e.autofocus&&((m=P.value)==null||m.focus())},S=()=>{if(e.autoresize){if(!P.value)return;P.value.rows=e.rows;const m=P.value.style.overflow;P.value.style.overflow="hidden";const a=window.getComputedStyle(P.value),i=Number.parseInt(a.paddingTop),_=Number.parseInt(a.paddingBottom),O=i+_,q=Number.parseInt(a.lineHeight),{scrollHeight:j}=P.value,z=(j-O)/q;z>e.rows&&(P.value.rows=e.maxrows?Math.min(z,e.maxrows):z),P.value.style.overflow=m}},C=m=>{v.value.trim&&(m=m.trim()),v.value.number&&(m=$t(m)),v.value.nullify&&(m||(m=null)),l("update:modelValue",m),o()},I=m=>{S(),v.value.lazy||C(m.target.value)},F=m=>{const a=m.target.value;l("change",a),v.value.lazy&&C(a),v.value.trim&&(m.target.value=a.trim())},y=m=>{l("blur",m),r()};_e(()=>{setTimeout(()=>{M()},e.autofocusDelay)}),ce(()=>e.modelValue,()=>{_t(S)}),_e(()=>{setTimeout(()=>{M(),S()},100)});const d=T(()=>{var a,i;const m=((i=(a=t.value.color)==null?void 0:a[p.value])==null?void 0:i[e.variant])||t.value.variant[e.variant];return Fe($e(t.value.base,t.value.form,t.value.rounded,t.value.placeholder,t.value.size[f.value],e.padded?t.value.padding[f.value]:"p-0",m==null?void 0:m.replaceAll("{color}",p.value),!e.resize&&"resize-none"),e.textareaClass)});return{ui:t,attrs:s,name:w,inputId:u,textarea:P,textareaClass:d,onInput:I,onChange:F,onBlur:y}}}),Jt=["id","value","name","rows","required","disabled","placeholder"];function Xt(e,l,t,s,r,o){return c(),R("div",{class:Q(e.ui.wrapper)},[h("textarea",Ce({id:e.inputId,ref:"textarea",value:e.modelValue,name:e.name,rows:e.rows,required:e.required,disabled:e.disabled,placeholder:e.placeholder,class:e.textareaClass},e.attrs,{onInput:l[0]||(l[0]=(...u)=>e.onInput&&e.onInput(...u)),onBlur:l[1]||(l[1]=(...u)=>e.onBlur&&e.onBlur(...u)),onChange:l[2]||(l[2]=(...u)=>e.onChange&&e.onChange(...u))}),null,16,Jt),Me(e.$slots,"default")],2)}const Yt=Le(Qt,[["render",Xt]]);async function Kt(e,l){return await Zt(l).catch(s=>(console.error("Failed to get image meta for "+l,s+""),{width:0,height:0,ratio:0}))}async function Zt(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((l,t)=>{const s=new Image;s.onload=()=>{const r={width:s.width,height:s.height,ratio:s.width/s.height};l(r)},s.onerror=r=>t(r),s.src=e})}function at(e){return l=>l?e[l]||l:e.missingValue}function en({formatter:e,keyMap:l,joinWith:t="/",valueMap:s}={}){e||(e=(o,u)=>`${o}=${u}`),l&&typeof l!="function"&&(l=at(l));const r=s||{};return Object.keys(r).forEach(o=>{typeof r[o]!="function"&&(r[o]=at(r[o]))}),(o={})=>Object.entries(o).filter(([p,f])=>typeof f<"u").map(([p,f])=>{const w=r[p];return typeof w=="function"&&(f=w(o[p])),p=typeof l=="function"?l(p):p,e(p,f)}).join(t)}function pe(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function tn(e=""){if(e===void 0||!e.length)return[];const l=new Set;for(const t of e.split(" ")){const s=Number.parseInt(t.replace("x",""));s&&l.add(s)}return Array.from(l)}function nn(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function ln(e){const l={};if(typeof e=="string")for(const t of e.split(/[\s,]+/).filter(s=>s)){const s=t.split(":");s.length!==2?l["1px"]=s[0].trim():l[s[0].trim()]=s[1].trim()}else Object.assign(l,e);return l}function an(e){const l={options:e},t=(r,o={})=>ht(l,r,o),s=(r,o={},u={})=>t(r,{...u,modifiers:Ge(o,u.modifiers||{})}).url;for(const r in e.presets)s[r]=(o,u,p)=>s(o,u,{...e.presets[r],...p});return s.options=e,s.getImage=t,s.getMeta=(r,o)=>on(l,r,o),s.getSizes=(r,o)=>un(l,r,o),l.$img=s,s}async function on(e,l,t){const s=ht(e,l,{...t});return typeof s.getMeta=="function"?await s.getMeta():await Kt(e,s.url)}function ht(e,l,t){var w,v;if(l&&typeof l!="string")throw new TypeError(`input must be a string (received ${typeof l}: ${JSON.stringify(l)})`);if(!l||l.startsWith("data:"))return{url:l};const{provider:s,defaults:r}=sn(e,t.provider||e.options.provider),o=rn(e,t.preset);if(l=nt(l)?l:Ct(l),!s.supportsAlias){for(const P in e.options.alias)if(l.startsWith(P)){const M=e.options.alias[P];M&&(l=qe(M,l.slice(P.length)))}}if(s.validateDomains&&nt(l)){const P=It(l).host;if(!e.options.domains.find(M=>M===P))return{url:l}}const u=Ge(t,o,r);u.modifiers={...u.modifiers};const p=u.modifiers.format;(w=u.modifiers)!=null&&w.width&&(u.modifiers.width=pe(u.modifiers.width)),(v=u.modifiers)!=null&&v.height&&(u.modifiers.height=pe(u.modifiers.height));const f=s.getImage(l,u,e);return f.format=f.format||p||"",f}function sn(e,l){const t=e.options.providers[l];if(!t)throw new Error("Unknown provider: "+l);return t}function rn(e,l){if(!l)return{};if(!e.options.presets[l])throw new Error("Unknown preset: "+l);return e.options.presets[l]}function un(e,l,t){var C,I,F,y,d;const s=pe((C=t.modifiers)==null?void 0:C.width),r=pe((I=t.modifiers)==null?void 0:I.height),o=ln(t.sizes),u=(F=t.densities)!=null&&F.trim()?tn(t.densities.trim()):e.options.densities;nn(u);const p=s&&r?r/s:0,f=[],w=[];if(Object.keys(o).length>=1){for(const m in o){const a=ot(m,String(o[m]),r,p,e);if(a!==void 0){f.push({size:a.size,screenMaxWidth:a.screenMaxWidth,media:`(max-width: ${a.screenMaxWidth}px)`});for(const i of u)w.push({width:a._cWidth*i,src:st(e,l,t,a,i)})}}dn(f)}else for(const m of u){const a=Object.keys(o)[0];let i=a?ot(a,String(o[a]),r,p,e):void 0;i===void 0&&(i={size:"",screenMaxWidth:0,_cWidth:(y=t.modifiers)==null?void 0:y.width,_cHeight:(d=t.modifiers)==null?void 0:d.height}),w.push({width:m,src:st(e,l,t,i,m)})}cn(w);const v=w[w.length-1],P=f.length?f.map(m=>`${m.media?m.media+" ":""}${m.size}`).join(", "):void 0,M=P?"w":"x",S=w.map(m=>`${m.src} ${m.width}${M}`).join(", ");return{sizes:P,srcset:S,src:v==null?void 0:v.src}}function ot(e,l,t,s,r){const o=r.options.screens&&r.options.screens[e]||Number.parseInt(e),u=l.endsWith("vw");if(!u&&/^\d+$/.test(l)&&(l=l+"px"),!u&&!l.endsWith("px"))return;let p=Number.parseInt(l);if(!o||!p)return;u&&(p=Math.round(p/100*o));const f=s?Math.round(p*s):t;return{size:l,screenMaxWidth:o,_cWidth:p,_cHeight:f}}function st(e,l,t,s,r){return e.$img(l,{...t.modifiers,width:s._cWidth?s._cWidth*r:void 0,height:s._cHeight?s._cHeight*r:void 0},t)}function dn(e){var t;e.sort((s,r)=>s.screenMaxWidth-r.screenMaxWidth);let l=null;for(let s=e.length-1;s>=0;s--){const r=e[s];r.media===l&&e.splice(s,1),l=r.media}for(let s=0;s<e.length;s++)e[s].media=((t=e[s+1])==null?void 0:t.media)||""}function cn(e){e.sort((t,s)=>t.width-s.width);let l=null;for(let t=e.length-1;t>=0;t--){const s=e[t];s.width===l&&e.splice(t,1),l=s.width}}const mn=en({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,l)=>lt(e)+"_"+lt(l)}),fn=(e,{modifiers:l={},baseURL:t}={},s)=>{l.width&&l.height&&(l.resize=`${l.width}x${l.height}`,delete l.width,delete l.height);const r=mn(l)||"_";return t||(t=qe(s.options.nuxt.baseURL,"/_ipx")),{url:qe(t,r,St(e))}},pn=!0,gn=!0,vn=Object.freeze(Object.defineProperty({__proto__:null,getImage:fn,supportsAlias:gn,validateDomains:pn},Symbol.toStringTag,{value:"Module"})),wt={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"]};wt.providers={ipxStatic:{provider:vn,defaults:{}}};const tt=()=>{const e=Mt(),l=it();return l.$img||l._img||(l._img=an({...wt,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};function hn(e){var l;(l=performance==null?void 0:performance.mark)==null||l.call(performance,"mark_feature_usage",{detail:{feature:e}})}const wn={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},yn=e=>{const l=T(()=>({provider:e.provider,preset:e.preset})),t=T(()=>({width:pe(e.width),height:pe(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),s=tt(),r=T(()=>({...e.modifiers,width:pe(e.width),height:pe(e.height),format:e.format,quality:e.quality||s.options.quality,background:e.background,fit:e.fit}));return{options:l,attrs:t,modifiers:r}},bn={...wn,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1}},kn=["src"],be=X({__name:"NuxtImg",props:bn,emits:["load","error"],setup(e,{emit:l}){const t=e,s=Pt(),r=l,o=!1,u=tt(),p=yn(t),f=x(!1),w=x(),v=T(()=>u.getSizes(t.src,{...p.options.value,sizes:t.sizes,densities:t.densities,modifiers:{...p.modifiers.value,width:pe(t.width),height:pe(t.height)}})),P=T(()=>{const y={...p.attrs.value,"data-nuxt-img":""};return(!t.placeholder||f.value)&&(y.sizes=v.value.sizes,y.srcset=v.value.srcset),y}),M=T(()=>{let y=t.placeholder;if(y===""&&(y=!0),!y||f.value)return!1;if(typeof y=="string")return y;const d=Array.isArray(y)?y:typeof y=="number"?[y,y]:[10,10];return u(t.src,{...p.modifiers.value,width:d[0],height:d[1],quality:d[2]||50,blur:d[3]||3},p.options.value)}),S=T(()=>t.sizes?v.value.src:u(t.src,p.modifiers.value,p.options.value)),C=T(()=>M.value?M.value:S.value),F=it().isHydrating;return _e(()=>{if(M.value){const y=new Image;S.value&&(y.src=S.value),t.sizes&&(y.sizes=v.value.sizes||"",y.srcset=v.value.srcset),y.onload=d=>{f.value=!0,r("load",d)},hn("nuxt-image");return}w.value&&(w.value.complete&&F&&(w.value.getAttribute("data-error")?r("error",new Event("error")):r("load",new Event("load"))),w.value.onload=y=>{r("load",y)},w.value.onerror=y=>{r("error",y)})}),(y,d)=>(c(),R("img",Ce({ref_key:"imgEl",ref:w,class:t.placeholder&&!f.value?t.placeholderClass:void 0},{...n(o)?{onerror:"this.setAttribute('data-error', 1)"}:{},...P.value,...n(s)},{src:C.value}),null,16,kn))}}),Re=He(we.ui.strategy,we.ui.range,Gt),xn=X({inheritAttrs:!1,props:{modelValue:{type:Number,default:0},id:{type:String,default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},size:{type:String,default:null,validator(e){return Object.keys(Re.size).includes(e)}},color:{type:String,default:()=>Re.default.color,validator(e){return we.ui.colors.includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:l}){const{ui:t,attrs:s}=Ee("range",ze(e,"ui"),Re),{emitFormChange:r,inputId:o,color:u,size:p,name:f}=ft(e,Re),w=T({get(){return e.modelValue},set(y){l("update:modelValue",y)}}),v=y=>{l("change",y.target.value),r()},P=T(()=>Fe($e(t.value.wrapper,t.value.size[p.value]),e.class)),M=T(()=>Fe($e(t.value.base,t.value.background,t.value.rounded,u.value&&t.value.ring.replaceAll("{color}",u.value),t.value.size[p.value]),e.inputClass)),S=T(()=>$e(t.value.thumb.base,u.value&&t.value.thumb.color.replaceAll("{color}",u.value),t.value.thumb.ring,t.value.thumb.background,t.value.thumb.size[p.value])),C=T(()=>$e(t.value.track.base,t.value.track.background,t.value.track.rounded,t.value.track.size[p.value])),I=T(()=>$e(t.value.progress.base,t.value.progress.rounded,u.value&&t.value.progress.background.replaceAll("{color}",u.value),t.value.progress.size[p.value])),F=T(()=>{const{modelValue:y,min:d,max:m}=e;return{width:`${(Math.max(d,Math.min(y,m))-d)/(m-d)*100}%`}});return{ui:t,attrs:s,name:f,inputId:o,value:w,wrapperClass:P,inputClass:M,thumbClass:S,trackClass:C,progressClass:I,progressStyle:F,onChange:v}}}),_n=["id","name","min","max","disabled","step"];function $n(e,l,t,s,r,o){return c(),R("div",{class:Q(e.wrapperClass)},[Qe(h("input",Ce({id:e.inputId,ref:"input","onUpdate:modelValue":l[0]||(l[0]=u=>e.value=u),name:e.name,min:e.min,max:e.max,disabled:e.disabled,step:e.step,type:"range",class:[e.inputClass,e.thumbClass,e.trackClass]},e.attrs,{onChange:l[1]||(l[1]=(...u)=>e.onChange&&e.onChange(...u))}),null,16,_n),[[zt,e.value,void 0,{number:!0}]]),h("span",{class:Q(e.progressClass),style:Rt(e.progressStyle)},null,6)],2)}const yt=Le(xn,[["render",$n]]),Cn={class:"image-mask flex flex-col w-full"},In={class:"canvas flex flex-col items-center justify-center mb-3 w-full"},Sn={class:"preview-over-original relative"},Mn={class:"actions flex items-center justify-center mb-3 mx-auto"},Pn={class:"options w-full max-w-[320px]"},zn=X({__name:"ImageInpaint",props:We({imageSrc:{type:String,required:!0}},{imageInpaintMask:{default:"",type:String},imageInpaintMaskModifiers:{},imageInpaintMaskData:{default:{},type:Object},imageInpaintMaskDataModifiers:{}}),emits:["update:imageInpaintMask","update:imageInpaintMaskData"],setup(e){const l=e,t=Ae(e,"imageInpaintMask"),s=Ae(e,"imageInpaintMaskData"),r=re(),o=x(null),u=x(null),p=x(null),f=x(null),w=x(30),v=x([]),P=x({width:r.$state.outputMaxSize,height:r.$state.outputMaxSize}),M=x(null),S=x({x:0,y:0}),C=x({x:0,y:0,radius:w.value,fill:"rgba(255, 255, 255, 0.5)",stroke:null,strokeWidth:0,visible:!1}),I=x(5),F=x(!1),y=x([]),d=x([]);function m(){if(!o.value||!p.value){console.error("Could not get stage, image layer, or mask layer");return}const B=o.value.getNode(),N=f.value?f.value.width:B.width(),U=f.value?f.value.height:B.height(),G=document.createElement("canvas");G.width=N,G.height=U;const J=G.getContext("2d");if(!J){console.error("Could not get 2d context for mask canvas");return}J.fillStyle="black",J.fillRect(0,0,N,U);const se=N/B.width(),ie=U/B.height();J.fillStyle="white",v.value.forEach(ve=>{J.beginPath(),J.arc(ve.x*se,ve.y*ie,ve.radius*Math.max(se,ie),0,Math.PI*2,!0),J.closePath(),J.fill()});const de=G.toDataURL("image/png",1);de?(z(),t.value=de,C.value.visible=!1,F.value=!1):console.error("Could not get data URI for masked image")}function a(B){const N=o.value.getNode();if(B.type.startsWith("touch")){const U=B.evt.touches[0]||B.evt.changedTouches[0];return{x:U.clientX-N.getContainer().offsetLeft,y:U.clientY-N.getContainer().offsetTop}}return N.getPointerPosition()}function i(B){B.type==="mousedown"&&B.evt.button!==0||(F.value=!0,S.value=a(B),j(),_(S.value))}function _(B){const N={x:B.x,y:B.y,radius:w.value,fill:"rgba(255, 255, 255, 1)"};v.value=v.value.filter(U=>!(O({x:U.x,y:U.y},B)+U.radius<=N.radius)),v.value.push(N)}function O(B,N){return Math.sqrt(Math.pow(N.x-B.x,2)+Math.pow(N.y-B.y,2))}function q(B){if(B.type.startsWith("touch")&&B.evt.preventDefault(),K(B),!F.value)return;const N=a(B);O(S.value,a(B))>=I.value&&(_(N),S.value=N)}function j(){y.value.push([...v.value]),d.value=[]}function z(){s.value={circles:[...v.value],brushRadius:w.value,undoStack:y.value,redoStack:d.value}}function A(){s.value!==null&&(v.value=s.value.circles||[],w.value=s.value.brushRadius||30,y.value=s.value.undoStack||[],d.value=s.value.redoStack||[])}function ue(){y.value.length!==0&&(d.value.push([...v.value]),v.value=y.value.pop()||[])}function L(){d.value.length!==0&&(y.value.push([...v.value]),v.value=d.value.pop()||[])}function fe(){F.value=!1}function ke(){t.value=""}function ae(){j(),v.value=[],t.value=""}const E=T(()=>y.value.length>0),ee=T(()=>d.value.length>0);function K(B){const N=a(B);C.value.x=N.x,C.value.y=N.y}function oe(){C.value.visible=!1,F.value=!1}function ge(){C.value.visible=!0,C.value.radius=w.value}function D(){const B=new Image;B.src=l.imageSrc,B.onload=()=>{f.value=B,ne(),xe()}}function ne(){if(!f.value)return;const B=window.innerWidth,N=window.innerHeight,U=f.value.width/f.value.height;let G,J;const se=Math.min(B*.9,1200),ie=Math.min(N*.8,r.outputMaxSize);U>se/ie?(G=se,J=G/U):(J=ie,G=J*U),P.value={width:Math.floor(G),height:Math.floor(J)},xe()}function xe(){const B=P.value.width,N=P.value.height,U=f.value.width,G=f.value.height,J=B/U,se=N/G,ie=Math.min(J,se);M.value={x:0,y:0,width:U*ie,height:G*ie}}return Je(()=>{D(),A()}),_e(()=>{if(o.value){const B=o.value.getNode();B.on("touchstart",i),B.on("touchmove",q),B.on("touchend",fe),B.on("touchcancel",oe)}}),rt(()=>{if(o.value){const B=o.value.getNode();B.off("touchstart"),B.off("touchmove"),B.off("touchend"),B.off("touchcancel")}z()}),(B,N)=>{const U=be,G=Pe("v-image"),J=Pe("v-layer"),se=Pe("v-circle"),ie=Pe("v-stage"),de=te,ve=yt,H=Ze;return c(),R("div",Cn,[h("div",In,[N[1]||(N[1]=h("p",{class:"text-sm my-2 text-slate-500"},"Select the target area for image inpaint",-1)),h("div",Sn,[e.imageSrc&&e.imageSrc!==""&&t.value!==""?(c(),k(U,{key:0,src:e.imageSrc,fit:"inside",width:n(P).width,height:n(P).height,draggable:"false",class:Q({absolute:t.value!==""})},null,8,["src","width","height","class"])):b("",!0),t.value?(c(),k(U,{key:1,src:t.value,fit:"inside",width:n(P).width,height:n(P).height,draggable:"false",class:"opacity-50"},null,8,["src","width","height"])):b("",!0)]),t.value===""?(c(),k(ie,{key:0,ref_key:"stageRef",ref:o,config:n(P),onMousedown:i,onMousemove:q,onMouseup:fe,onMouseleave:oe,onMouseenter:ge},{default:$(()=>[g(J,{ref_key:"imageLayerRef",ref:u},{default:$(()=>[g(G,{image:n(f),config:n(P)},null,8,["image","config"])]),_:1},512),g(J,{ref_key:"maskLayerRef",ref:p},{default:$(()=>[(c(!0),R(Z,null,me(n(v),(Ne,kt)=>(c(),k(se,{key:kt,config:Ne},null,8,["config"]))),128)),n(C).visible?(c(),k(se,{key:0,config:n(C)},null,8,["config"])):b("",!0)]),_:1},512)]),_:1},8,["config"])):b("",!0)]),h("div",Mn,[g(de,{class:"mr-2",size:"xs",icon:"i-heroicons-clipboard-document-check-16-solid",variant:"soft",disabled:n(v).length===0||t.value!=="",onClick:m},{default:$(()=>N[2]||(N[2]=[V(" Apply ")])),_:1},8,["disabled"]),g(de,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-uturn-left-16-solid",variant:"soft",color:"cyan",disabled:!n(E)||t.value!=="",onClick:ue},null,8,["disabled"]),g(de,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-uturn-right-16-solid",variant:"soft",color:"cyan",disabled:!n(ee)||t.value!=="",onClick:L},null,8,["disabled"]),g(de,{class:"mr-2",size:"xs",icon:"i-heroicons-arrow-turn-up-left-20-solid",variant:"soft",disabled:n(v).length===0&&t.value==="",color:"red",onClick:ae},{default:$(()=>N[3]||(N[3]=[V(" Reset ")])),_:1},8,["disabled"]),g(de,{size:"xs",icon:"i-heroicons-pencil-solid",variant:"soft",disabled:t.value==="",color:"orange",onClick:ke},{default:$(()=>N[4]||(N[4]=[V(" Edit ")])),_:1},8,["disabled"])]),h("div",Pn,[g(H,{class:"mb-3 text-sm",hint:`value: ${n(w)}`,label:"Brush radius"},{default:$(()=>[g(ve,{modelValue:n(w),"onUpdate:modelValue":N[0]||(N[0]=Ne=>Y(w)?w.value=Ne:null),min:1,max:100,size:"sm",class:"my-2",disabled:t.value!==""},null,8,["modelValue","disabled"])]),_:1},8,["hint"])])])}}}),Rn="0.05";function Fn(e,l){const t=parseFloat(e);if(isNaN(t))return e;const s=t+l;return s<0?"0":String(Number(s.toFixed(10)))}function Un(e,l){let t=l,s=l,r=0,o=0;for(;t>=0&&(t--,!(e[t]==="("&&r===o));)e[t]==="("&&r++,e[t]===")"&&o++;if(t<0)return!1;for(r=0,o=0;s<e.length&&!(e[s]===")"&&r===o);)e[s]==="("&&r++,e[s]===")"&&o++,s++;return s===e.length?!1:{start:t+1,end:s}}function jn(e){const l=/^\((.*)\)$/,t=e.match(l),s=/:([+-]?(\d*\.)?\d+([eE][+-]?\d+)?)/,r=e.match(s);return t&&!r?`(${t[1]}:1.0)`:e}function Bn(e){const l=e.composedPath()[0],t=parseFloat(Rn);if(l.tagName!=="TEXTAREA"||!(e.key==="ArrowUp"||e.key==="ArrowDown")||!e.ctrlKey&&!e.metaKey)return;e.preventDefault();let s=l.selectionStart,r=l.selectionEnd,o=l.value.substring(s,r);if(!o){const f=Un(l.value,s);if(f)s=f.start,r=f.end,o=l.value.substring(s,r);else{const w=" .,\\/!?%^*;:{}=-_`~()\r\n	";for(;!w.includes(l.value[s-1])&&s>0;)s--;for(;!w.includes(l.value[r])&&r<l.value.length;)r++;if(o=l.value.substring(s,r),!o)return}}o[o.length-1]===" "&&(o=o.substring(0,o.length-1),r-=1),l.value[s-1]==="("&&l.value[r]===")"&&(s-=1,r+=1,o=l.value.substring(s,r)),(o[0]!=="("||o[o.length-1]!==")")&&(o=`(${o})`),o=jn(o);const u=e.key==="ArrowUp"?t:-t,p=o.replace(/\((.*):(\d+(?:\.\d+)?)\)/,(f,w,v)=>(v=Fn(v,u),Number(v)==1?w:`(${w}:${v})`));return l.setRangeText(p,s,r,"select"),l.value}const On={key:0,class:"text-red-300"},Tn={key:0,class:"flex items-center"},Nn={key:2,class:"flex flex-row flex-grow items-center justify-between"},Vn={key:3,class:"flex flex-row flex-grow items-center"},qn={class:"sm:inline"},An={class:"preview-over-original relative"},Wn={key:1,class:"text-red-300 text-sm"},Dn=X({__name:"InputParam",props:{inputParam:{type:Object,required:!0},index:{type:Number,required:!0},inputParamsMap:{type:Array,required:!0},advanced:{type:Boolean,default:!1}},setup(e){const l=e,t=x(!1),s=x(null),r=x(""),o=x({width:0,height:0}),u=x(""),p=x({}),f=x(null),w=l.inputParamsMap[l.index][l.inputParam.name].source_input_name,v=l.inputParamsMap.findIndex(a=>{if(Object.keys(a)[0]===l.inputParamsMap[l.index][l.inputParam.name].source_input_name)return!0});function P(){try{const a=l.inputParamsMap.find(i=>{const _=Object.keys(i)[0];if(_===w)return i[_]});F(a[w].value)}catch{o.value.width=0,o.value.height=0}}_e(()=>{l.inputParam.type==="range_scale"&&P(),l.inputParam.type==="image-mask"&&ce(u,a=>{const i=new File([u.value],`image-mask-${l.inputParam.name}.png`,{type:"image/png"});l.inputParamsMap[l.index][l.inputParam.name].value=i,l.inputParamsMap[l.index][l.inputParam.name].mask_applied=a!==""})}),l.inputParam.type==="range_scale"&&ce(l.inputParamsMap,()=>{P()});function M(a){return a?URL.createObjectURL(a):""}function S(){URL.revokeObjectURL(r.value),r.value="",s.value&&(s.value.$refs.input.value=""),l.inputParamsMap[l.index][l.inputParam.name].value=null,l.inputParamsMap[l.index][l.inputParam.name].image_preview_url=""}function C(){URL.revokeObjectURL(u.value),u.value="",p.value={},l.inputParamsMap[l.index][l.inputParam.name].value=null,l.inputParamsMap[l.index][l.inputParam.name].mask_applied=!1}const I=T(()=>l.inputParam.type!=="bool"?l.inputParam.display_name:"");function F(a){if(!(a instanceof File)){o.value.width=0,o.value.height=0;return}const i=URL.createObjectURL(a),_=new Image;_.onload=function(){o.value.width=_.naturalWidth,o.value.height=_.naturalHeight,URL.revokeObjectURL(_.src)},_.src=i}const y=T(()=>{if(l.inputParam.type==="range_scale"){const a=l.inputParamsMap[l.index][l.inputParam.name].value;return`value: ${a}x (${o.value.width}x${o.value.height} -> ${(o.value.width*a).toFixed(0)}x${(o.value.height*a).toFixed(0)})`}return["range","range_scale"].includes(l.inputParam.type)?`value: ${l.inputParamsMap[l.index][l.inputParam.name].value}`:""}),d=x(null);function m(a){const i=Bn(a);i&&(l.inputParamsMap[l.index][l.inputParam.name].value=i)}return _e(()=>{l.inputParam.type==="text"&&d.value&&d.value.$refs.textarea.addEventListener("keydown",m),l.inputParam.type==="image-mask"&&(f.value=l.inputParamsMap[v][w],ce(l.inputParamsMap[v][w],a=>{u.value="",p.value={},f.value=a}))}),rt(()=>{URL.revokeObjectURL(r.value),URL.revokeObjectURL(u.value),l.inputParam.type==="text"&&d.value&&d.value.$refs.textarea.removeEventListener("keydown",m)}),(a,i)=>{var ae;const _=Yt,O=Ke,q=te,j=be,z=zn,A=Ie,ue=pt,L=et,fe=yt,ke=Ze;return(((ae=e.inputParam)==null?void 0:ae.advanced)||!1)===e.advanced?(c(),k(ke,{key:0,label:n(I),class:"mb-3",help:n(y)},{hint:$(()=>[e.inputParam.optional?b("",!0):(c(),R("span",On,"required"))]),default:$(()=>{var E,ee,K,oe,ge;return[e.inputParam.type==="text"?(c(),k(_,{key:0,ref_key:"textareaInput",ref:d,size:"md",placeholder:e.inputParam.display_name,required:!e.inputParam.optional,resize:!0,label:e.inputParam.display_name,value:e.inputParamsMap[e.index][e.inputParam.name].value,autoresize:"",variant:"outline",onInput:i[0]||(i[0]=D=>{const ne=D.target;e.inputParamsMap[e.index][e.inputParam.name].value=ne.value})},null,8,["placeholder","required","label","value"])):b("",!0),e.inputParam.type==="number"?(c(),R(Z,{key:1},[e.inputParam.name==="seed"?(c(),R("div",Tn,[e.inputParam.type==="number"?(c(),k(O,{key:0,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":i[1]||(i[1]=D=>e.inputParamsMap[e.index][e.inputParam.name].value=D),type:"number",label:e.inputParam.display_name,required:!e.inputParam.optional,max:e.inputParam.max||100,min:e.inputParam.min||0,variant:"outline"},null,8,["modelValue","label","required","max","min"])):b("",!0),g(q,{icon:"i-heroicons-arrow-path",color:"violet",variant:"outline",size:"xs",class:"ml-2",onClick:i[2]||(i[2]=()=>{e.inputParamsMap[e.index][e.inputParam.name].value=Math.floor(Math.random()*1e7)})})])):(c(),k(O,{key:1,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":i[3]||(i[3]=D=>e.inputParamsMap[e.index][e.inputParam.name].value=D),type:"number",label:e.inputParam.display_name,required:!e.inputParam.optional,max:e.inputParam.max||100,min:e.inputParam.min||0,variant:"outline"},null,8,["modelValue","label","required","max","min"]))],64)):b("",!0),e.inputParam.type==="image"?(c(),R("div",Nn,[g(O,{ref_key:"imageInput",ref:s,type:"file",accept:"image/*",class:"w-full",variant:"outline",color:"gray",label:e.inputParam.display_name,onChange:i[4]||(i[4]=D=>{console.debug("files",D);const ne=D==null?void 0:D[0];e.inputParamsMap[e.index][e.inputParam.name].value=ne,r.value=M(ne),e.inputParamsMap[e.index][e.inputParam.name].image_preview_url=n(r),console.debug("inputParamsMap",e.inputParamsMap)})},null,8,["label"]),n(r)!==""?(c(),k(j,{key:0,src:n(u)?n(u):n(r),class:"h-10 rounded-lg cursor-pointer ml-2",onClick:i[5]||(i[5]=()=>{t.value=!0})},null,8,["src"])):b("",!0),n(r)!==""?(c(),k(q,{key:1,icon:"i-heroicons-x-mark",variant:"outline",class:"ml-2",onClick:S})):b("",!0)])):b("",!0),e.inputParam.type==="image-mask"?(c(),R("div",Vn,[n(f)?(c(),k(q,{key:0,icon:"i-heroicons-paint-brush-16-solid",class:"mr-2",color:"violet",variant:"outline",size:"xs",disabled:!((E=n(f))!=null&&E.value),onClick:i[6]||(i[6]=()=>{t.value=!0})},{default:$(()=>[h("span",qn,W(n(u)!==""?"Edit mask":"Draw mask"),1)]),_:1},8,["disabled"])):b("",!0),h("div",An,[n(f)&&((ee=n(f))!=null&&ee.value)?(c(),k(j,{key:0,src:(K=n(f))==null?void 0:K.image_preview_url,class:Q(["h-10 rounded-lg cursor-pointer",{absolute:n(u)!==""}]),onClick:i[7]||(i[7]=()=>{t.value=!0})},null,8,["src","class"])):b("",!0),n(u)?(c(),k(j,{key:1,src:n(u),class:"h-10 rounded-lg cursor-pointer opacity-50",onClick:i[8]||(i[8]=()=>{t.value=!0})},null,8,["src"])):b("",!0)]),!n(f)||n(f)&&!((oe=n(f))!=null&&oe.value)?(c(),R("span",Wn," Select source image ")):b("",!0),n(u)?(c(),k(q,{key:2,icon:"i-heroicons-x-mark",variant:"outline",color:"violet",class:"ml-2",onClick:C})):b("",!0)])):b("",!0),e.inputParam.type==="image"||e.inputParam.type==="image-mask"?(c(),k(A,{key:4,modelValue:n(t),"onUpdate:modelValue":i[13]||(i[13]=D=>Y(t)?t.value=D:null),class:"z-[90] overflow-y-auto",transition:!1,fullscreen:""},{default:$(()=>{var D;return[g(q,{class:"absolute top-4 right-4 z-[100]",icon:"i-heroicons-x-mark",variant:"ghost",onClick:i[9]||(i[9]=()=>t.value=!1)}),e.inputParam.type==="image"?(c(),R("div",{key:0,class:"flex items-center justify-center w-full h-full p-4",onClick:i[10]||(i[10]=Ue(()=>t.value=!1,["left"]))},[g(j,{class:"lg:h-full",fit:"inside",src:n(r)},null,8,["src"])])):(c(),k(z,{key:1,ref:"imageInpaint","image-inpaint-mask":n(u),"onUpdate:imageInpaintMask":i[11]||(i[11]=ne=>Y(u)?u.value=ne:null),"image-inpaint-mask-data":n(p),"onUpdate:imageInpaintMaskData":i[12]||(i[12]=ne=>Y(p)?p.value=ne:null),class:"flex items-center justify-center w-full h-full p-4","image-src":(D=n(f))==null?void 0:D.image_preview_url},null,8,["image-inpaint-mask","image-inpaint-mask-data","image-src"]))]}),_:1},8,["modelValue"])):b("",!0),e.inputParam.type==="list"?(c(),k(ue,{key:5,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":i[14]||(i[14]=D=>e.inputParamsMap[e.index][e.inputParam.name].value=D),placeholder:e.inputParam.display_name,options:Object.keys(e.inputParam.options)},null,8,["modelValue","placeholder","options"])):b("",!0),e.inputParam.type==="bool"?(c(),k(L,{key:6,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":i[15]||(i[15]=D=>e.inputParamsMap[e.index][e.inputParam.name].value=D),label:(ge=e.inputParam)==null?void 0:ge.display_name},null,8,["modelValue","label"])):b("",!0),["range","range_scale"].includes(e.inputParam.type)?(c(),k(fe,{key:7,modelValue:e.inputParamsMap[e.index][e.inputParam.name].value,"onUpdate:modelValue":i[16]||(i[16]=D=>e.inputParamsMap[e.index][e.inputParam.name].value=D),label:e.inputParam.display_name,size:"sm",min:e.inputParam.min,max:e.inputParam.max,step:e.inputParam.step},null,8,["modelValue","label","min","max","step"])):b("",!0)]}),_:1},8,["label","help"])):b("",!0)}}}),Ln={key:0,class:"heading"},En={key:1},Hn=X({__name:"InputParams",props:{inputParamsMap:{type:Array,required:!0},additionalInputParamsMap:{type:Array,required:!1,default:[]},advanced:{type:Boolean,default:!1}},setup(e){const l=e,t=re(),s=x(!l.advanced);return(r,o)=>{const u=ye,p=Dn;return c(),R(Z,null,[e.advanced?(c(),R("div",Ln,[h("h4",{class:"text-md font-bold cursor-pointer select-none flex items-center mb-3",onClick:o[0]||(o[0]=()=>{s.value=!n(s)})},[g(u,{name:n(s)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"mr-2"},null,8,["name"]),o[1]||(o[1]=V(" Advanced options "))])])):b("",!0),n(s)?(c(),R("div",En,[(c(!0),R(Z,null,me(n(t).currentFlow.input_params,(f,w)=>(c(),k(p,{key:w,"input-params-map":e.inputParamsMap,index:w,"input-param":f,advanced:e.advanced},null,8,["input-params-map","index","input-param","advanced"]))),128)),(c(!0),R(Z,null,me(e.additionalInputParamsMap,(f,w)=>(c(),k(p,{key:Object.keys(f)[0],"input-params-map":e.additionalInputParamsMap,index:w,"input-param":f[Object.keys(f)[0]],advanced:e.advanced},null,8,["input-params-map","index","input-param","advanced"]))),128))])):b("",!0)],64)}}}),Gn={key:0,id:"prompt",class:"w-full my-10 lg:my-0 p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg"},Qn={class:"action flex items-center"},Jn=X({__name:"Prompt",setup(e,{expose:l}){var F,y,d,m;const t=re();let s=localStorage.getItem(`input_params_map_${(F=t.currentFlow)==null?void 0:F.name}`);if(s){const a=JSON.parse(s);"flow_version"in a&&a.flow_version.split(".")[0]===((y=t.currentFlow)==null?void 0:y.version.split(".")[0])?s=a:(s=null,localStorage.removeItem(`input_params_map_${(d=t.currentFlow)==null?void 0:d.name}`))}const r=x(((m=t.currentFlow)==null?void 0:m.input_params.map(a=>{var i;if(a.type==="text")return{[a.name]:{value:s!==null&&s[a.name]?s[a.name]:a.default||"",type:a.type,optional:a.optional,advanced:a.advanced||!1,default:a.default||"",translatable:a.translatable||!1}};if(a.type==="number")return{[a.name]:{value:s!==null&&s[a.name]?s[a.name]:a.default||0,type:a.type,optional:a.optional,advanced:a.advanced||!1,default:a.default||0}};if(a.type==="image")return{[a.name]:{value:null,type:a.type,optional:a.optional,advanced:a.advanced||!1}};if(a.type==="image-mask")return{[a.name]:{value:null,type:a.type,optional:a.optional,advanced:a.advanced||!1,source_input_name:a.source_input_name||null}};if(a.type==="list")return{[a.name]:{value:s!==null&&s[a.name]?s[a.name]:a.default||Object.keys(a.options)[0]||"",type:a.type,optional:a.optional,options:a.options,advanced:a.advanced||!1,default:Object.keys(a.options)[0]||""}};if(a.type==="bool")return{[a.name]:{value:s!==null&&s[a.name]?s[a.name]:a.default||!1,type:a.type,optional:a.optional,advanced:a.advanced||!1,default:a.default||!1}};if(["range","range_scale"].includes(a.type)){const _={value:s!==null&&s[a.name]?s[a.name]:a.default||0,type:a.type,optional:a.optional,advanced:a.advanced||!1,min:a.min||0,max:a.max||100,step:a.step||1,default:a.default||0};if(a.type==="range_scale"&&(_.source_input_name=a.source_input_name||null,_.source_input_name===null||_.source_input_name==="")){const O=(i=t.currentFlow)==null?void 0:i.input_params.find(q=>q.type==="image"&&!q.optional);O&&(_.source_input_name=O.name)}return{[a.name]:_}}}))||[]),o=x([]);t.currentFlow.is_seed_supported&&o.value.push({seed:{name:"seed",display_name:"Random seed",value:Math.floor(Math.random()*1e7),type:"number",optional:!0,advanced:!0,min:0,max:1e7}});const u=Ft(),p=x(t.currentFlow.is_translations_supported&&u.settingsMap.translations_provider.value.trim()!==""),f=x(p.value);Je(()=>{const a=localStorage.getItem("translatePrompt");a&&(f.value=JSON.parse(a))}),ce(f,a=>{localStorage.setItem("translatePrompt",JSON.stringify(a))});function w(a){console.debug("Copy prompt inputs",a),Object.keys(a).forEach(_=>{const O=r.value.findIndex(q=>Object.keys(q)[0]===_);O!==-1&&(r.value[O][_].value=a[_].value)});const i=document.getElementById("prompt");i&&i.scrollIntoView({behavior:"smooth"})}l({copyPromptInputs:w}),r.value.forEach(a=>{const i=Object.keys(a)[0];["image","image-mask"].includes(a[i].type)||ce(()=>a[i].value,()=>{var O,q;const _={};r.value.forEach(j=>{const z=Object.keys(j)[0];_[z]=j[z].value}),localStorage.setItem(`input_params_map_${(O=t.currentFlow)==null?void 0:O.name}`,JSON.stringify({..._,flow_version:(q=t.currentFlow)==null?void 0:q.version}))})});const v=T(()=>r.value.filter(a=>{const i=Object.keys(a)[0];return!["image","image-mask"].includes(a[i].type)}).some(a=>{const i=Object.keys(a)[0];return a[i].value!==a[i].default}));function P(){r.value.forEach(a=>{const i=Object.keys(a)[0];a[i].type==="text"?a[i].value=a[i].default||"":a[i].type==="number"?a[i].value=a[i].default||a[i].min||0:a[i].type==="list"?a[i].value=Object.keys(a[i].options)[0]||"":a[i].type==="bool"?a[i].value=a[i].default||!1:["range","range_scale"].includes(a[i].type)&&(a[i].value=a[i].default||a[i].min||0)})}const M=x(!1),S=x(1),C=x(!1),I=T(()=>r.value.every(a=>{var O;const i=Object.keys(a)[0];if(a[i].optional)return!0;const _=a[i].value;if(a[i].type==="text")return _!=="";if(a[i].type==="number")return _>=a[i].min&&_<=a[i].max;if(a[i].type==="list")return _!==""&&Object.keys(a[i].options).includes(_);if(a[i].type==="bool")return!0;if(a[i].type==="range")return _>=a[i].min&&_<=a[i].max;if(a[i].type==="range_scale")return _>=a[i].min&&_<=a[i].max;if(a[i].type==="image")return _ instanceof File&&_.size>0;if(a[i].type==="image-mask")return _ instanceof File&&_.size>0&&(((O=a[i])==null?void 0:O.mask_applied)||!1)}));return(a,i)=>{const _=ye,O=Hn,q=Ke,j=Ze,z=et,A=te,ue=je;return n(t).currentFlow?(c(),R("div",Gn,[h("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center mb-3",onClick:i[0]||(i[0]=()=>{C.value=!n(C)})},[g(_,{name:n(C)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),i[8]||(i[8]=V(" Prompt "))]),Qe(h("div",null,[g(O,{"input-params-map":n(r),"onUpdate:inputParamsMap":i[1]||(i[1]=L=>Y(r)?r.value=L:null),"additional-input-params-map":n(o),"onUpdate:additionalInputParamsMap":i[2]||(i[2]=L=>Y(o)?o.value=L:null),advanced:!1},null,8,["input-params-map","additional-input-params-map"]),n(o).length>0?(c(),k(O,{key:0,"input-params-map":n(r),"onUpdate:inputParamsMap":i[3]||(i[3]=L=>Y(r)?r.value=L:null),"additional-input-params-map":n(o),"onUpdate:additionalInputParamsMap":i[4]||(i[4]=L=>Y(o)?o.value=L:null),advanced:!0},null,8,["input-params-map","additional-input-params-map"])):b("",!0),n(t).currentFlow.is_count_supported?(c(),k(j,{key:1,label:"Number of results"},{default:$(()=>[g(q,{modelValue:n(S),"onUpdate:modelValue":i[5]||(i[5]=L=>Y(S)?S.value=L:null),type:"number",min:"1",max:"50",label:"Batch size",class:"mb-3 max-w-fit flex justify-end"},null,8,["modelValue"])]),_:1})):b("",!0),n(p)?(c(),k(j,{key:2,class:"my-3 flex justify-end"},{default:$(()=>[g(z,{modelValue:n(f),"onUpdate:modelValue":i[6]||(i[6]=L=>Y(f)?f.value=L:null),label:"Translate prompt"},null,8,["modelValue"])]),_:1})):b("",!0),h("div",{class:Q(["flex",{"justify-between":n(v),"justify-end":!n(v)}])},[n(v)?(c(),k(ue,{key:0,text:"Reset input params values to defaults"},{default:$(()=>[g(A,{icon:"i-heroicons-arrow-path-rounded-square",variant:"ghost",color:"amber",onClick:P},{default:$(()=>i[9]||(i[9]=[V(" Reset params ")])),_:1})]),_:1})):b("",!0),h("div",Qn,[g(A,{icon:"i-heroicons-sparkles-16-solid",variant:"outline",loading:n(M),disabled:!n(I),onClick:i[7]||(i[7]=()=>{M.value=!0,n(t).runFlow(n(t).currentFlow,[...n(r),...n(o)],n(S),n(p)&&n(f)).finally(()=>{M.value=!1;const L=n(o).find(fe=>Object.keys(fe)[0]==="seed");L.seed.value=Number(L.seed.value)+n(S)+1})})},{default:$(()=>i[10]||(i[10]=[V(" Run prompt ")])),_:1},8,["loading","disabled"])])],2)],512),[[ut,!n(C)]])])):b("",!0)}}}),Xn=e=>{const l=x(0);function t(o){e.value.style.scrollSnapType="none",e.value.style.scrollBehavior="auto",l.value=o.pageX,window.addEventListener("mousemove",r),window.addEventListener("mouseup",s)}function s(){e.value.style.removeProperty("scroll-behavior"),e.value.style.removeProperty("scroll-snap-type"),e.value.style.removeProperty("pointer-events"),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",s)}function r(o){o.preventDefault(),e.value.style.pointerEvents="none";const u=o.pageX-l.value;l.value=o.pageX,e.value.scrollBy(-u,0)}_e(()=>{e.value&&e.value.addEventListener("mousedown",t)}),Xe(()=>{e.value&&e.value.removeEventListener("mousedown",t)})},Ve=He(we.ui.strategy,we.ui.carousel,Ht),Yn=X({components:{UButton:te},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},arrows:{type:Boolean,default:!1},indicators:{type:Boolean,default:!1},dir:{type:String,default:"ltr"},prevButton:{type:Object,default:()=>Ve.default.prevButton},nextButton:{type:Object,default:()=>Ve.default.nextButton},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:void 0}},setup(e,{expose:l}){const{ui:t,attrs:s}=Ee("carousel",ze(e,"ui"),Ve,ze(e,"class")),r=x(),o=x(0),{x:u}=Ut(r,{behavior:"smooth"}),{width:p}=jt(r);Xn(r),Bt(r,F=>{var d,m;const[y]=F;o.value=((m=(d=y==null?void 0:y.target)==null?void 0:d.firstElementChild)==null?void 0:m.clientWidth)||0});const f=T(()=>e.dir==="rtl"),w=T(()=>o.value?f.value?Math.round(-u.value/o.value)+1:Math.round(u.value/o.value)+1:0),v=T(()=>{if(!o.value)return 0;const F=Math.round(p.value/o.value);return e.items.length<=F?0:e.items.length-F+1}),P=T(()=>w.value<=1),M=T(()=>w.value===v.value);function S(){u.value+=f.value?-o.value:o.value}function C(){u.value-=f.value?-o.value:o.value}function I(F){u.value=(F-1)*o.value*(f.value?-1:1)}return l({pages:v,page:w,prev:C,next:S,select:I}),{ui:t,attrs:s,isFirst:P,isLast:M,carouselRef:r,pages:v,currentPage:w,onClickNext:S,onClickPrev:C,onClick:I,twMerge:Fe}}}),Kn=["dir"],Zn=["role"],el=["aria-selected","aria-label","onClick"];function tl(e,l,t,s,r,o){const u=te;return c(),R("div",Ce({class:e.ui.wrapper},e.attrs,{dir:e.dir}),[h("div",{ref:"carouselRef",class:Q([e.ui.container,"no-scrollbar"])},[(c(!0),R(Z,null,me(e.items,(p,f)=>(c(),R("div",{key:f,class:Q(e.ui.item),role:e.indicators?"tabpanel":null},[Me(e.$slots,"default",{item:p,index:f},void 0,!0)],10,Zn))),128))],2),e.arrows?(c(),R("div",{key:0,class:Q(e.ui.arrows.wrapper)},[Me(e.$slots,"prev",{onClick:e.onClickPrev,disabled:e.isFirst},()=>{var p;return[e.prevButton?(c(),k(u,Ce({key:0,disabled:e.isFirst},{...e.ui.default.prevButton,...e.prevButton},{class:e.twMerge(e.ui.default.prevButton.class,(p=e.prevButton)==null?void 0:p.class),"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["disabled","class","onClick"])):b("",!0)]},!0),Me(e.$slots,"next",{onClick:e.onClickNext,disabled:e.isLast},()=>{var p;return[e.nextButton?(c(),k(u,Ce({key:0,disabled:e.isLast},{...e.ui.default.nextButton,...e.nextButton},{class:e.twMerge(e.ui.default.nextButton.class,(p=e.nextButton)==null?void 0:p.class),"aria-label":"Next",onClick:e.onClickNext}),null,16,["disabled","class","onClick"])):b("",!0)]},!0)],2)):b("",!0),e.indicators?(c(),R("div",{key:1,role:"tablist",class:Q(e.ui.indicators.wrapper)},[(c(!0),R(Z,null,me(e.pages,p=>Me(e.$slots,"indicator",{key:p,onClick:e.onClick,active:p===e.currentPage,page:p},()=>[h("button",{type:"button",role:"tab","aria-selected":p===e.currentPage,class:Q([e.ui.indicators.base,p===e.currentPage?e.ui.indicators.active:e.ui.indicators.inactive]),"aria-label":`set slide ${p}`,onClick:f=>e.onClick(p)},null,10,el)],!0)),128))],2)):b("",!0)],16,Kn)}const Te=Le(Yn,[["render",tl],["__scopeId","data-v-5fdb8633"]]),nl={class:"flex flex-col basis-full"},ll=X({__name:"InputFiles",props:{running:{type:Object,required:!0}},setup(e){const l=tt(),t=function(p,f){return`${dt()}/tasks/inputs?task_id=${p}&input_index=${f}`},s=x(!1),r=x(""),o=x(0),u=x(!0);return(p,f)=>{var C,I,F,y,d;const w=ye,v=be,P=Te,M=te,S=Ie;return e.running&&e.running.input_files&&((C=Object.keys(e.running.input_files))==null?void 0:C.length)>0?(c(),R("div",{key:0,class:Q(["ml-2 mt-2 mb-5",{"mb-10":((I=Object.keys(e.running.input_files))==null?void 0:I.length)>1&&!n(u)}])},[h("h4",{class:"mb-3 font-bold cursor-pointer select-none flex items-center text-sm",onClick:f[0]||(f[0]=()=>u.value=!n(u))},[g(w,{name:n(u)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),h("span",null," Input files ("+W((F=Object.keys(e.running.input_files))==null?void 0:F.length)+") ",1)]),n(u)?b("",!0):(c(),R(Z,{key:0},[((y=Object.keys(e.running.input_files))==null?void 0:y.length)===1?(c(),k(v,{key:0,class:"mb-5 rounded-lg cursor-pointer",fit:"outside",loading:"lazy",placeholder:n(l)(`${("buildBackendUrl"in p?p.buildBackendUrl:n(De))()}/vix_logo.png`,{f:"png",blur:3,q:50}),src:t(e.running.task_id,0),onClick:f[1]||(f[1]=()=>{r.value=t(e.running.task_id,0),o.value=0,s.value=!0})},null,8,["placeholder","src"])):b("",!0),((d=Object.keys(e.running.input_files))==null?void 0:d.length)>1?(c(),k(P,{key:1,items:Object.keys(e.running.input_files).map(m=>({task_id:e.running.task_id,index:m})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4"}},page:1,indicators:""},{default:$(({item:m})=>[h("div",nl,[g(v,{class:"rounded-lg cursor-pointer",fit:"outside",loading:"lazy",placeholder:n(l)(`${("buildBackendUrl"in p?p.buildBackendUrl:n(De))()}/vix_logo.png`,{f:"png",blur:3,q:50}),src:t(m.task_id,m.index),onClick:()=>{r.value=t(e.running.task_id,m.index),o.value=m.index,s.value=!0}},null,8,["placeholder","src","onClick"])])]),_:1},8,["items"])):b("",!0),g(S,{modelValue:n(s),"onUpdate:modelValue":f[4]||(f[4]=m=>Y(s)?s.value=m:null),class:"z-[90]",transition:!1,fullscreen:""},{default:$(()=>[g(M,{class:"absolute top-4 right-4",icon:"i-heroicons-x-mark",variant:"ghost",onClick:f[2]||(f[2]=()=>s.value=!1)}),h("div",{class:"flex items-center justify-center w-full h-full p-4",onClick:f[3]||(f[3]=Ue(()=>s.value=!1,["left"]))},[n(r)?(c(),k(v,{key:0,class:"lg:h-full",fit:"inside",loading:"lazy",placeholder:"/vix_logo.png",src:n(r)},null,8,["src"])):b("",!0)])]),_:1},8,["modelValue"])],64))],2)):b("",!0)}}}),al=X({__name:"ErrorAlert",props:{running:{type:Object,required:!0}},setup(e){const l=re(),t=x(!1);return(s,r)=>{const o=vt;return c(),k(o,{class:"mb-5",icon:"i-heroicons-exclamation-circle-16-solid",color:"red",variant:"soft",title:"Task failed",description:e.running.error,actions:[{variant:"outline",color:"yellow",label:"Restart",loading:n(t),icon:"i-heroicons-arrow-path",click:()=>{t.value=!0,n(l).restartFlow(e.running).finally(()=>{t.value=!1})}}]},null,8,["description","actions"])}}}),ol={class:"mb-5"},sl={class:"text-sm mb-5 text-slate-500"},il={class:"flex justify-between"},rl=X({__name:"Item",props:{running:{type:Object,required:!0}},setup(e){const l=re(),t=x(!1),s=x(!1);function r(o){return[[{label:"Comfy flow",labelClass:"text-blue-500",icon:"i-heroicons-arrow-down-tray",iconClass:"bg-blue-500",click:()=>{var u;return l.downloadFlowComfy((u=l.currentFlow)==null?void 0:u.name,o.task_id)}}],[{label:`Raise priority ${o.priority>0?`(${o.priority})`:""}`,labelClass:"text-gray-500",icon:"i-heroicons-arrow-up",iconClass:"bg-gray-500",disabled:o.priority===15||o.progress>0,click:()=>{s.value=!0,l.raiseQueuePriority(o).finally(()=>{s.value=!1})}},{label:`Lower priority ${o.priority>0?`(${o.priority})`:""}`,labelClass:"text-gray-500",icon:"i-heroicons-arrow-down",iconClass:"bg-gray-500",disabled:o.priority===0||o.progress>0,click:()=>{s.value=!0,l.lowerQueuePriority(o).finally(()=>{s.value=!1})}},{label:`Reset priority ${o.priority>0?`(${o.priority})`:""}`,labelClass:"text-gray-500",icon:"i-heroicons-arrow-path-rounded-square-solid",iconClass:"bg-gray-500",disabled:o.priority===0||o.progress>0,click:()=>{s.value=!0,l.resetQueuePriority(o).finally(()=>{s.value=!1})}}]]}return(o,u)=>{var M,S;const p=gt,f=ll,w=al,v=te,P=Oe;return c(),R("div",ol,[g(p,{class:"mb-3",value:(M=e.running)==null?void 0:M.progress,indicator:"",color:e.running.error?"red":"green"},null,8,["value","color"]),h("p",sl,W([`${(S=e.running)!=null&&S.priority&&e.running.priority>0?"["+e.running.priority+"] ":""}#${e.running.task_id}`,...Object.keys(e.running.input_params_mapped).filter(C=>e.running.input_params_mapped[C].value&&e.running.input_params_mapped[C].value!=="").map(C=>`${e.running.input_params_mapped[C].display_name}: ${e.running.input_params_mapped[C].value}`)].join(" | ")+`${e.running.execution_time?" | execution_time: "+e.running.execution_time.toFixed(2)+"s":""}`),1),g(f,{running:e.running},null,8,["running"]),e.running.error?(c(),k(w,{key:0,running:e.running},null,8,["running"])):b("",!0),h("div",il,[g(v,{icon:e.running.progress>=0&&e.running.progress<100?"i-heroicons-stop":"i-heroicons-minus-circle",color:e.running.error?"red":"orange",variant:"outline",loading:n(t),onClick:u[0]||(u[0]=()=>{t.value=!0,n(l).cancelRunningFlow(e.running).finally(()=>{t.value=!1})})},{default:$(()=>[V(W(e.running.progress>=0&&e.running.progress<100?"Cancel":"Remove"),1)]),_:1},8,["icon","color","loading"]),g(P,{items:r(e.running),mode:"click",popper:{placement:"bottom-end"}},{default:$(()=>[g(v,{color:"blue",variant:"outline",icon:"i-heroicons-ellipsis-vertical-16-solid"})]),_:1},8,["items"])])])}}}),ul={class:"w-full p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg shadow-md mt-5 mb-10"},dl={class:"flex items-center justify-between mb-2"},cl={key:0},ml={key:1,class:"text-red-400"},fl=X({__name:"Queue",setup(e){const l=re(),t=x(!0),s=x(!1);return(r,o)=>{var w,v,P,M,S,C,I,F,y;const u=ye,p=te,f=rl;return c(),R("div",ul,[h("div",dl,[h("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center",onClick:o[0]||(o[0]=()=>{t.value=!n(t)})},[g(u,{name:n(t)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),h("span",null," Queue ("+W(n(l).flowsRunningByName((w=n(l).currentFlow)==null?void 0:w.name).length)+") ",1),n(l).flowsRunningByName((v=n(l).currentFlow)==null?void 0:v.name).length>0?(c(),R("span",cl," - "+W(`${((M=n(l).flowsRunningByName((P=n(l).currentFlow)==null?void 0:P.name).filter(d=>d.progress>0)[0])==null?void 0:M.progress.toFixed(0))??0}%`),1)):b("",!0),n(l).flowsRunningByNameWithErrors((S=n(l))==null?void 0:S.currentFlow.name).length>0?(c(),R("span",ml," ("+W(n(l).flowsRunningByNameWithErrors((C=n(l).currentFlow)==null?void 0:C.name).length)+") ",1)):b("",!0)]),(I=n(l).currentFlow)!=null&&I.name&&n(l).flowsRunningByName((F=n(l).currentFlow)==null?void 0:F.name).length>0?(c(),k(p,{key:0,icon:"i-heroicons-stop",color:"orange",variant:"outline",loading:n(s),onClick:o[1]||(o[1]=()=>{var d;s.value=!0,n(l).cancelRunningFlows((d=n(l).currentFlow)==null?void 0:d.name).finally(()=>{s.value=!1})})},{default:$(()=>o[2]||(o[2]=[V(" Cancel all ")])),_:1},8,["loading"])):b("",!0)]),n(t)?b("",!0):(c(!0),R(Z,{key:0},me(n(l).flowsRunningByName((y=n(l).currentFlow)==null?void 0:y.name),d=>(c(),k(f,{key:d.task_id,running:d},null,8,["running"]))),128))])}}}),pl=X({__name:"ScrollToTop",props:{show:{type:Boolean,required:!0},target:{type:String,required:!0}},setup(e){const l=e;function t(){const s=document.getElementById(l.target);s&&s.scrollIntoView({behavior:"smooth"})}return(s,r)=>{const o=te;return e.show?(c(),k(o,{key:0,icon:"i-heroicons-arrow-small-up",color:"black",variant:"outline",onClick:t})):b("",!0)}}});function bt(e={}){const{copy:l,isSupported:t}=Ot(),s=Be();function r(o,u={},p={}){t&&l(o).then(()=>{!u.title&&!u.description||s.add({...u,...e})},function(f){s.add({...p,description:p.description||f.message,...e})})}return{copy:r}}const gl={class:"flex flex-col items-center mb-2 max-w-fit mx-auto z-0"},vl={class:"text-slate-500 text-center text-sm w-full mx-auto flex flex-wrap items-center justify-center md:justify-between"},hl={class:"toggles py-2"},wl={class:"mr-2 inline-flex items-center text-sm"},yl=["for"],bl={class:"mr-2 inline-flex items-center text-sm"},kl=["for"],xl={key:0,class:"flex items-center"},_l=["title"],$l=X({__name:"Child",props:{flowResult:{type:Object,required:!0},outputsIndex:{type:Number,required:!1,default:()=>0},openImageModal:{type:Function,required:!0}},setup(e){const l=e,t=re(),s=(d,m=null,a=!1)=>{if(d.child_tasks.length===0)return d;const i=d.child_tasks.findIndex(_=>_.parent_task_node_id===m);return i!==-1?(a||(o.value=d),s(d.child_tasks[i],d.child_tasks[i].outputs[0].comfy_node_id,a)):d};function r(d,m,a=null){if(a!==null&&d.parent_task_node_id===a||Number(d.task_id)===m)return d;for(let i=0;i<d.child_tasks.length;i++)for(let _=0;_<d.child_tasks[i].outputs.length;_++){const O=r(d.child_tasks[i],m,d.child_tasks[i].outputs[_].comfy_node_id);if(O!==null)return O}return null}const o=x(l.flowResult),u=x(s(l.flowResult,l.flowResult.outputs[l.outputsIndex].comfy_node_id,!1));function p(d){var m;return[[{label:`${(m=t.flowByName((d==null?void 0:d.flow_name)??(d==null?void 0:d.name)))==null?void 0:m.display_name}#${d.task_id}`,disabled:!0}],[{label:"View image",icon:"i-heroicons-eye",click:()=>{l.openImageModal(le({task_id:d.task_id,node_id:d.outputs.length>1?d.outputs[l.outputsIndex].comfy_node_id:d.outputs[0].comfy_node_id}))}}]]}function f(d){var a;const m=[[{label:`${(a=t.flowByName((d==null?void 0:d.flow_name)??(d==null?void 0:d.name)))==null?void 0:a.display_name}#${d.task_id}`,disabled:!0}],[{label:"View image",icon:"i-heroicons-eye",disabled:d.progress<100||d.error!=="",click:()=>{l.openImageModal(le({task_id:d.task_id,node_id:d.outputs.length>1?d.outputs[l.outputsIndex].comfy_node_id:d.outputs[0].comfy_node_id}))}},{label:d.progress<100?"Cancel":"Delete",labelClass:d.progress<100?"text-orange-500":"text-red-500",icon:d.progress<100?"i-heroicons-stop":"i-heroicons-trash",iconClass:d.progress<100?"bg-orange-500":"bg-red-500",click:()=>{t.deleteFlowHistory(d.task_id).then(()=>{const i=r(l.flowResult,d.parent_task_id,d.parent_task_node_id);i&&(i.child_tasks=i.child_tasks.filter(_=>Number(_.task_id)!==Number(d.task_id))),C(!1,l.flowResult)})}}]];return d.progress<100&&(m[0][1]={label:`Progress: ${Math.ceil(d.progress)}% (${d.execution_time.toFixed(2)}s)`,labelClass:"text-blue-500",disabled:!0}),d.error!==""&&m[0].push({label:`Error: ${d.error}`,labelClass:"text-red-500",slot:"error",click:()=>{bt().copy(d.error),Be().add({title:"Clipboard",description:`Task #${d.task_id} error copied to clipboard`,timeout:2e3})}}),m}function w(){const d=o.value.parent_task_id;if(!d)return;const m=r(l.flowResult,d,o.value.parent_task_node_id);m&&(o.value=m)}function v(){if(o.value.child_tasks.length===0)return;const d=o.value.outputs.length>1?o.value.outputs[l.outputsIndex].comfy_node_id:o.value.outputs[0].comfy_node_id,m=o.value.child_tasks.find(a=>a.parent_task_node_id===d);m&&(o.value=m)}const P=T(()=>{if(o.value.child_tasks.length===0)return;const d=o.value.outputs.length>1?o.value.outputs[l.outputsIndex].comfy_node_id:o.value.outputs[0].comfy_node_id;return o.value.child_tasks.find(a=>a.parent_task_node_id===d).task_id!==u.value.task_id});function M(){const d=u.value.parent_task_id;if(!d)return;const m=r(l.flowResult,d,u.value.parent_task_node_id);m&&(u.value=m)}function S(){if(u.value.child_tasks.length===0)return;const d=Number(u.value.outputs[0].comfy_node_id),m=u.value.child_tasks.find(a=>Number(a.parent_task_node_id)===d);m&&(u.value=m)}function C(d=!1,m=null){d||(o.value=m),u.value=s(m,m==null?void 0:m.outputs[l.outputsIndex].comfy_node_id,d),I.value=!1}ce(l.flowResult,d=>{C(!0,d)});const I=x(!1),F=x(!0),y=x(null);return ce(I,d=>{d?(y.value=o.value,o.value=l.flowResult):y.value&&(o.value=y.value,u.value=ct(y.value,l.outputsIndex,o.value.outputs.length>1?o.value.outputs[l.outputsIndex].comfy_node_id:o.value.outputs[0].comfy_node_id))}),(d,m)=>{const a=be,i=Pe("ImgComparisonSlider"),_=Lt,O=te,q=Oe,j=ye,z=je;return c(),R("div",gl,[Qe(g(a,{class:"mb-2 rounded-lg cursor-pointer",height:n(t).outputMaxSize,width:n(t).outputMaxSize,draggable:"false",fit:"cover",loading:"lazy",src:("outputResultSrc"in d?d.outputResultSrc:n(le))({task_id:n(u).progress===100?n(u).task_id:e.flowResult.task_id,node_id:n(u).progress===100?n(u).outputs[0].comfy_node_id:e.flowResult.outputs[e.outputsIndex].comfy_node_id}),onClick:m[0]||(m[0]=A=>e.openImageModal(("outputResultSrc"in d?d.outputResultSrc:n(le))({task_id:n(u).task_id??e.flowResult.task_id,node_id:n(u).outputs[0].comfy_node_id??e.flowResult.outputs[e.outputsIndex].comfy_node_id})))},null,8,["height","width","src"]),[[ut,!n(F)]]),n(F)?(c(),k(i,{key:0,class:"mb-2 mx-auto outline-none w-fit rounded-lg"},{default:$(()=>{var A,ue,L;return[g(a,{slot:"first",height:n(t).outputMaxSize,width:n(t).outputMaxSize,fit:"cover",draggable:"false",src:("outputResultSrc"in d?d.outputResultSrc:n(le))({task_id:n(I)?e.flowResult.task_id:n(o).task_id,node_id:n(I)?e.flowResult.outputs[e.outputsIndex].comfy_node_id:n(o).parent_task_node_id!==null?(A=n(o))==null?void 0:A.outputs[0].comfy_node_id:((ue=n(o))==null?void 0:ue.outputs[e.outputsIndex].comfy_node_id)??((L=n(o))==null?void 0:L.outputs[0].comfy_node_id)})},null,8,["height","width","src"]),n(u)&&n(u).progress===100?(c(),k(a,{key:0,slot:"second",height:n(t).outputMaxSize,width:n(t).outputMaxSize,fit:"cover",draggable:"false",src:("outputResultSrc"in d?d.outputResultSrc:n(le))({task_id:n(u).task_id,node_id:n(u).outputs[0].comfy_node_id})},null,8,["height","width","src"])):(c(),k(a,{key:1,slot:"second",height:n(t).outputMaxSize,width:n(t).outputMaxSize,fit:"cover",draggable:"false",src:`${("buildBackendUrl"in d?d.buildBackendUrl:n(De))()}/vix_logo.png`},null,8,["height","width","src"]))]}),_:1})):b("",!0),h("div",vl,[h("div",hl,[h("div",wl,[g(_,{id:`toggle-compare-${e.flowResult.task_id}-${e.outputsIndex}`,modelValue:n(F),"onUpdate:modelValue":m[1]||(m[1]=A=>Y(F)?F.value=A:null),size:"xs",class:"mr-2"},null,8,["id","modelValue"]),h("label",{class:"cursor-pointer select-none",for:`toggle-compare-${e.flowResult.task_id}-${e.outputsIndex}`}," Comparison ",8,yl)]),h("div",bl,[g(_,{id:`toggle-original-${e.flowResult.task_id}-${e.outputsIndex}`,modelValue:n(I),"onUpdate:modelValue":m[2]||(m[2]=A=>Y(I)?I.value=A:null),disabled:!n(F),size:"xs",class:"mr-2"},null,8,["id","modelValue","disabled"]),h("label",{class:"cursor-pointer select-none",for:`toggle-original-${e.flowResult.task_id}-${e.outputsIndex}`}," Original ",8,kl)])]),n(F)?(c(),R("div",xl,[g(O,{icon:"i-heroicons-arrow-small-left-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:n(I)||n(o).parent_task_id===null,onClick:w},null,8,["disabled"]),g(q,{items:p(n(o)),mode:"click",popper:{placement:"top"}},{default:$(()=>[g(O,{variant:"link",color:"white",size:"xs"},{default:$(()=>[V(" #"+W(n(I)?e.flowResult.task_id:n(o).task_id),1)]),_:1})]),_:1},8,["items"]),g(O,{icon:"i-heroicons-arrow-small-right-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:n(I)||!n(P),onClick:v},null,8,["disabled"]),g(j,{class:"mx-3",name:"i-heroicons-arrows-right-left-16-solid"}),g(O,{icon:"i-heroicons-arrow-small-left-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:!r(l.flowResult,n(u).parent_task_id,n(u).parent_task_node_id)||n(u).parent_task_id===Number(n(o).task_id)||n(u).parent_task_id===null,onClick:M},null,8,["disabled"]),g(q,{items:f(n(u)),mode:"click",popper:{placement:"top"}},{error:$(({item:A})=>[h("div",{class:"text-red-500 truncate",title:A.label},W(A.label),9,_l)]),default:$(()=>[g(O,{class:Q({"text-blue-500":n(u).progress!==100&&n(u).error==="","text-red-500":n(u).error!==""}),variant:"link",color:"white",size:"xs"},{default:$(()=>[V(W(n(u).progress===100?"#"+n(u).task_id:Math.ceil(n(u).progress)+"%"),1)]),_:1},8,["class"])]),_:1},8,["items"]),g(O,{icon:"i-heroicons-arrow-small-right-20-solid",size:"2xs",variant:"soft",color:"cyan",disabled:n(u).child_tasks.length===0,onClick:S},null,8,["disabled"]),g(z,{class:"ml-3",text:"Reset comparison",popper:{placement:"top"}},{default:$(()=>[g(O,{icon:"i-heroicons-arrow-path-rounded-square-solid",size:"2xs",variant:"outline",color:"white",onClick:m[3]||(m[3]=()=>C(!1,e.flowResult))})]),_:1})])):b("",!0)])])}}}),Cl={class:"image-output"},Il={class:"flex flex-col basis-full justify-between mx-2"},Sl=X({__name:"Image",props:{flowResult:{type:Object,required:!0},handleSendToFlow:{type:Function,required:!0},openImageModal:{type:Function,required:!0}},setup(e){const l=re();return(t,s)=>{var f,w;const r=$l,o=be,u=te,p=Te;return c(),R("div",Cl,[e.flowResult.outputs.length===1?(c(),R(Z,{key:0},[(f=e.flowResult)!=null&&f.child_tasks&&((w=e.flowResult)==null?void 0:w.child_tasks.length)>0?(c(),k(r,{key:0,"flow-result":e.flowResult,"open-image-modal":e.openImageModal},null,8,["flow-result","open-image-modal"])):e.flowResult.outputs.length===1?(c(),k(o,{key:1,class:"mb-2 mx-auto rounded-lg cursor-pointer",height:n(l).$state.outputMaxSize,width:n(l).$state.outputMaxSize,draggable:"false",fit:"cover",loading:"lazy",src:("outputResultSrc"in t?t.outputResultSrc:n(le))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id}),onClick:s[0]||(s[0]=v=>e.openImageModal(("outputResultSrc"in t?t.outputResultSrc:n(le))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id})))},null,8,["height","width","src"])):b("",!0)],64)):e.flowResult.outputs.length>1?(c(),k(p,{key:1,class:"mb-3 rounded-lg overflow-hidden",items:e.flowResult.outputs.map((v,P)=>({task_id:e.flowResult.task_id,node_id:v.comfy_node_id,index:P})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4 md:hidden"}},page:1,indicators:""},{default:$(({item:v})=>{var P;return[h("div",Il,[(P=e.flowResult)!=null&&P.child_tasks&&("hasChildTaskByParentTaskNodeId"in t?t.hasChildTaskByParentTaskNodeId:n(mt))(e.flowResult,v.index,v.node_id)?(c(),k(r,{key:0,"flow-result":e.flowResult,"outputs-index":v.index,"open-image-modal":e.openImageModal},null,8,["flow-result","outputs-index","open-image-modal"])):(c(),k(o,{key:1,class:Q(`mb-2 h-100 max-h-[${n(l).$state.outputMaxSize}px] mx-auto rounded-lg cursor-pointer`),draggable:"false",height:n(l).$state.outputMaxSize,width:n(l).$state.outputMaxSize,fit:"cover",loading:"lazy",src:("outputResultSrc"in t?t.outputResultSrc:n(le))(v),onClick:M=>e.openImageModal(("outputResultSrc"in t?t.outputResultSrc:n(le))(v))},null,8,["class","height","width","src","onClick"])),g(u,{class:"mt-2 w-fit mx-auto",icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",size:"xs",variant:"outline",onClick:()=>{e.handleSendToFlow(e.flowResult,v.index)}},{default:$(()=>s[1]||(s[1]=[V(" Send to flow ")])),_:2},1032,["onClick"])])]}),_:1},8,["items"])):b("",!0)])}}}),Ml={class:"image-output"},Pl=["width","height"],zl=["src"],Rl={class:"flex flex-col basis-full justify-between mx-2"},Fl=["width","height"],Ul=["src"],jl=X({__name:"Video",props:{flowResult:{type:Object,required:!0},handleSendToFlow:{type:Function,required:!0},openImageModal:{type:Function,required:!0}},setup(e){const l=re();return(t,s)=>{const r=te,o=Te;return c(),R("div",Ml,[e.flowResult.outputs.length===1?(c(),R("video",{key:0,controls:"",class:"mb-2 mx-auto rounded-lg",style:{"max-height":"80vh"},width:n(l).$state.outputMaxSize,height:n(l).$state.outputMaxSize},[h("source",{src:("outputResultSrc"in t?t.outputResultSrc:n(le))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id})},null,8,zl)],8,Pl)):e.flowResult.outputs.length>1?(c(),k(o,{key:1,class:"mb-3 rounded-lg overflow-hidden",items:e.flowResult.outputs.map((u,p)=>({task_id:e.flowResult.task_id,node_id:u.comfy_node_id,index:p})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 mt-4 md:hidden"}},page:1,indicators:""},{default:$(({item:u})=>[h("div",Rl,[h("video",{controls:"",class:"mb-2 mx-auto rounded-lg",width:n(l).$state.outputMaxSize,height:n(l).$state.outputMaxSize},[h("source",{src:("outputResultSrc"in t?t.outputResultSrc:n(le))({task_id:e.flowResult.task_id,node_id:e.flowResult.outputs[0].comfy_node_id})},null,8,Ul)],8,Fl),g(r,{class:"mt-2 w-fit mx-auto",icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",size:"xs",variant:"outline",onClick:()=>{e.handleSendToFlow(e.flowResult,u.index)}},{default:$(()=>s[0]||(s[0]=[V(" Send to flow ")])),_:2},1032,["onClick"])])]),_:1},8,["items"])):b("",!0)])}}}),Bl=X({__name:"Params",props:{flowResult:{type:Object,required:!0}},setup(e){const l=e,t=x(!1),s=T(()=>["#"+l.flowResult.task_id,...Object.keys(l.flowResult.input_params_mapped).filter(r=>l.flowResult.input_params_mapped[r].value&&l.flowResult.input_params_mapped[r].value!=="").map(r=>t.value&&l.flowResult.translated_input_params_mapped&&l.flowResult.translated_input_params_mapped[r]?`${l.flowResult.input_params_mapped[r].display_name}: ${l.flowResult.translated_input_params_mapped[r].value}`:`${l.flowResult.input_params_mapped[r].display_name}: ${l.flowResult.input_params_mapped[r].value}`)].join(" | ")+`${l.flowResult.execution_time?" | execution_time: "+l.flowResult.execution_time.toFixed(2)+"s":""}`);return Xe(()=>{l.flowResult.showInputFiles=!1}),(r,o)=>{const u=te,p=je,f=Ye,w=ye;return c(),R(Z,null,[e.flowResult.translated_input_params_mapped&&Object.keys(e.flowResult.translated_input_params_mapped).length>0?(c(),k(p,{key:0,text:n(t)?"Hide translated input params":"Show translated input params",popper:{placement:"top"}},{default:$(()=>[g(u,{class:"mb-2 mr-2",color:"white",size:"xs",variant:"outline",icon:"i-heroicons-language-solid",onClick:o[0]||(o[0]=()=>{t.value=!n(t)})})]),_:1},8,["text"])):b("",!0),(c(!0),R(Z,null,me(n(s).split("|"),v=>(c(),k(f,{key:v,class:"mr-2 mb-2 last:mr-0 hover:cursor-pointer",variant:"soft",color:"gray",onClick:()=>{("useCopyToClipboard"in r?r.useCopyToClipboard:n(bt))().copy(v.split(":")[1].trim()),("useToast"in r?r.useToast:n(Be))().add({title:"Clipboard",description:`${v.split(":")[0].trim()} copied to clipboard`,timeout:2e3})}},{default:$(()=>[V(W(v),1)]),_:2},1032,["onClick"]))),128)),e.flowResult.input_files.length>0?(c(),k(f,{key:1,class:"mr-2 mb-2 last:mr-0 hover:cursor-pointer select-none",variant:"subtle",color:"sky",onClick:o[1]||(o[1]=()=>{e.flowResult.showInputFiles=!e.flowResult.showInputFiles})},{default:$(()=>[g(w,{name:e.flowResult.showInputFiles?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-1"},null,8,["name"]),g(w,{name:"i-heroicons-document-solid",class:"mr-1"}),V(" "+W(`input_files: ${e.flowResult.input_files.length}`),1)]),_:1})):b("",!0)],64)}}}),Ol={key:0,class:Q("w-full p-1")},Tl={class:"flex flex-col basis-full justify-between mx-2"},Nl=X({__name:"InputFiles",props:{flowResult:{type:Object,required:!0}},setup(e){const l=re(),t=(u,p)=>`${dt()}/tasks/inputs?task_id=${u}&input_index=${p}`,s=x(!1),r=x(""),o=x(0);return(u,p)=>{var M,S;const f=be,w=Te,v=te,P=Ie;return e.flowResult.showInputFiles?(c(),R("div",Ol,[((M=Object.keys(e.flowResult.input_files))==null?void 0:M.length)===1?(c(),k(f,{key:0,class:Q(`mb-5 mx-auto rounded-lg cursor-pointer max-h-[${n(l).$state.outputMaxSize}px] w-auto`),fit:"outside",loading:"lazy",src:t(e.flowResult.task_id,0),onClick:p[0]||(p[0]=()=>{r.value=t(e.flowResult.task_id,0),o.value=0,s.value=!0})},null,8,["class","src"])):b("",!0),((S=Object.keys(e.flowResult.input_files))==null?void 0:S.length)>1?(c(),k(w,{key:1,items:Object.keys(e.flowResult.input_files).map(C=>({task_id:e.flowResult.task_id,index:C})),ui:{item:"basis-full md:basis-1/2",indicators:{wrapper:"relative bottom-0 my-2"}},page:1,indicators:""},{default:$(({item:C})=>[h("div",Tl,[g(f,{class:Q(`mb-5 mx-auto rounded-lg cursor-pointer max-h-[${n(l).$state.outputMaxSize}px] w-auto`),fit:"outside",loading:"lazy",draggable:"false",src:t(C.task_id,C.index),onClick:()=>{r.value=t(e.flowResult.task_id,C.index),o.value=C.index,s.value=!0}},null,8,["class","src","onClick"])])]),_:1},8,["items"])):b("",!0),g(P,{modelValue:n(s),"onUpdate:modelValue":p[3]||(p[3]=C=>Y(s)?s.value=C:null),class:"z-[90]",transition:!1,fullscreen:""},{default:$(()=>[g(v,{class:"absolute top-4 right-4",icon:"i-heroicons-x-mark",variant:"ghost",onClick:p[1]||(p[1]=()=>s.value=!1)}),h("div",{class:"flex items-center justify-center w-full h-full p-4",onClick:p[2]||(p[2]=Ue(()=>s.value=!1,["left"]))},[n(r)?(c(),k(f,{key:0,class:"lg:h-full",fit:"inside",loading:"lazy",placeholder:"/vix_logo.png",src:n(r)},null,8,["src"])):b("",!0)])]),_:1},8,["modelValue"])])):b("",!0)}}}),Vl={class:"p-4"},ql={class:"flex justify-center mb-4"},Al={key:0,class:"text-sm text-slate-500 text-center mb-4"},Wl={class:"text-md text-center text-red-500 mb-4"},Dl={key:1},Ll={class:"flex items-center justify-between"},El=X({__name:"SendToFlowModal",props:We({flowResult:{type:Object,required:!1,default:()=>null},outputImgSrc:{type:String,required:!0},outputParamIndex:{type:Number,required:!0},inputParamsMapped:{type:Object,required:!0},isChildTask:{type:Boolean,required:!1,default:!1},translatePrompt:{type:Boolean,required:!1,default:!1}},{show:{default:!1,type:Boolean},showModifiers:{}}),emits:We(["update:show"],["update:show"]),setup(e,{emit:l}){const t=e,s=Ae(e,"show"),r=re(),o=T(()=>r.sub_flows.map(M=>({value:M.name,label:`${M.display_name} - ${M.description}`}))),u=x(o.value[0]||""),p=x(!1),f=l;function w(){console.debug("[Send to flow]: ",u.value);const M=r.sub_flows.find(C=>C.name===u.value.value&&C.display_name===u.value.label.split(" - ")[0]);if(console.debug("[Send to flow]: targetFlow",M),!M){Be().add({title:`Target sub-flow "${u.value.value}" not found`,description:"Please, verify the target sub-flow is installed and available and try again",timeout:5e3});return}const S=M.input_params.reduce((C,I)=>{const F={};return I.type==="text"?F[I.name]={value:I.default||"",type:I.type}:I.type==="number"?F[I.name]={value:I.default||0,type:I.type}:I.type==="image"?F[I.name]={value:JSON.stringify({task_id:t.flowResult.task_id,node_id:t.flowResult.outputs.length>1?t.flowResult.outputs[t.outputParamIndex].comfy_node_id:t.flowResult.outputs[0].comfy_node_id})||"",type:I.type}:I.type==="list"?F[I.name]={value:I.default||Object.keys(I.options)[0]||"",type:I.type,options:I.options}:I.type==="bool"?F[I.name]={value:I.default||!1,type:I.type}:["range","range_scale"].includes(I.type)&&(F[I.name]={value:I.default||0,type:I.type}),C.push(F),C},[]);console.debug("[Send to flow]: input_params_map",S),p.value=!0,r.runFlow(M,S,1,t.translatePrompt,v.value,v.value?Number(t.flowResult.task_id):null).finally(()=>{p.value=!1,f("update:show",!1)})}const v=x(!1),P=T(()=>{var M;return t.flowResult.progress===100&&((M=t.flowResult)==null?void 0:M.error)===""});return Je(()=>{var S,C;const M=t.flowResult?((C=(S=t==null?void 0:t.flowResult)==null?void 0:S.outputs[t.outputParamIndex])==null?void 0:C.type)??"image":"image";r.fetchSubFlows(M).then(()=>{u.value=o.value[0]||""}),v.value=!1}),(M,S)=>{const C=be,I=vt,F=pt,y=et,d=te,m=Ie;return c(),k(m,{modelValue:s.value,"onUpdate:modelValue":S[2]||(S[2]=a=>s.value=a),class:"z-[90]",transition:!1},{default:$(()=>[h("div",Vl,[S[4]||(S[4]=h("h2",{class:"text-lg text-center mb-4"},"Send to flow",-1)),h("div",ql,[n(P)?(c(),k(C,{key:0,src:e.outputImgSrc,class:"w-1/2 rounded-lg",draggable:!1},null,8,["src"])):(c(),k(I,{key:1,color:"orange",icon:"i-heroicons-exclamation-circle-solid",title:`Task is still running (${Math.ceil(e.flowResult.progress)}%, ${e.flowResult.execution_time.toFixed(2)}s)`,description:e.flowResult.error!==""?e.flowResult.error:""},null,8,["title","description"]))]),e.inputParamsMapped?(c(),R("p",Al,W(["#"+e.flowResult.task_id,...Object.keys(e.inputParamsMapped).filter(a=>e.inputParamsMapped[a].value!=="").map(a=>`${e.inputParamsMapped[a].display_name}: ${e.inputParamsMapped[a].value}`)].join(" | ")),1)):b("",!0),h("p",Wl,[n(o).length>0?(c(),k(F,{key:0,modelValue:n(u),"onUpdate:modelValue":S[0]||(S[0]=a=>Y(u)?u.value=a:null),class:"w-full",size:"lg",options:n(o)},null,8,["modelValue","options"])):(c(),R("span",Dl,"No sub-flows available"))]),e.isChildTask?(c(),k(I,{key:1,class:"mb-4",icon:"i-heroicons-exclamation-circle-solid",title:"Child task",description:"The latest child task is always used as input for sub-flow"})):b("",!0),h("div",Ll,[g(y,{modelValue:n(v),"onUpdate:modelValue":S[1]||(S[1]=a=>Y(v)?v.value=a:null),label:"Bind as child task"},null,8,["modelValue"]),g(d,{icon:"i-heroicons-arrow-uturn-up-solid",color:"violet",variant:"outline",loading:n(p),disabled:n(o).length===0||e.isChildTask&&!n(P),onClick:w},{default:$(()=>S[3]||(S[3]=[V(" Send ")])),_:1},8,["loading","disabled"])])])]),_:1},8,["modelValue"])}}}),Hl={class:"flex flex-col md:flex-row items-center justify-center mb-5 sticky top-1 z-[10]"},Gl={class:"flex items-center justify-center"},Ql={class:"p-4"},Jl={class:"text-md text-center text-red-500 mb-4"},Xl={class:"flex justify-center"},Yl={key:0,class:"results overflow-auto"},Kl=["id"],Zl={class:"text-sm text-slate-500 text-center mb-1"},ea={class:"w-5/6 mx-auto flex flex-wrap items-center justify-center"},ta={class:"w-full flex justify-center items-center"},na={key:1,class:"text-center text-slate-500"},la=X({__name:"Output",emits:["copy-prompt-inputs"],setup(e,{emit:l}){const t=re(),s=T(()=>{var j;return t.flowResultsByName((j=t.currentFlow)==null?void 0:j.name).length>0||!1}),r=T(()=>{var j;return t.flowResultsByName((j=t.currentFlow)==null?void 0:j.name)||[]}),o=T(()=>t.$state.resultsPageSize);ce(r,()=>{r.value.length<=t.$state.resultsPageSize?t.$state.resultsPage=1:t.$state.resultsPage>Math.ceil(r.value.length/t.$state.resultsPageSize)&&(t.$state.resultsPage=Math.ceil(r.value.length/t.$state.resultsPageSize))}),ce(o,()=>{r.value.length<=t.$state.resultsPageSize?t.$state.resultsPage=1:t.$state.resultsPage>Math.ceil(r.value.length/t.$state.resultsPageSize)&&(t.$state.resultsPage=Math.ceil(r.value.length/t.$state.resultsPageSize)),t.saveUserOptions()}),Xe(()=>{t.$state.flow_results_filter="",t.$state.resultsPage=1});const u=l;function p(j){u("copy-prompt-inputs",j.input_params_mapped)}function f(j){C.value=j,S.value=!0}const w=x(null),v=x(!1);window.addEventListener("scroll",()=>{var j;v.value=window.scrollY>(((j=w.value)==null?void 0:j.offsetTop)+window.screen.height||0)});const P=T(()=>t.$state.resultsPage);ce(P,()=>{const j=document.getElementById("output-container");j&&j.scrollIntoView({behavior:"smooth"})});const M=x(!1),S=x(!1),C=x(""),I=x(!1),F=x(!1),y=x(!1),d=x(""),m=x(null),a=x({}),i=x(0),_=x(!1);function O(j,z=0){if(j.child_tasks.length===0||!mt(j,z,j.outputs[z].comfy_node_id))m.value=j,d.value=le({task_id:j.task_id,node_id:j.outputs[z].comfy_node_id}),a.value=j.input_params_mapped,_.value=!1;else{const A=ct(j,z,j.outputs[z].comfy_node_id);m.value=A,a.value=j.input_params_mapped,d.value=le({task_id:A.task_id,node_id:A.outputs[0].comfy_node_id}),_.value=!0}i.value=z,y.value=!0}function q(j){const z=[[{label:"Use params",labelClass:"text-cyan-500 text-sm",icon:"i-heroicons-document-duplicate-16-solid",iconClass:"bg-cyan-500 h-4 w-4",click:()=>p(j)}],[{label:"Comfy flow",labelClass:"text-blue-500 text-sm",icon:"i-heroicons-arrow-down-tray",iconClass:"bg-blue-500 h-4 w-4",click:()=>{var A;return t.downloadFlowComfy((A=t.currentFlow)==null?void 0:A.name,j.task_id)}}]];return j.outputs.length===1&&j.outputs.every(A=>A.type==="image")&&z.splice(1,0,[{label:"Send to flow",labelClass:"text-violet-500 text-sm",icon:"i-heroicons-arrow-uturn-up-solid",iconClass:"bg-violet-500 h-4 w-4",click:()=>{O(j)}}]),z}return(j,z)=>{var N;const A=pl,ue=ye,L=Ke,fe=Wt,ke=Et,ae=te,E=Oe,ee=Ye,K=Ie,oe=Sl,ge=jl,D=Bl,ne=Nl,xe=El,B=be;return c(),R("div",{id:"output-container",ref_key:"outputContainer",ref:w,class:"w-full p-4 ring-1 ring-gray-200 dark:ring-gray-800 rounded-lg shadow-md my-10"},[g(A,{show:n(v),class:"fixed bottom-5 right-5",target:"output-container"},null,8,["show"]),h("h2",{class:"text-lg font-bold cursor-pointer select-none flex items-center mb-3",onClick:z[0]||(z[0]=()=>{M.value=!n(M)})},[g(ue,{name:n(M)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),V(" Output ("+W(n(r).filter(U=>U.parent_task_id===null).length)+") ",1)]),n(M)?b("",!0):(c(),R(Z,{key:0},[h("div",Hl,[g(L,{modelValue:n(t).$state.flow_results_filter,"onUpdate:modelValue":z[1]||(z[1]=U=>n(t).$state.flow_results_filter=U),icon:"i-heroicons-magnifying-glass-20-solid",color:"white",class:"md:mr-3",label:"Filter by prompt",trailing:!0,placeholder:"Filter results by prompt"},null,8,["modelValue"]),n(r).filter(U=>U.parent_task_id===null).length>n(t).$state.resultsPageSize?(c(),k(fe,{key:0,modelValue:n(t).$state.resultsPage,"onUpdate:modelValue":z[2]||(z[2]=U=>n(t).$state.resultsPage=U),class:"my-1 md:my-0","page-count":n(t).$state.resultsPageSize,total:n(r).filter(U=>U.parent_task_id===null).length,"show-first":"","show-last":""},null,8,["modelValue","page-count","total"])):b("",!0),h("div",Gl,[g(ke,{modelValue:n(t).resultsPageSize,"onUpdate:modelValue":z[3]||(z[3]=U=>n(t).resultsPageSize=U),class:"md:mx-3 w-fit mr-3",options:[5,10,20,50,100],label:"Results per page"},null,8,["modelValue"]),g(E,{items:[[{label:"Delete all results",labelClass:"text-red-500",icon:"i-heroicons-trash",iconClass:"dark:text-red-500 text-red-500",click:()=>I.value=!0}]],mode:"click",label:"Options",popper:{placement:"bottom-end"}},{default:$(()=>[g(ae,{color:"white",icon:"i-heroicons-ellipsis-vertical-16-solid"})]),_:1},8,["items"])]),g(K,{modelValue:n(I),"onUpdate:modelValue":z[6]||(z[6]=U=>Y(I)?I.value=U:null),class:"z-[90]",transition:!1},{default:$(()=>[h("div",Ql,[z[15]||(z[15]=h("p",{class:"text-lg text-center mb-4"},"Are you sure you want to delete all results?",-1)),h("p",Jl,[z[11]||(z[11]=V(" All history and images of ")),g(ee,{class:"mx-1",color:"orange",variant:"outline"},{default:$(()=>[V(W(n(t).currentFlow.display_name),1)]),_:1}),z[12]||(z[12]=V(" will be deleted. "))]),h("div",Xl,[g(ae,{class:"mr-2",color:"red",variant:"outline",loading:n(F),onClick:z[4]||(z[4]=()=>{var U;F.value=!0,n(t).deleteFlowResults((U=n(t).currentFlow)==null?void 0:U.name).then(()=>{F.value=!1,I.value=!1})})},{default:$(()=>z[13]||(z[13]=[V(" Yes ")])),_:1},8,["loading"]),g(ae,{variant:"outline",onClick:z[5]||(z[5]=()=>I.value=!1)},{default:$(()=>z[14]||(z[14]=[V("No")])),_:1})])])]),_:1},8,["modelValue"])]),n(s)?(c(),R("div",Yl,[(c(!0),R(Z,null,me(n(t).flowResultsByNamePaginated((N=n(t).currentFlow)==null?void 0:N.name),U=>(c(),R("div",{id:"task_id_"+U.task_id,key:U.task_id,class:"flex flex-col justify-center mx-auto mb-5"},[U.outputs.some(G=>["image","image-animated"].includes(G.type))?(c(),k(oe,{key:0,"flow-result":U,"handle-send-to-flow":O,"open-image-modal":f},null,8,["flow-result"])):U.outputs.some(G=>G.type==="video")?(c(),k(ge,{key:1,"flow-result":U,"handle-send-to-flow":O,"open-image-modal":f},null,8,["flow-result"])):b("",!0),h("div",Zl,[h("div",ea,[g(D,{"flow-result":U},null,8,["flow-result"])])]),g(ne,{"flow-result":U},null,8,["flow-result"]),h("div",ta,[g(ae,{class:"mr-3",color:"red",icon:"i-heroicons-trash",variant:"outline",size:"xs",onClick:()=>n(t).deleteFlowHistory(U.task_id)},{default:$(()=>z[16]||(z[16]=[V(" Delete ")])),_:2},1032,["onClick"]),g(E,{items:q(U),mode:"click",popper:{placement:"bottom-start"}},{default:$(()=>[g(ae,{color:"white",icon:"i-heroicons-ellipsis-vertical-16-solid",size:"xs"})]),_:2},1032,["items"])])],8,Kl))),128)),g(xe,{show:n(y),"onUpdate:show":z[7]||(z[7]=U=>Y(y)?y.value=U:null),"flow-result":n(m),"output-img-src":n(d),"output-param-index":n(i),"input-params-mapped":n(a),"is-child-task":n(_)},null,8,["show","flow-result","output-img-src","output-param-index","input-params-mapped","is-child-task"])])):(c(),R("p",na," No output results available "))],64)),g(K,{modelValue:n(S),"onUpdate:modelValue":z[10]||(z[10]=U=>Y(S)?S.value=U:null),class:"z-[90]",transition:!1,fullscreen:""},{default:$(()=>[g(ae,{class:"absolute top-4 right-4",icon:"i-heroicons-x-mark",variant:"ghost",onClick:z[8]||(z[8]=()=>S.value=!1)}),h("div",{class:"flex items-center justify-center w-full h-full p-4",onClick:z[9]||(z[9]=Ue(()=>S.value=!1,["left"]))},[n(C)?(c(),k(B,{key:0,class:"lg:h-full",fit:"inside",loading:"lazy",src:n(C)},null,8,["src"])):b("",!0)])]),_:1},8,["modelValue"])],512)}}}),aa={class:"flex flex-col lg:flex-row flex-grow items-start w-full"},oa={class:"card-wrapper w-full lg:pr-5"},sa={key:0,class:"p-0 text-sm"},ia={class:"flex flex-row items-center text-slate-400 mb-2"},ra={class:"flex flex-row flex-wrap items-center text-md mb-2"},ua=["href"],da={class:"flex flex-row items-center text-md mb-2"},ca=["href"],ma={key:1},fa={class:"flex flex-row items-center text-md mb-2"},pa={key:0},ga={class:"flex flex-row items-center text-md mb-2"},va={key:0,class:"flex flex-row flex-wrap items-center text-md mb-2"},ha=["href"],wa={key:1},ya={class:"flex flex-row items-center mb-2"},ba={key:1,class:"flex flex-row flex-wrap items-center text-md"},ka={key:0,class:"flex justify-end"},xa={class:"flex flex-row items-center justify-center text-sm mr-2"},_a={key:1},$a={class:"text-sm flex justify-end"},Ca={class:"flex flex-row items-center justify-center text-sm mr-3"},Ia={key:0,class:"text-right"},Sa={class:"prompt-wrapper w-full"},Ma={class:"flex items-center justify-between"},Pa={class:"pb-2"},za={class:"flex justify-end items-center"},Va=X({__name:"[name]",setup(e){const l=Tt(),t=re();t.setCurrentFlow(l.params.name);const s=T(()=>t.flowInstallingByName(l.params.name)),r=T(()=>{var m;return s.value&&((m=s.value)==null?void 0:m.progress)<100||!1}),o=x(!1),u=T(()=>{var m;return s.value?"error"in s.value&&((m=s.value)==null?void 0:m.error)!==""?`${s.value.progress.toFixed(0)}% Error setting up`:`${s.value.progress.toFixed(0)}% Setting up`:"Setup flow"}),p=x(!1),f=x(!1),w=T(()=>{var a;const m=[[{label:"Delete flow",icon:"i-heroicons-trash",click:P}]];return((a=t==null?void 0:t.currentFlow)==null?void 0:a.new_version_available)!==""&&m[0].unshift({label:`Update to ${t.currentFlow.new_version_available}`,icon:"i-heroicons-arrow-path",click:()=>{t.updateFlow(t.currentFlow)}}),m});function v(m,a=!1){p.value=!0,t.deleteFlow(m).then(()=>{a&&Nt().push("/")}).finally(()=>{p.value=!1,f.value=!1})}function P(){var a;const m=((a=t.currentFlow)==null?void 0:a.private)||!1;if(m){f.value=!0;return}v(t.currentFlow,m)}const M=x(!1),S=x(null),C=function(m){var a;(a=S.value)==null||a.copyPromptInputs(m)},I=Vt(),F=T(()=>{var m;return(m=t.currentFlow)==null?void 0:m.models.filter(a=>a.installed).reduce((a,i)=>a+(i==null?void 0:i.file_size)||0,0)}),y=T(()=>{var m;return(m=t.currentFlow)==null?void 0:m.models.reduce((a,i)=>a+(i==null?void 0:i.file_size)||0,0)}),d=T(()=>!F.value&&!y.value?"":F.value===y.value?` - ${Se(y.value)}`:` - ${Se(F.value)} / ${Se(y.value)}`);return(m,a)=>{const i=ye,_=je,O=Ye,q=te,j=Oe,z=Dt,A=Jn,ue=fl,L=la,fe=gt,ke=Ie,ae=At;return c(),k(ae,null,{default:$(()=>[!n(t).loading.flows_available&&!n(t).loading.flows_installed&&n(t).currentFlow&&!n(t).$state.loading.tasks_history?(c(),R(Z,{key:0},[h("div",aa,[h("div",oa,[g(z,{as:"div",class:"w-full mb-5"},qt({header:$(()=>{var E,ee;return[h("h2",{class:"text-xl font-bold cursor-pointer select-none flex items-center",onClick:a[0]||(a[0]=()=>{M.value=!n(M)})},[(E=n(t).currentFlow)!=null&&E.private?(c(),k(_,{key:0,text:"This flow is local, manually added"},{default:$(()=>{var K;return[g(i,{name:"i-heroicons-lock-closed",class:Q(["mr-2",{"text-stone-500":!((K=n(t).currentFlow)!=null&&K.is_supported_by_workers)}])},null,8,["class"])]}),_:1})):b("",!0),g(i,{name:n(M)?"i-heroicons-chevron-down":"i-heroicons-chevron-up",class:"mr-2"},null,8,["name"]),g(_,{text:(ee=n(t).currentFlow)!=null&&ee.is_supported_by_workers?"":"No workers capable of running this flow",popper:{placement:"top"}},{default:$(()=>{var K,oe;return[h("span",{class:Q({"text-stone-500":!((K=n(t).currentFlow)!=null&&K.is_supported_by_workers)})},W((oe=n(t).currentFlow)==null?void 0:oe.display_name),3)]}),_:1},8,["text"])])]}),default:$(()=>{var E,ee,K,oe,ge,D,ne,xe,B,N,U,G,J,se,ie,de,ve;return[n(M)?b("",!0):(c(),R("div",sa,[h("p",ia,W((E=n(t).currentFlow)==null?void 0:E.description),1),h("p",ra,[g(i,{name:"i-heroicons-user-16-solid",class:"mr-1"}),a[8]||(a[8]=h("b",null,"Author:",-1)),a[9]||(a[9]=V(" ")),h("a",{class:"hover:underline text-md",href:(ee=n(t).currentFlow)==null?void 0:ee.homepage,rel:"noopener",target:"_blank"},W((K=n(t).currentFlow)==null?void 0:K.author),9,ua)]),h("p",da,[g(i,{name:"i-heroicons-document-text",class:"mr-1"}),(oe=n(t).currentFlow)!=null&&oe.documentation?(c(),R("a",{key:0,class:"hover:underline",href:(ge=n(t).currentFlow)==null?void 0:ge.documentation,rel:"noopener",target:"_blank"}," Documentation ",8,ca)):(c(),R("span",ma,"No documentation"))]),h("p",fa,[g(i,{name:"i-heroicons-clock",class:"mr-1"}),a[10]||(a[10]=h("b",null,"Version:",-1)),a[11]||(a[11]=V(" ")),h("span",null,W((D=n(t).currentFlow)==null?void 0:D.version),1),((ne=n(t).currentFlow)==null?void 0:ne.new_version_available)!==""?(c(),R("span",pa," (new version available: "+W((xe=n(t).currentFlow)==null?void 0:xe.new_version_available)+") ",1)):b("",!0)]),h("p",ga,[g(i,{name:"i-heroicons-tag",class:"mr-1"}),a[12]||(a[12]=h("b",null,"Tags:",-1)),a[13]||(a[13]=V(" ")),((B=n(t).currentFlow)==null?void 0:B.tags.length)>0?(c(!0),R(Z,{key:0},me((N=n(t).currentFlow)==null?void 0:N.tags,H=>(c(),k(O,{key:H,label:H,color:"white",variant:"solid",class:"m-1"},null,8,["label"]))),128)):(c(),k(O,{key:1,label:"No tags",color:"white",variant:"solid",class:"m-1"}))]),((G=(U=n(t).currentFlow)==null?void 0:U.models)==null?void 0:G.length)>0?(c(),R("p",va,[g(i,{name:"i-heroicons-arrow-down-on-square-stack",class:"mr-1"}),g(_,{text:n(y)-n(F)>0?`${("formatBytes"in m?m.formatBytes:n(Se))(n(y)-n(F))} to download`:"All models installed",popper:{placement:"top"}},{default:$(()=>{var H;return[h("b",null,"Models ("+W((H=n(t).currentFlow)==null?void 0:H.models.length)+W(n(d))+"):",1),a[14]||(a[14]=V(" "))]}),_:1},8,["text"]),(c(!0),R(Z,null,me((J=n(t).currentFlow)==null?void 0:J.models,H=>(c(),k(O,{key:H.name,class:"m-1",color:"white",variant:"solid"},{default:$(()=>[g(_,{text:H.installed?"Model installed":"Model not installed"},{default:$(()=>[g(i,{name:H.installed?"i-heroicons-check-circle-20-solid":"i-heroicons-x-mark-20-solid",class:Q(H.installed?"text-green-500":"text-orange-500")},null,8,["name","class"])]),_:2},1032,["text"]),H.gated?(c(),k(_,{key:0,text:"Gated model, requires auth token for download",popper:{placement:"top"}},{default:$(()=>[g(i,{name:"i-heroicons-key",class:"mr-1"})]),_:1})):b("",!0),h("a",{class:"hover:underline underline-offset-4",href:H.homepage,rel:"noopener",target:"_blank"},W(H.name),9,ha),H.file_size?(c(),R("span",wa," ("+W(("formatBytes"in m?m.formatBytes:n(Se))(H.file_size))+") ",1)):b("",!0)]),_:2},1024))),128))])):b("",!0),h("p",ya,[g(i,{name:"i-mdi-help-network-outline",class:"mr-1"}),a[17]||(a[17]=h("b",null,"Platforms:",-1)),a[18]||(a[18]=V(" ")),g(_,{text:"Linux"},{default:$(()=>[g(i,{name:"i-mdi-linux",class:"mr-1"})]),_:1}),g(_,{text:"Microsoft Windows"},{default:$(()=>[g(i,{name:"i-mdi-microsoft-windows",class:"mr-1"})]),_:1}),n(t).currentFlow.is_macos_supported?(c(),k(_,{key:0,text:"macOS"},{default:$(()=>[g(i,{name:"i-mdi-apple",class:"mr-1"})]),_:1})):b("",!0),(se=n(t).currentFlow)!=null&&se.required_memory_gb?(c(),k(_,{key:1,class:"flex flex-row items-center",text:"Required VRAM memory (GB)"},{default:$(()=>{var H;return[a[15]||(a[15]=V(" (")),g(i,{name:"i-mdi-memory",class:"mr-1"}),h("span",null,W((H=n(t).currentFlow)==null?void 0:H.required_memory_gb)+" GB",1),a[16]||(a[16]=V(") "))]}),_:1})):b("",!0)]),((de=(ie=n(t).currentFlow)==null?void 0:ie.requires)==null?void 0:de.length)>0?(c(),R("p",ba,[a[19]||(a[19]=h("b",null,"Requires:",-1)),a[20]||(a[20]=V(" ")),(c(!0),R(Z,null,me((ve=n(t).currentFlow)==null?void 0:ve.requires,H=>(c(),k(O,{key:H,class:"m-1",color:"yellow",variant:"outline"},{default:$(()=>[V(W(H),1)]),_:2},1024))),128))])):b("",!0)]))]}),_:2},[n(M)?void 0:{name:"footer",fn:$(()=>{var E,ee;return[n(I).isAdmin?(c(),R("div",ka,[h("div",xa,[g(i,{name:n(t).isFlowInstalled(n(l).params.name)?"i-heroicons-check-badge":"i-heroicons-x-mark",class:"mx-1"},null,8,["name"]),h("span",{class:Q({"text-green-500":n(t).isFlowInstalled(n(l).params.name),"text-red-500":!n(t).isFlowInstalled(n(l).params.name),"text-stone-500":n(t).isFlowInstalled(n(l).params.name)&&!((E=n(t).currentFlow)!=null&&E.is_supported_by_workers)})},W(n(t).isFlowInstalled(n(l).params.name)?(ee=n(t).currentFlow)!=null&&ee.is_supported_by_workers?"Installed":"Installed (no workers)":"Not installed"),3)]),n(t).isFlowInstalled(n(l).params.name)?b("",!0):(c(),k(_,{key:0,text:"Setup flow dependencies and configure it in ComfyUI",popper:{placement:"top"},"open-delay":500},{default:$(()=>[g(q,{icon:"i-heroicons-arrow-down-tray",class:"mx-3",color:"primary",variant:"outline",loading:n(r),onClick:a[1]||(a[1]=()=>n(t).setupFlow(n(t).currentFlow))},{default:$(()=>[V(W(n(u)),1)]),_:1},8,["loading"])]),_:1})),!n(t).isFlowInstalled(n(l).params.name)&&n(r)?(c(),k(_,{key:1,text:"Cancel flow installation",popper:{placement:"top"},"open-delay":500},{default:$(()=>[g(q,{icon:"i-heroicons-stop",variant:"outline",color:"orange",loading:n(o),onClick:a[2]||(a[2]=()=>{o.value=!0,n(t).cancelFlowSetup(n(t).currentFlow).then(()=>{o.value=!1})})},{default:$(()=>a[21]||(a[21]=[V(" Cancel ")])),_:1},8,["loading"])]),_:1})):b("",!0),n(t).isFlowInstalled(n(l).params.name)?(c(),k(j,{key:2,items:n(w),mode:"click",label:"Actions",popper:{placement:"bottom-end"}},{default:$(()=>[g(q,{color:"white",label:"Actions","trailing-icon":"i-heroicons-chevron-down-20-solid"})]),_:1},8,["items"])):b("",!0)])):(c(),R("div",_a,[h("div",$a,[h("div",Ca,[g(i,{name:n(t).isFlowInstalled(n(l).params.name)?"i-heroicons-check-badge":"i-heroicons-x-mark",class:"mx-1"},null,8,["name"]),h("span",{class:Q({"text-green-500":n(t).isFlowInstalled(n(l).params.name),"text-red-500":!n(t).isFlowInstalled(n(l).params.name)})},W(n(t).isFlowInstalled(n(l).params.name)?"Installed":"Not installed"),3)]),n(t).isFlowInstalled(n(l).params.name)?b("",!0):(c(),R("div",Ia,a[22]||(a[22]=[h("p",{class:"text-orange-500"},"Only admin can manage workflows.",-1),h("span",{class:"text-slate-500"},"Ask your admin to setup this workflow",-1)])))])]))]}),key:"0"}]),1024)]),h("div",Sa,[!n(p)&&n(t).isFlowInstalled(n(l).params.name)?(c(),k(A,{key:0,ref_key:"workflowPrompt",ref:S},null,512)):b("",!0)])]),!n(p)&&n(t).isFlowInstalled(n(l).params.name)?(c(),k(ue,{key:0})):b("",!0),!n(p)&&n(t).isFlowInstalled(n(l).params.name)||n(t).flowResultsByName(n(l).params.name).length>0?(c(),k(L,{key:1,onCopyPromptInputs:a[3]||(a[3]=E=>C(E))})):b("",!0)],64)):(c(),k(fe,{key:1,class:"mb-3"})),g(ke,{modelValue:n(f),"onUpdate:modelValue":a[7]||(a[7]=E=>Y(f)?f.value=E:null),"prevent-close":""},{default:$(()=>[g(z,{ui:{ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:$(()=>[h("div",Ma,[a[23]||(a[23]=h("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Confirm workflow deletion ",-1)),g(q,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:a[4]||(a[4]=E=>f.value=!1)})])]),default:$(()=>{var E;return[h("p",Pa,[a[24]||(a[24]=V(" Are you sure you want to delete the ")),a[25]||(a[25]=h("b",null,"private",-1)),a[26]||(a[26]=V(" workflow ")),h("b",null,W((E=n(t).currentFlow)==null?void 0:E.display_name),1),a[27]||(a[27]=V("? "))]),h("div",za,[g(q,{icon:"i-heroicons-x-mark-16-solid",variant:"outline",color:"green",class:"mr-2",onClick:a[5]||(a[5]=ee=>f.value=!1)},{default:$(()=>a[28]||(a[28]=[V(" Cancel ")])),_:1}),g(q,{icon:"i-heroicons-trash",variant:"outline",color:"red",onClick:a[6]||(a[6]=ee=>{var K;return v(n(t).currentFlow,((K=n(t).currentFlow)==null?void 0:K.private)||!1)})},{default:$(()=>a[29]||(a[29]=[V(" Delete ")])),_:1})])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{Va as default};
