import{_ as T,a as M}from"./C5tlX1if.js";import{_ as O}from"./BHXOYAIc.js";import{_ as D,a as L,b as W}from"./Bi-SfbkD.js";import{_ as q}from"./D3zx2EGG.js";import{f as z,g as j,o as s,c as f,b as r,w as c,a as l,t as p,h as A,d as V,F as U,r as B,i as d,j as E,k as I,l as P,n as C,m as y,p as t,u as H,q as G,s as N,v as J}from"./BlTmSltH.js";const K={class:"p-4 w-full md:w-6/12 lg:w-4/12 z-[10]"},Q={class:"flex flex-grow justify-between"},R=["title"],X={class:"flex flex-col items-between text-sm"},Y=["title"],Z={class:"flex flex-row flex-wrap items-center mb-2"},ee={class:"flex flex-row items-center"},te=["href"],oe={class:"flex flex-row items-center mb-2"},se=["href"],le={key:1},ne={class:"flex flex-row items-center"},ae=z({__name:"ListItem",props:{flow:{type:Object,required:!0}},setup(o){const e=j();return(S,n)=>{const h=A,g=P,a=I,x=E,v=D;return s(),f("div",K,[r(v,{as:"div",class:"hover:shadow-md"},{header:c(()=>{var _,u,w;return[l("div",Q,[l("h2",{class:"text-xl font-bold truncate flex items-center",title:(_=o.flow)==null?void 0:_.display_name},[(u=o.flow)!=null&&u.private?(s(),d(g,{key:0,text:"This flow is local, manually added"},{default:c(()=>[r(h,{name:"i-heroicons-lock-closed",class:C(["mr-2",{"text-stone-500":!o.flow.is_supported_by_workers}])},null,8,["class"])]),_:1})):y("",!0),r(g,{text:o.flow.is_supported_by_workers?"":"No workers capable of running this flow",popper:{placement:"top"}},{default:c(()=>{var m;return[l("span",{class:C({"text-stone-500":!o.flow.is_supported_by_workers})},p((m=o.flow)==null?void 0:m.display_name),3)]}),_:1},8,["text"])],8,R),t(e).isFlowInstalled((w=o.flow)==null?void 0:w.name)?(s(),d(g,{key:0,text:"Mark flow as favorite",class:"ml-3",popper:{placement:"top"},"open-delay":500},{default:c(()=>[r(a,{icon:t(e).isFlowFavorite(o.flow.name)?"i-heroicons-star-16-solid":"i-heroicons-star",variant:"outline",color:"yellow",onClick:n[0]||(n[0]=m=>t(e).markFlowFavorite(o.flow))},null,8,["icon"])]),_:1})):y("",!0)])]}),footer:c(()=>{var _;return[r(a,{to:`/workflows/${(_=o.flow)==null?void 0:_.name}`,icon:"i-heroicons-arrow-up-right-16-solid",class:"flex justify-center dark:bg-slate-500 bg-slate-500 dark:hover:bg-slate-700 hover:bg-slate-700 dark:text-white"},{default:c(()=>n[5]||(n[5]=[V(" Open ")])),_:1},8,["to"])]}),default:c(()=>{var _,u,w,m,$,k,b,i;return[l("div",X,[l("p",{class:"text-md text-slate-400 truncate text-ellipsis mb-2",title:(_=o.flow)==null?void 0:_.description},p((u=o.flow)==null?void 0:u.description),9,Y),l("p",Z,[l("span",ee,[r(h,{name:"i-heroicons-user-16-solid",class:"mr-1"}),n[1]||(n[1]=l("b",null,"Author:",-1)),n[2]||(n[2]=V("  "))]),l("a",{class:"hover:underline flex flex-row items-center",href:(w=o.flow)==null?void 0:w.homepage,rel:"noopener",target:"_blank"},p((m=o.flow)==null?void 0:m.author),9,te)]),l("p",oe,[r(h,{name:"i-heroicons-document-text",class:"mr-1"}),($=o.flow)!=null&&$.documentation?(s(),f("a",{key:0,class:"hover:underline",href:(k=o.flow)==null?void 0:k.documentation,rel:"noopener",target:"_blank"},"Documentation",8,se)):(s(),f("span",le,"No documentation"))]),l("p",ne,[r(h,{name:"i-heroicons-tag",class:"mr-1"}),n[3]||(n[3]=l("b",null,"Tags:",-1)),n[4]||(n[4]=V("  ")),((b=o.flow)==null?void 0:b.tags.length)>0?(s(!0),f(U,{key:0},B((i=o.flow)==null?void 0:i.tags,F=>(s(),d(x,{key:F,label:F,color:"white",variant:"solid",class:"m-1"},null,8,["label"]))),128)):(s(),d(x,{key:1,label:"No tags",color:"white",variant:"solid",class:"m-1"}))])])]}),_:1})])}}}),ie={class:"w-full sticky z-[100] top-1 flex flex-col md:flex-row justify-center items-center my-1"},re={class:"flex"},ce={key:0,class:"truncate"},fe={key:1},_e={key:0},me={key:0,class:"flex flex-wrap justify-center items-center mb-10"},de={key:1,class:"text-center text-slate-500 my-5"},xe=z({__name:"index",setup(o){H({title:"Workflows - Visionatrix",meta:[{name:"description",content:"Workflows - Visionatrix"}]});const e=j();G(()=>e.paginatedFlows,()=>{e.flows.length<=e.$state.pageSize?e.$state.page=1:e.$state.page>Math.ceil(e.flows.length/e.$state.pageSize)&&(e.$state.page=Math.ceil(e.flows.length/e.$state.pageSize))});function S(){return[[{label:"Show unsupported flows",icon:e.$state.show_unsupported_flows?"i-mdi-filter-check":"i-mdi-filter-minus",slot:"show_unsupported_flows",click:()=>{e.$state.show_unsupported_flows=!e.$state.show_unsupported_flows}}],[{label:"Clear filters",icon:"i-mdi-filter-off",click:()=>{e.$state.flows_search_filter="",e.$state.flows_tags_filter=[],e.$state.show_unsupported_flows=!1}}]]}const n=N(()=>e.$state.flows_search_filter||e.$state.flows_tags_filter.length>0||e.$state.show_unsupported_flows),h=N(()=>(e.$state.flows_search_filter?1:0)+e.$state.flows_tags_filter.length+(e.$state.show_unsupported_flows?1:0));return(g,a)=>{const x=T,v=O,_=L,u=q,w=I,m=M,$=W,k=ae,b=J;return s(),d(b,{class:"lg:h-dvh"},{default:c(()=>[t(e).$state.loading.flows_available||t(e).loading.flows_installed||t(e).$state.loading.tasks_history?(s(),d(x,{key:0})):(s(),f(U,{key:1},[l("div",ie,[r(v,{modelValue:t(e).$state.flows_search_filter,"onUpdate:modelValue":a[0]||(a[0]=i=>t(e).$state.flows_search_filter=i),icon:"i-heroicons-magnifying-glass-20-solid",color:"white",class:"mb-1 md:mr-3 md:mb-0",label:"Filter by prompt",trailing:!0,placeholder:"Search flows"},null,8,["modelValue"]),t(e).flows.length>t(e).$state.pageSize?(s(),d(_,{key:0,modelValue:t(e).$state.page,"onUpdate:modelValue":a[1]||(a[1]=i=>t(e).$state.page=i),class:"mb-1 md:mr-3 md:mb-0","page-count":t(e).$state.pageSize,total:t(e).flows.length},null,8,["modelValue","page-count","total"])):y("",!0),l("div",re,[r(u,{modelValue:t(e).$state.flows_tags_filter,"onUpdate:modelValue":a[2]||(a[2]=i=>t(e).$state.flows_tags_filter=i),options:t(e).flowsTags,multiple:"",searchable:""},{label:c(()=>[t(e).$state.flows_tags_filter.length>0?(s(),f("span",ce,p(t(e).$state.flows_tags_filter.join(",")),1)):(s(),f("span",fe,"Select tags to filter"))]),_:1},8,["modelValue","options"]),r($,{class:"ml-2",items:S(),mode:"click",label:"Options"},{show_unsupported_flows:c(()=>[r(m,{modelValue:t(e).$state.show_unsupported_flows,"onUpdate:modelValue":a[3]||(a[3]=i=>t(e).$state.show_unsupported_flows=i)},null,8,["modelValue"]),a[4]||(a[4]=l("span",{class:"ml-2"},"Show unsupported flows",-1))]),default:c(()=>[r(w,{color:"white",icon:"i-heroicons-ellipsis-vertical-16-solid"},{default:c(()=>[l("span",null,p(t(e).flows.length),1),t(n)?(s(),f("span",_e,"("+p(t(h))+")",1)):y("",!0)]),_:1})]),_:1},8,["items"])])]),t(e).flows.length>0?(s(),f("div",me,[(s(!0),f(U,null,B(t(e).paginatedFlows,i=>(s(),d(k,{key:i.name,flow:i},null,8,["flow"]))),128))])):(s(),f("p",de,p(t(e).$state.flows_search_filter||t(e).$state.flows_tags_filter?"No flows found":"No flows available"),1))],64))]),_:1})}}});export{xe as default};
